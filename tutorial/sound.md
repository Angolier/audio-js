Немножко про теорию звука
=========================
Я попробую на пальцах описать некоторые основные понятия, которые требуется знать, при цифровой обработке звука. 
В этом разделе нет серьёзной математики вроде быстрых преобразований Фурье и прочего - эти формулы не сложно найти в 
сети. Тут описывается только сама суть и смысл вещей с которыми придётся столкнуться.

Дискретизация
-------------
Прежде чем заниматься цифровой обработкой сигнала стоит разобраться в том, что такое этот цифровой сигнал и какие есть
особенности в его записи. В целом цифровой сигнал преставляет из себя просто набор значений уровня сигнала в отдельные 
моменты времени. Для каждого канала записываются отдельные значения, т.е. если задано 2 канала звука, для каждого
момента времени будет задано по 2 значения, если 5 каналов - то 5 значений и т.д. Так как значения для отдельных каналов
независимы, то в дальнейшем везде будем рассматривать просто один отдельный канал. Есть 2 основных характеристики
цифрового сигнала - частота дискретизации и глубина дискретизации по уровню. 

[Частота дискретизации](https://ru.wikipedia.org/wiki/Частота_дискретизации) указывает с какими интервалами по времени
идут данные об уровне сигнала. Эта характеристика накладываает ограничение на максимальную передаваемую частоту сигнала
(частота дискретизации / 2). Если брать примерный диапазон воспринимаемых человеком частот звука 20Гц - 20КГц, то
оптимальная частота дискретизации должна быть в районе 40КГц. У стандартных аудио-CD частота дискретизации составляет
44.1КГц 

[Глубина дискретизации](https://ru.wikipedia.org/wiki/Квантование_(обработка_сигналов)) по уровню - описывает
разрядность числа, которым описывается уровень сигнала. Эта характеристика накладывает ограничение на точность записи
уровня сигнала и на его минимальное значение. К громкости эта характеристика эта характеристика не имеет никакого
отношения, точнее имеет, но только к громкости шумов дробления. При преобразовании аналогового сигнала в цифровой
происходит округление значений уровня сигнала, что приводит к появлению шумов. Чем выше глубина дискретизации, тем 
меньше громкость этих шумов. Стандартная глубина дискретизации на audio-CD 16 бит. При этом разница в звучании перестаёт
быть заметна уже в районе 10-12 бит, если не использовать специальную студийную аппаратуру.

Уровень сигнала
---------------
Для начала стоит сразу понять, что когда речь идёт о цифровом сигнале можно говорить только об относительном уровне
сигнала. Абсолютный уровень сигнала зависит в первую очередь от воспроизводящей аппаратуры и он прямо пропорционален 
относительному уровню цифровго сигнала. При расчётах относительных уровней сигнала принято использовать [децибеллы](https://ru.wikipedia.org/wiki/Децибел). При этом за точку отсчёта берётся сигнал с максимально возможной амплитудой 
при заданной глубине дискретизации. Этот уровень указывается как 0 dBFS (dB - децибел, FS = Full Scale - полная шкала). 
Более низкие уровни сигнала указываются как -1 dBFS, -2 dBFS и т.д. Вполне очевидно, что более высоких уровней просто
не бывает (мы изначально берём максимально возможный уровень).

По началу бывает тяжело разобраться с тем, как соотносятся децибелы и реальный уровень сигнала. Тут на самом деле всё
просто. Каждые ~6 dB (Точнее 20 * log(2) ~ 6.02 dB) указывают на изменение уровня сигнала в 2 раза. То есть если мы 
говорим, о сигнале с уровнем -12 dBFS - это сигнал уровень которого в 4 раза меньше, чем максимальный.

При различной глубине дискретизации уровень сигнала по этой шкале изменяться не будет. Сигнал с уровнем -6 dBFS 
останется сигналом с уровнем -6 dBFS. Но всё же одна характеристика изменится - динамический диапазон. Динамический 
диапазон сигнала - это разница между его минимальным и максимальным значением. Он рассчитывается по формуле 
`n * 20 log(2)`, где n - глубина дискретизации (для грубых оценок можно пользоваться более простой формулой: `n * 6`). 
Для 16 бит это ~96.33 dB, для 24 бит ~144.49 dB. Это означает, что самый слабый сигнал, который можно описать 
с 24-битной глубиной дискретизации (-144.49 dBFS) на 48.16 dB слабее, чем самый слабый сигнал с 16-битной глубиной 
(-96.33 dBFS)

Восприятие
----------
Когда речь идёт о восприятия звука человеком, следует сначала разобраться о том, каким образом мы воспринимаем звук.
Очевидно, что мы слышим с помощью [ушей](https://ru.wikipedia.org/wiki/Ухо). Звуковые волны взаимодействуют с барабанной
перепонкой, смещая её, вибрации передаются во внутренее ухо, где их улавливают рецепторы. То на сколько смещается
барабанная перепонка зависит от такой характеристики как 
[звуковое давление](https://ru.wikipedia.org/wiki/Звуковое_давление). При этом [воспринимаемая громкость](https://ru.wikipedia.org/wiki/Громкость_звука) зависит от
звукового давления не напрямую, а логарифмически. Поэтому при изменении громкости принято использовать относительную
шкалу SPL (уровень звукового давления), значения которой указываются всё в тех же децибелах. Стоит также заметить, что
воспринимаемая громкость звука зависит не только от уровня звукового давления, но ещё и от частоты звука:
  
[<img src='https://upload.wikimedia.org/wikipedia/commons/3/37/Gromkost.png?uselang=ru' width="100%" />](https://ru.wikipedia.org/wiki/Громкость_звука)

Обработка
---------
Простейшим примером обработки звука является изменение его громкости. При этом происходит просто домножение уровня
сигнала на некоторое фиксированное значение. Однако даже в таком простом деле как регулировка громкости есть один
подводный камень. Как я уже отметил ранее, воспринимаемая громкость зависит от логарифма звукового давления, а
это значит, что использование линейной шкалы громкости не оказывается не очень эфективным. При линейной шкале громкости
возникает сразу 2 проблемы - для ощутимого изменения громкости, когда ползунок находится выше середины шкалы приходится 
достаточно далеко его сдвигать, при этом ближе к самому низу шкалы сдвиг меньше чем на толщину волоса может изменить
громкость в 2 раза (думаю с этим каждый сталкивался). Для решения данной проблемы используется логарифмическая шкала
громкости. При этом на всей её длинне передвижение ползунка на фиксированное расстояние меняет громкость в одинаковое
количество раз.
