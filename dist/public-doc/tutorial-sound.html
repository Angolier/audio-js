<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Tutorial: sound</title>
    
    
    
    
    
    <meta property="og:title" content=""/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content=""/>
    
    <meta property="og:url" content=""/>
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.css">
    <link type="text/css" rel="stylesheet" href="styles/jaguar.css">

    
    <script>
    var config = {"monospaceLinks":false,"cleverLinks":false,"applicationName":"YandexAudio","disqus":"","googleAnalytics":"","openGraph":{"title":"","type":"website","image":"","site_name":"","url":""},"meta":{"title":"","description":"","keyword":""},"linenums":true,"default":{}};
    </script>
    

    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html">YandexAudio</a></h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">
    
        <li class="item" data-name="ya.music.Audio.config">
            <span class="title">
                <a href="ya.music.Audio.config.html">ya.music.Audio.config</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="ya.music.Audio.config.audio">
            <span class="title">
                <a href="ya.music.Audio.config.audio.html">ya.music.Audio.config.audio</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="ya.music.Audio.config.audio.retry"><a href="ya.music.Audio.config.audio.html#.retry">retry</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="ya.music.Audio.config.flash">
            <span class="title">
                <a href="ya.music.Audio.config.flash.html">ya.music.Audio.config.flash</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="ya.music.Audio.config.flash.callback"><a href="ya.music.Audio.config.flash.html#.callback">callback</a></li>
            
                <li data-name="ya.music.Audio.config.flash.clickTimeout"><a href="ya.music.Audio.config.flash.html#.clickTimeout">clickTimeout</a></li>
            
                <li data-name="ya.music.Audio.config.flash.heartBeatInterval"><a href="ya.music.Audio.config.flash.html#.heartBeatInterval">heartBeatInterval</a></li>
            
                <li data-name="ya.music.Audio.config.flash.initTimeout"><a href="ya.music.Audio.config.flash.html#.initTimeout">initTimeout</a></li>
            
                <li data-name="ya.music.Audio.config.flash.loadTimeout"><a href="ya.music.Audio.config.flash.html#.loadTimeout">loadTimeout</a></li>
            
                <li data-name="ya.music.Audio.config.flash.name"><a href="ya.music.Audio.config.flash.html#.name">name</a></li>
            
                <li data-name="ya.music.Audio.config.flash.path"><a href="ya.music.Audio.config.flash.html#.path">path</a></li>
            
                <li data-name="ya.music.Audio.config.flash.playerID"><a href="ya.music.Audio.config.flash.html#.playerID">playerID</a></li>
            
                <li data-name="ya.music.Audio.config.flash.version"><a href="ya.music.Audio.config.flash.html#.version">version</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="ya.music.Audio.config.html5">
            <span class="title">
                <a href="ya.music.Audio.config.html5.html">ya.music.Audio.config.html5</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="ya.music.Audio.config.html5.blacklist"><a href="ya.music.Audio.config.html5.html#.blacklist">blacklist</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="ya.music.Audio.fx.volumeLib">
            <span class="title">
                <a href="ya.music.Audio.fx.volumeLib.html">ya.music.Audio.fx.volumeLib</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="ya.music.Audio.fx.volumeLib.EPSILON"><a href="ya.music.Audio.fx.volumeLib.html#.EPSILON">EPSILON</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="ya.music.Audio.fx.volumeLib.fromDBFS"><a href="ya.music.Audio.fx.volumeLib.html#.fromDBFS">fromDBFS</a></li>
            
                <li data-name="ya.music.Audio.fx.volumeLib.fromExponent"><a href="ya.music.Audio.fx.volumeLib.html#.fromExponent">fromExponent</a></li>
            
                <li data-name="ya.music.Audio.fx.volumeLib.toDBFS"><a href="ya.music.Audio.fx.volumeLib.html#.toDBFS">toDBFS</a></li>
            
                <li data-name="ya.music.Audio.fx.volumeLib.toExponent"><a href="ya.music.Audio.fx.volumeLib.html#.toExponent">toExponent</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="AbortablePromise">
            <span class="title">
                <a href="AbortablePromise.html">AbortablePromise</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="AbortablePromise#abort"><a href="AbortablePromise.html#abort">abort</a></li>
            
                <li data-name="AbortablePromise#catch"><a href="AbortablePromise.html#catch">catch</a></li>
            
                <li data-name="AbortablePromise#then"><a href="AbortablePromise.html#then">then</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Events">
            <span class="title">
                <a href="Events.html">Events</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Events.eventize"><a href="Events.html#.eventize">eventize</a></li>
            
                <li data-name="Events.mixin"><a href="Events.html#.mixin">mixin</a></li>
            
                <li data-name="Events#clearListeners"><a href="Events.html#clearListeners">clearListeners</a></li>
            
                <li data-name="Events#muteEvents"><a href="Events.html#muteEvents">muteEvents</a></li>
            
                <li data-name="Events#off"><a href="Events.html#off">off</a></li>
            
                <li data-name="Events#on"><a href="Events.html#on">on</a></li>
            
                <li data-name="Events#once"><a href="Events.html#once">once</a></li>
            
                <li data-name="Events#unmuteEvents"><a href="Events.html#unmuteEvents">unmuteEvents</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Promise">
            <span class="title">
                <a href="Promise.html">Promise</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Promise#catch"><a href="Promise.html#catch">catch</a></li>
            
                <li data-name="Promise#then"><a href="Promise.html#then">then</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="ya.music.Audio">
            <span class="title">
                <a href="ya.music.Audio.html">ya.music.Audio</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="ya.music.Audio#EVENT_CRASHED"><a href="ya.music.Audio.html#.EVENT_CRASHED">EVENT_CRASHED</a></li>
            
                <li data-name="ya.music.Audio#EVENT_ENDED"><a href="ya.music.Audio.html#.EVENT_ENDED">EVENT_ENDED</a></li>
            
                <li data-name="ya.music.Audio#EVENT_ERROR"><a href="ya.music.Audio.html#.EVENT_ERROR">EVENT_ERROR</a></li>
            
                <li data-name="ya.music.Audio#EVENT_LOADED"><a href="ya.music.Audio.html#.EVENT_LOADED">EVENT_LOADED</a></li>
            
                <li data-name="ya.music.Audio#EVENT_LOADING"><a href="ya.music.Audio.html#.EVENT_LOADING">EVENT_LOADING</a></li>
            
                <li data-name="ya.music.Audio#EVENT_PAUSE"><a href="ya.music.Audio.html#.EVENT_PAUSE">EVENT_PAUSE</a></li>
            
                <li data-name="ya.music.Audio#EVENT_PLAY"><a href="ya.music.Audio.html#.EVENT_PLAY">EVENT_PLAY</a></li>
            
                <li data-name="ya.music.Audio#EVENT_PROGRESS"><a href="ya.music.Audio.html#.EVENT_PROGRESS">EVENT_PROGRESS</a></li>
            
                <li data-name="ya.music.Audio#EVENT_STATE"><a href="ya.music.Audio.html#.EVENT_STATE">EVENT_STATE</a></li>
            
                <li data-name="ya.music.Audio#EVENT_STOP"><a href="ya.music.Audio.html#.EVENT_STOP">EVENT_STOP</a></li>
            
                <li data-name="ya.music.Audio#EVENT_SWAP"><a href="ya.music.Audio.html#.EVENT_SWAP">EVENT_SWAP</a></li>
            
                <li data-name="ya.music.Audio#EVENT_VOLUME"><a href="ya.music.Audio.html#.EVENT_VOLUME">EVENT_VOLUME</a></li>
            
                <li data-name="ya.music.Audio#PRELOADER_EVENT"><a href="ya.music.Audio.html#.PRELOADER_EVENT">PRELOADER_EVENT</a></li>
            
                <li data-name="ya.music.Audio#STATE_CRASHED"><a href="ya.music.Audio.html#.STATE_CRASHED">STATE_CRASHED</a></li>
            
                <li data-name="ya.music.Audio#STATE_IDLE"><a href="ya.music.Audio.html#.STATE_IDLE">STATE_IDLE</a></li>
            
                <li data-name="ya.music.Audio#STATE_INIT"><a href="ya.music.Audio.html#.STATE_INIT">STATE_INIT</a></li>
            
                <li data-name="ya.music.Audio#STATE_PAUSED"><a href="ya.music.Audio.html#.STATE_PAUSED">STATE_PAUSED</a></li>
            
                <li data-name="ya.music.Audio#STATE_PLAYING"><a href="ya.music.Audio.html#.STATE_PLAYING">STATE_PLAYING</a></li>
            
                <li data-name="ya.music.Audio.audioContext"><a href="ya.music.Audio.html#.audioContext">audioContext</a></li>
            
                <li data-name="ya.music.Audio.info"><a href="ya.music.Audio.html#.info">info</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="ya.music.Audio#clearListeners"><a href="ya.music.Audio.html#clearListeners">clearListeners</a></li>
            
                <li data-name="ya.music.Audio#getDuration"><a href="ya.music.Audio.html#getDuration">getDuration</a></li>
            
                <li data-name="ya.music.Audio#getLoaded"><a href="ya.music.Audio.html#getLoaded">getLoaded</a></li>
            
                <li data-name="ya.music.Audio#getPlayed"><a href="ya.music.Audio.html#getPlayed">getPlayed</a></li>
            
                <li data-name="ya.music.Audio#getPlayId"><a href="ya.music.Audio.html#getPlayId">getPlayId</a></li>
            
                <li data-name="ya.music.Audio#getPosition"><a href="ya.music.Audio.html#getPosition">getPosition</a></li>
            
                <li data-name="ya.music.Audio#getSrc"><a href="ya.music.Audio.html#getSrc">getSrc</a></li>
            
                <li data-name="ya.music.Audio#getState"><a href="ya.music.Audio.html#getState">getState</a></li>
            
                <li data-name="ya.music.Audio#getType"><a href="ya.music.Audio.html#getType">getType</a></li>
            
                <li data-name="ya.music.Audio#getVolume"><a href="ya.music.Audio.html#getVolume">getVolume</a></li>
            
                <li data-name="ya.music.Audio#initPromise"><a href="ya.music.Audio.html#initPromise">initPromise</a></li>
            
                <li data-name="ya.music.Audio#isDeviceVolume"><a href="ya.music.Audio.html#isDeviceVolume">isDeviceVolume</a></li>
            
                <li data-name="ya.music.Audio#isPreloaded"><a href="ya.music.Audio.html#isPreloaded">isPreloaded</a></li>
            
                <li data-name="ya.music.Audio#isPreloading"><a href="ya.music.Audio.html#isPreloading">isPreloading</a></li>
            
                <li data-name="ya.music.Audio#muteEvents"><a href="ya.music.Audio.html#muteEvents">muteEvents</a></li>
            
                <li data-name="ya.music.Audio#off"><a href="ya.music.Audio.html#off">off</a></li>
            
                <li data-name="ya.music.Audio#on"><a href="ya.music.Audio.html#on">on</a></li>
            
                <li data-name="ya.music.Audio#once"><a href="ya.music.Audio.html#once">once</a></li>
            
                <li data-name="ya.music.Audio#pause"><a href="ya.music.Audio.html#pause">pause</a></li>
            
                <li data-name="ya.music.Audio#play"><a href="ya.music.Audio.html#play">play</a></li>
            
                <li data-name="ya.music.Audio#playPreloaded"><a href="ya.music.Audio.html#playPreloaded">playPreloaded</a></li>
            
                <li data-name="ya.music.Audio#preload"><a href="ya.music.Audio.html#preload">preload</a></li>
            
                <li data-name="ya.music.Audio#restart"><a href="ya.music.Audio.html#restart">restart</a></li>
            
                <li data-name="ya.music.Audio#resume"><a href="ya.music.Audio.html#resume">resume</a></li>
            
                <li data-name="ya.music.Audio#setAudioPreprocessor"><a href="ya.music.Audio.html#setAudioPreprocessor">setAudioPreprocessor</a></li>
            
                <li data-name="ya.music.Audio#setPosition"><a href="ya.music.Audio.html#setPosition">setPosition</a></li>
            
                <li data-name="ya.music.Audio#setVolume"><a href="ya.music.Audio.html#setVolume">setVolume</a></li>
            
                <li data-name="ya.music.Audio#stop"><a href="ya.music.Audio.html#stop">stop</a></li>
            
                <li data-name="ya.music.Audio#toggleWebAudioAPI"><a href="ya.music.Audio.html#toggleWebAudioAPI">toggleWebAudioAPI</a></li>
            
                <li data-name="ya.music.Audio#unmuteEvents"><a href="ya.music.Audio.html#unmuteEvents">unmuteEvents</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            <span class="subtitle">Events</span>
            
                <li data-name="ya.music.Audio#event:EVENT_CRASHED"><a href="ya.music.Audio.html#event:EVENT_CRASHED">EVENT_CRASHED</a></li>
            
                <li data-name="ya.music.Audio#event:EVENT_ENDED"><a href="ya.music.Audio.html#event:EVENT_ENDED">EVENT_ENDED</a></li>
            
                <li data-name="ya.music.Audio#event:EVENT_ERROR"><a href="ya.music.Audio.html#event:EVENT_ERROR">EVENT_ERROR</a></li>
            
                <li data-name="ya.music.Audio#event:EVENT_LOADED"><a href="ya.music.Audio.html#event:EVENT_LOADED">EVENT_LOADED</a></li>
            
                <li data-name="ya.music.Audio#event:EVENT_LOADING"><a href="ya.music.Audio.html#event:EVENT_LOADING">EVENT_LOADING</a></li>
            
                <li data-name="ya.music.Audio#event:EVENT_PAUSE"><a href="ya.music.Audio.html#event:EVENT_PAUSE">EVENT_PAUSE</a></li>
            
                <li data-name="ya.music.Audio#event:EVENT_PLAY"><a href="ya.music.Audio.html#event:EVENT_PLAY">EVENT_PLAY</a></li>
            
                <li data-name="ya.music.Audio#event:EVENT_PROGRESS"><a href="ya.music.Audio.html#event:EVENT_PROGRESS">EVENT_PROGRESS</a></li>
            
                <li data-name="ya.music.Audio#event:EVENT_STATE"><a href="ya.music.Audio.html#event:EVENT_STATE">EVENT_STATE</a></li>
            
                <li data-name="ya.music.Audio#event:EVENT_STOP"><a href="ya.music.Audio.html#event:EVENT_STOP">EVENT_STOP</a></li>
            
                <li data-name="ya.music.Audio#event:EVENT_SWAP"><a href="ya.music.Audio.html#event:EVENT_SWAP">EVENT_SWAP</a></li>
            
                <li data-name="ya.music.Audio#event:EVENT_VOLUME"><a href="ya.music.Audio.html#event:EVENT_VOLUME">EVENT_VOLUME</a></li>
            
                <li data-name="ya.music.Audio#event:PRELOADER_EVENT+EVENT_ERROR"><a href="ya.music.Audio.html#event:PRELOADER_EVENT+EVENT_ERROR">PRELOADER_EVENT+EVENT_ERROR</a></li>
            
                <li data-name="ya.music.Audio#event:PRELOADER_EVENT+EVENT_LOADED"><a href="ya.music.Audio.html#event:PRELOADER_EVENT+EVENT_LOADED">PRELOADER_EVENT+EVENT_LOADED</a></li>
            
                <li data-name="ya.music.Audio#event:PRELOADER_EVENT+EVENT_LOADING"><a href="ya.music.Audio.html#event:PRELOADER_EVENT+EVENT_LOADING">PRELOADER_EVENT+EVENT_LOADING</a></li>
            
                <li data-name="ya.music.Audio#event:PRELOADER_EVENT+EVENT_PROGRESS"><a href="ya.music.Audio.html#event:PRELOADER_EVENT+EVENT_PROGRESS">PRELOADER_EVENT+EVENT_PROGRESS</a></li>
            
                <li data-name="ya.music.Audio#event:PRELOADER_EVENT+EVENT_STOP"><a href="ya.music.Audio.html#event:PRELOADER_EVENT+EVENT_STOP">PRELOADER_EVENT+EVENT_STOP</a></li>
            
            </ul>
        </li>
    
        <li class="item" data-name="ya.music.Audio.AudioError">
            <span class="title">
                <a href="ya.music.Audio.AudioError.html">ya.music.Audio.AudioError</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="ya.music.Audio.AudioError.BAD_STATE"><a href="ya.music.Audio.AudioError.html#.BAD_STATE">BAD_STATE</a></li>
            
                <li data-name="ya.music.Audio.AudioError.FLASH_BLOCKER"><a href="ya.music.Audio.AudioError.html#.FLASH_BLOCKER">FLASH_BLOCKER</a></li>
            
                <li data-name="ya.music.Audio.AudioError.FLASH_EMMITER_NOT_FOUND"><a href="ya.music.Audio.AudioError.html#.FLASH_EMMITER_NOT_FOUND">FLASH_EMMITER_NOT_FOUND</a></li>
            
                <li data-name="ya.music.Audio.AudioError.FLASH_INIT_TIMEOUT"><a href="ya.music.Audio.AudioError.html#.FLASH_INIT_TIMEOUT">FLASH_INIT_TIMEOUT</a></li>
            
                <li data-name="ya.music.Audio.AudioError.FLASH_INTERNAL_ERROR"><a href="ya.music.Audio.AudioError.html#.FLASH_INTERNAL_ERROR">FLASH_INTERNAL_ERROR</a></li>
            
                <li data-name="ya.music.Audio.AudioError.FLASH_NOT_RESPONDING"><a href="ya.music.Audio.AudioError.html#.FLASH_NOT_RESPONDING">FLASH_NOT_RESPONDING</a></li>
            
                <li data-name="ya.music.Audio.AudioError.FLASH_UNKNOWN_CRASH"><a href="ya.music.Audio.AudioError.html#.FLASH_UNKNOWN_CRASH">FLASH_UNKNOWN_CRASH</a></li>
            
                <li data-name="ya.music.Audio.AudioError.NOT_PRELOADED"><a href="ya.music.Audio.AudioError.html#.NOT_PRELOADED">NOT_PRELOADED</a></li>
            
                <li data-name="ya.music.Audio.AudioError.NO_IMPLEMENTATION"><a href="ya.music.Audio.AudioError.html#.NO_IMPLEMENTATION">NO_IMPLEMENTATION</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="ya.music.Audio.fx.Equalizer">
            <span class="title">
                <a href="ya.music.Audio.fx.Equalizer.html">ya.music.Audio.fx.Equalizer</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="ya.music.Audio.fx.Equalizer.DEFAULT_BANDS"><a href="ya.music.Audio.fx.Equalizer.html#.DEFAULT_BANDS">DEFAULT_BANDS</a></li>
            
                <li data-name="ya.music.Audio.fx.Equalizer.DEFAULT_PRESETS"><a href="ya.music.Audio.fx.Equalizer.html#.DEFAULT_PRESETS">DEFAULT_PRESETS</a></li>
            
                <li data-name="ya.music.Audio.fx.Equalizer#EVENT_CHANGE"><a href="ya.music.Audio.fx.Equalizer.html#.EVENT_CHANGE">EVENT_CHANGE</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="ya.music.Audio.fx.Equalizer#clearListeners"><a href="ya.music.Audio.fx.Equalizer.html#clearListeners">clearListeners</a></li>
            
                <li data-name="ya.music.Audio.fx.Equalizer#guessPreamp"><a href="ya.music.Audio.fx.Equalizer.html#guessPreamp">guessPreamp</a></li>
            
                <li data-name="ya.music.Audio.fx.Equalizer#loadPreset"><a href="ya.music.Audio.fx.Equalizer.html#loadPreset">loadPreset</a></li>
            
                <li data-name="ya.music.Audio.fx.Equalizer#muteEvents"><a href="ya.music.Audio.fx.Equalizer.html#muteEvents">muteEvents</a></li>
            
                <li data-name="ya.music.Audio.fx.Equalizer#off"><a href="ya.music.Audio.fx.Equalizer.html#off">off</a></li>
            
                <li data-name="ya.music.Audio.fx.Equalizer#on"><a href="ya.music.Audio.fx.Equalizer.html#on">on</a></li>
            
                <li data-name="ya.music.Audio.fx.Equalizer#once"><a href="ya.music.Audio.fx.Equalizer.html#once">once</a></li>
            
                <li data-name="ya.music.Audio.fx.Equalizer#savePreset"><a href="ya.music.Audio.fx.Equalizer.html#savePreset">savePreset</a></li>
            
                <li data-name="ya.music.Audio.fx.Equalizer#unmuteEvents"><a href="ya.music.Audio.fx.Equalizer.html#unmuteEvents">unmuteEvents</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="ya.music.Audio.fx.Equalizer~EqualizerBand">
            <span class="title">
                <a href="ya.music.Audio.fx.Equalizer-EqualizerBand.html">ya.music.Audio.fx.Equalizer~EqualizerBand</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="ya.music.Audio.fx.Equalizer~EqualizerBand#clearListeners"><a href="ya.music.Audio.fx.Equalizer-EqualizerBand.html#clearListeners">clearListeners</a></li>
            
                <li data-name="ya.music.Audio.fx.Equalizer~EqualizerBand#getFreq"><a href="ya.music.Audio.fx.Equalizer-EqualizerBand.html#getFreq">getFreq</a></li>
            
                <li data-name="ya.music.Audio.fx.Equalizer~EqualizerBand#getValue"><a href="ya.music.Audio.fx.Equalizer-EqualizerBand.html#getValue">getValue</a></li>
            
                <li data-name="ya.music.Audio.fx.Equalizer~EqualizerBand#muteEvents"><a href="ya.music.Audio.fx.Equalizer-EqualizerBand.html#muteEvents">muteEvents</a></li>
            
                <li data-name="ya.music.Audio.fx.Equalizer~EqualizerBand#off"><a href="ya.music.Audio.fx.Equalizer-EqualizerBand.html#off">off</a></li>
            
                <li data-name="ya.music.Audio.fx.Equalizer~EqualizerBand#on"><a href="ya.music.Audio.fx.Equalizer-EqualizerBand.html#on">on</a></li>
            
                <li data-name="ya.music.Audio.fx.Equalizer~EqualizerBand#once"><a href="ya.music.Audio.fx.Equalizer-EqualizerBand.html#once">once</a></li>
            
                <li data-name="ya.music.Audio.fx.Equalizer~EqualizerBand#setValue"><a href="ya.music.Audio.fx.Equalizer-EqualizerBand.html#setValue">setValue</a></li>
            
                <li data-name="ya.music.Audio.fx.Equalizer~EqualizerBand#unmuteEvents"><a href="ya.music.Audio.fx.Equalizer-EqualizerBand.html#unmuteEvents">unmuteEvents</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="ya.music.Audio.LoaderError">
            <span class="title">
                <a href="ya.music.Audio.LoaderError.html">ya.music.Audio.LoaderError</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="ya.music.Audio.LoaderError.FAILED"><a href="ya.music.Audio.LoaderError.html#.FAILED">FAILED</a></li>
            
                <li data-name="ya.music.Audio.LoaderError.TIMEOUT"><a href="ya.music.Audio.LoaderError.html#.TIMEOUT">TIMEOUT</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="ya.music.Audio.Logger">
            <span class="title">
                <a href="ya.music.Audio.Logger.html">ya.music.Audio.Logger</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="ya.music.Audio.Logger.ignores"><a href="ya.music.Audio.Logger.html#.ignores">ignores</a></li>
            
                <li data-name="ya.music.Audio.Logger.logLevels"><a href="ya.music.Audio.Logger.html#.logLevels">logLevels</a></li>
            
                <li data-name="ya.music.Audio.Logger#debug"><a href="ya.music.Audio.Logger.html#debug">debug</a></li>
            
                <li data-name="ya.music.Audio.Logger#error"><a href="ya.music.Audio.Logger.html#error">error</a></li>
            
                <li data-name="ya.music.Audio.Logger#info"><a href="ya.music.Audio.Logger.html#info">info</a></li>
            
                <li data-name="ya.music.Audio.Logger#log"><a href="ya.music.Audio.Logger.html#log">log</a></li>
            
                <li data-name="ya.music.Audio.Logger#showUrl"><a href="ya.music.Audio.Logger.html#showUrl">showUrl</a></li>
            
                <li data-name="ya.music.Audio.Logger#trace"><a href="ya.music.Audio.Logger.html#trace">trace</a></li>
            
                <li data-name="ya.music.Audio.Logger#warn"><a href="ya.music.Audio.Logger.html#warn">warn</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="ya.music.Audio.Logger.log"><a href="ya.music.Audio.Logger.html#.log">log</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="ya.music.Audio.PlaybackError">
            <span class="title">
                <a href="ya.music.Audio.PlaybackError.html">ya.music.Audio.PlaybackError</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="ya.music.Audio.PlaybackError.BAD_DATA"><a href="ya.music.Audio.PlaybackError.html#.BAD_DATA">BAD_DATA</a></li>
            
                <li data-name="ya.music.Audio.PlaybackError.CONNECTION_ABORTED"><a href="ya.music.Audio.PlaybackError.html#.CONNECTION_ABORTED">CONNECTION_ABORTED</a></li>
            
                <li data-name="ya.music.Audio.PlaybackError.DECODE_ERROR"><a href="ya.music.Audio.PlaybackError.html#.DECODE_ERROR">DECODE_ERROR</a></li>
            
                <li data-name="ya.music.Audio.PlaybackError.DONT_START"><a href="ya.music.Audio.PlaybackError.html#.DONT_START">DONT_START</a></li>
            
                <li data-name="ya.music.Audio.PlaybackError.NETWORK_ERROR"><a href="ya.music.Audio.PlaybackError.html#.NETWORK_ERROR">NETWORK_ERROR</a></li>
            
                <li data-name="ya.music.Audio.PlaybackError.html5"><a href="ya.music.Audio.PlaybackError.html#.html5">html5</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
    </ul>
</div>
    <div class="main">
        <h1 class="page-title" data-filename="tutorial-sound.html">Tutorial: sound</h1>
        <section>

<header>
    

</header>

<article>
    <h1>Введение в теорию звука</h1><p>Я попробую на пальцах описать некоторые основные понятия, которые требуется знать при цифровой обработке звука. 
В этом разделе нет серьезной математики вроде быстрых преобразований Фурье и прочего - эти формулы не сложно найти в 
сети. Тут описывается только суть и смысл вещей, с которыми придется столкнуться.</p>
<h2>Оцифровка, или Туда и обратно</h2><p>Прежде всего разберемся с тем, что такое цифровой сигнал, как он получается из аналогового и откуда берется аналоговый сигнал. Последний максимально просто можно определить как колебания напряжения, возникающие из-за колебаний мембраны в микрофоне.</p>
<p><img src="images/spectro.jpg" width="100%" alt="Рис. 1. Осциллограмма звука" />
<em>Рис. 1. Осциллограмма звука</em></p>
<p>Это осциллограмма звука - так выглядит аудио сигнал. Думаю, каждый хоть раз в жизни видел подобные картинки. Для того чтобы понять, как устроен процесс преобразования аналогового сигнала в цифровой, нужно нарисовать осциллограмму звука на миллиметровой бумаге. Для каждой вертикальной линии найдем точку пересечения с осциллограммой и ближайшее целое значение по вертикальной шкале — набор таких значений и будет простейшей записью цифрового сигнала.</p>
<p><a href="https://www.desmos.com/calculator/aojmanpjrl"><img src="images/demo.png" width="100%" alt="Рис. 2. Интерактивный пример сложения волн и оцифровки сигнала." /></a>
<em>Рис. 2. Интерактивный пример сложения волн и оцифровки сигнала.
Источник: https://www.desmos.com/calculator/aojmanpjrl</em></p>
<p>Воспользуемся этим интерактивным примером, чтобы разобраться в том, как накладываются друг на друга волны разной частоты и как происходит оцифровка. В левом меню можно включать/выключать отображение графиков, настраивать параметры входных данных и параметры дискретизации, а можно просто двигать контрольные точки.</p>
<p>На <a href="https://en.wikipedia.org/wiki/Analog-to-digital_converter">аппаратном уровне</a> это, разумеется, выглядит значительно сложнее, и в зависимости от аппаратуры сигнал может кодироваться совершенно разными способами. Самым распространенным из них является <a href="https://en.wikipedia.org/wiki/Pulse-code_modulation">импульсно-кодовая модуляция</a>, при которой записывается не конкретное значение уровня сигнала в каждый момент времени, а разница между текущим и предыдущим значением. Это позволяет снизить количество бит на каждый отсчет примерно на 25%. Этот способ кодирования применяется в наиболее распространенных аудио-форматах (WAV, MP3, WMA, OGG, FLAC, APE), которые используют контейнер <a href="http://wav-pcm.narod.ru/">PCM WAV</a>.</p>
<p>В реальности для создания стерео-эффекта при записи аудио чаще всего записывается не один, а сразу несколько каналов. В зависимости от используемого формата хранения они могут храниться независимо. Также уровни сигнала могут записываться как разница между уровнем основного канала и уровнем текущего.</p>
<p>Обратное преобразование из цифрового сигнала в аналоговый производится с помощью <a href="https://en.wikipedia.org/wiki/Digital-to-analog_converter">цифро-аналоговых преобразователей</a>, которые могут иметь различное устройство и принципы работы. Я опущу описание этих принципов в данной статье.</p>
<h2>Дискретизация</h2><p>Как известно, цифровой сигнал — это набор значений уровня сигнала, записанный через заданные промежутки времени. Процесс преобразования непрерывного аналогового сигнала в цифровой сигнал называется дискретизацией (по времени и по уровню). Есть две основные характеристики цифрового сигнала - частота дискретизации и глубина дискретизации по уровню.</p>
<p><img src="images/discrete-signal.png" width="100%" alt="Рис. 3. Дискретизация сигнала." />
<em>Рис. 3. Дискретизация сигнала.
Источник: <a href="https://en.wikipedia.org/wiki/Sampling_signal_processing">https://en.wikipedia.org/wiki/Sampling_signal_processing</a></em></p>
<p><a href="https://en.wikipedia.org/wiki/Sampling_signal_processing#Sampling_rate">Частота дискретизации</a> указывает на то, с какими интервалами по времени идут данные об уровне сигнала. Существует <a href="https://ru.wikipedia.org/wiki/Теорема_Котельникова">теорема Котельникова</a> (в западной литературе ее упоминают как <a href="https://en.wikipedia.org/wiki/Nyquist–Shannon_sampling_theorem">теорему Найквиста - Шеннона</a>, хотя встречается и название Котельникова - Шеннона), которая утверждает: для возможности точного восстановления аналогового сигнала из дискретного требуется, чтобы частота дискретизации была минимум в два раза выше, чем максимальная частота в аналоговом сигнале. Если брать примерный диапазон воспринимаемых человеком частот звука 20 Гц - 20 кГц, то оптимальная частота дискретизации (<a href="https://en.wikipedia.org/wiki/Nyquist_frequency">частота Найквиста</a>) должна быть в районе 40 кГц. У стандартных аудио-CD она составляет 44.1 кГц</p>
<p><img src="images/quantized-signal.png" width="100%" alt="Рис. 4. Квантование сигнала." />
<em>Рис. 4. Квантование сигнала.
Источник: <a href="https://ru.wikipedia.org/wiki/Квантование_обработка сигналов">https://ru.wikipedia.org/wiki/Квантование_(обработка сигналов)</a></em></p>
<p><a href="https://ru.wikipedia.org/wiki/Квантование_обработка_сигналов">Глубина дискретизации</a> по уровню описывает разрядность числа, которым описывается уровень сигнала. Эта характеристика накладывает ограничение на точность записи уровня сигнала и на его минимальное значение. Стоит специально отметить, что данная характеристика не имеет отношения к громкости - она отражает точность записи сигнала. Стандартная глубина дискретизации на audio-CD — 16 бит. При этом, если не использовать специальную студийную аппаратуру, разницу в звучании большинство перестает замечать уже в районе 10-12 бит. Однако большая глубина дискретизации позволяет избежать появления шумов при дальнейшей обработке звука.</p>
<h2>Шумы</h2><p>В цифровом звуке можно выделить три основных источника шумов.</p>
<h3>Джиттер</h3><p>Это случайные отклонения сигнала, как правило, возникающие из-за нестабильности частоты задающего генератора или различной скорости распространения разных частотных составляющих одного сигнала. Данная проблема возникает на стадии оцифровки. Если описывать <s>«на пальцах»</s> «на миллиметровке», это происходит из-за немного разного расстояния между вертикальными линиями.</p>
<h3>Шум дробления</h3><p>Он напрямую связан с глубиной дискретизации. Так как при оцифровке сигнала его реальные значения округляются с определенной точностью, возникают слабые шумы, связанные с ее потерей. Эти шумы могут появляться не только на стадии оцифровки, но и в процессе цифровой обработки (например, если сначала уровень сигнала сильно понижается, а затем — снова повышается).</p>
<h3>Алиасинг</h3><p>При оцифровке возможна ситуация, при которой в цифровом сигнале могут появиться частотные составляющие, которых не было в оригинальном сигнале. Данная ошибка получила название <a href="https://en.wikipedia.org/wiki/Aliasing">Aliasing</a>. Этот эффект напрямую связан с частотой дискретизации, а точнее — с частотой Найквиста. Проще всего понять, как это происходит, рассмотрев картинку ниже:</p>
<p><img src="images/alias.png" width="100%" alt="Рис. 5. Алиас." />
<em>Рис. 5. Алиас. Источник: https://ru.wikipedia.org/wiki/Алиасинг</em></p>
<p>Зеленым показана частотная составляющая, частота которой выше частоты Найквиста. При оцифровке такой частотной составляющей не удается записать достаточно данных для ее корректного описания. В результате при воспроизведении получается совершенно другой сигнал - желтая кривая.</p>
<h2>Уровень сигнала</h2><p>Для начала стоит сразу понять, что когда речь идет о цифровом сигнале, то можно говорить только об относительном уровне сигнала. Абсолютный зависит в первую очередь от воспроизводящей аппаратуры и прямо пропорционален относительному. При расчетах относительных уровней сигнала принято использовать <a href="https://en.wikipedia.org/wiki/Decibel">децибелы</a>. При этом за точку отсчета берется сигнал с максимально возможной амплитудой при заданной глубине дискретизации. Этот уровень указывается как 0 dBFS (dB - децибел, FS = Full Scale - полная шкала). Более низкие уровни сигнала указываются как -1 dBFS, -2 dBFS и т.д. Вполне очевидно, что более высоких уровней просто не бывает (мы изначально берем максимально возможный уровень).</p>
<p>Поначалу бывает тяжело разобраться с тем, как соотносятся децибелы и реальный уровень сигнала. На самом деле все просто. Каждые ~6 dB (точнее 20 log(2) ~ 6.02 dB) указывают на изменение уровня сигнала в два раза. То есть, когда мы говорим о сигнале с уровнем -12 dBFS, понимаем, что это сигнал, уровень которого в четыре раза меньше максимального, а -18 dBFS - в восемь, и так далее. Если посмотреть на определение децибела, в нем указывается значение <img class="image__inline" src="https://tex.s2cms.ru/svg/10%20log(a%2Fa_0)" alt="10log(a/a0)" /> - тогда откуда берется 20? Все дело в том, что децибел - это логарифм отношения двух одноименных энергетических величин, умноженный на 10. Амплитуда же не является <b>энергетической</b> величиной, следовательно ее нужно перевести в подходящую величину. Мощность, которую переносят волны с разными амплитудами, пропорциональна квадрату амплитуды. Следовательно для амплитуды (если все прочие условия, кроме амплитуды принять неизменными) формулу можно записать как <img class="image__inline" src="https://tex.s2cms.ru/svg/10%20log(a%5E2%20%2F%20a_0%5E2)%20%3D>%2020%20log(a%2Fa_0)" alt="10log(a^2/a0^2) => 20log(a/a0)" /></p>
<p><strong>N.B.</strong> Стоит упомянуть, что логарифм в данном случае берется десятичный, в то время как большинство библиотек под функцией с названием log подразумевает натуральный логарифм.</p>
<p>При различной глубине дискретизации уровень сигнала по этой шкале изменяться не будет. Сигнал с уровнем -6 dBFS останется сигналом с уровнем -6 dBFS. Но все же одна характеристика изменится - динамический диапазон. Динамический диапазон сигнала - это разница между его минимальным и максимальным значением. Он рассчитывается по формуле <img class="image__inline" src="https://tex.s2cms.ru/svg/n%20*%2020%20log(2)" alt="n * 20log(2)" />, где n - глубина дискретизации (для грубых оценок можно пользоваться более простой формулой: n * 6). Для 16 бит это ~96.33 dB, для 24 бит ~144.49 dB. Это означает, что самый большой перепад уровня, который можно описать с 24-битной глубиной дискретизации (144.49 dB), на 48.16 dB больше, чем самый большой перепад уровня с 16-битной глубиной (96.33 dB). Плюс к тому — шум дробления при 24 битах на 48 dB тише. </p>
<h2>Восприятие</h2><p>Когда мы говорим о восприятии звука человеком, следует сначала разобраться, каким образом люди воспринимают звук. Очевидно, что мы слышим с помощью <a href="https://en.wikipedia.org/wiki/Ear">ушей</a>. Звуковые волны взаимодействуют с барабанной перепонкой, смещая ее. Вибрации передаются во внутреннее ухо, где их улавливают рецепторы. То, насколько смещается барабанная перепонка, зависит от такой характеристики, как <a href="https://en.wikipedia.org/wiki/Sound_pressure">звуковое давление</a>. При этом <a href="https://en.wikipedia.org/wiki/Loudness">воспринимаемая громкость</a> зависит от звукового давления не напрямую, а логарифмически. Поэтому при изменении громкости принято использовать относительную шкалу SPL (уровень звукового давления), значения которой указываются все в тех же децибелах. Стоит также заметить, что воспринимаемая громкость звука зависит не только от уровня звукового давления, но еще и от частоты звука:</p>
<p><img src="images/fon.png" width="100%" alt="Рис. 6. Зависимость воспринимаемой громкости от частоты и амплитуды звука." />
<em>Рис. 6. Зависимость воспринимаемой громкости от частоты и амплитуды звука.
Источник: https://ru.wikipedia.org/wiki/Громкость_звука</em></p>
<h2>Громкость</h2><p>Простейшим примером обработки звука является изменение его громкости. При этом происходит просто умножение уровня сигнала на некоторое фиксированное значение. Однако даже в таком простом деле, как регулировка громкости, есть один подводный камень. Как я уже отметил ранее, воспринимаемая громкость зависит от логарифма звукового давления, а это значит, что использование линейной шкалы громкости оказывается не очень эффективным. При линейной шкале громкости возникает сразу две проблемы - для ощутимого изменения громкости, когда ползунок находится выше середины шкалы приходится достаточно далеко его сдвигать, при этом ближе к самому низу шкалы сдвиг меньше, чем на толщину волоса, может изменить громкость в два раза (думаю, с этим каждый сталкивался). Для решения данной проблемы используется логарифмическая шкала громкости. При этом на всей ее длине передвижение ползунка на фиксированное расстояние меняет громкость в одинаковое количество раз. В профессиональной записывающей и обрабатывающей аппаратуре, как правило, используется именно логарифмическая шкала громкости.</p>
<h3>Математика</h3><p>Тут я, пожалуй, немного вернусь к математике, потому что реализация логарифмической шкалы оказывается не такой простой и очевидной вещью для многих, а найти в интернете данную формулу не так просто, как хотелось бы. Заодно покажу, как просто переводить значения громкости в dBFS и обратно. Для дальнейших объяснений это будет полезным.</p>
<pre class="prettyprint source lang-(javascript)"><code>// Минимальное значение громкости - на этом уровне идет отключение звука
var EPSILON = 0.001;

// Коэффициент для преобразований в dBFS и обратно
var DBFS_COEF = 20 / Math.log(10);

// По положению на шкале вычисляет громкость
var volumeToExponent = function(value) {
    var volume = Math.pow(EPSILON, 1 - value);
    return volume > EPSILON ? volume : 0;
};

// По значению громкости вычисляет положение на шкале
var volumeFromExponent = function(volume) {
    return 1 - Math.log(Math.max(volume, EPSILON)) / Math.log(EPSILON);
};

// Перевод значения громкости в dBFS
var volumeToDBFS = function(volume) {
    return Math.log(volume) * DBFS_COEF;
};

// Перевод значения dBFS в громкость
var volumeFromDBFS = function(dbfs) {
    return Math.exp(dbfs / DBFS_COEF);
}</code></pre><h3>Цифровая обработка</h3><p>Теперь вернемся к тому, что мы имеем цифровой, а не аналоговый сигнал. У цифрового сигнала есть две особенности, которые стоит учитывать при работе с громкостью:</p>
<ul>
<li>точность, с которой указывается уровень сигнала, ограничена (причем достаточно сильно. 16 бит - это в 2 раза меньше, чем используется для стандартного числа с плавающей точкой);</li>
<li>у сигнала есть верхняя граница уровня, за которую он не может выйти.</li>
</ul>
<p>Из того, что уровень сигнала имеет ограничение точности, следует две вещи:</p>
<ul>
<li>уровень шумов дробления возрастает при увеличении громкости. Для малых изменений обычно это не очень критично, так как изначальный уровень шума значительно тише ощутимого, и его можно безопасно поднимать в 4-8 раз (например, применять эквалайзер с ограничением шкалы в ±12dB);</li>
<li>не стоит сначала сильно понижать уровень сигнала, а затем сильно его повышать - при этом могут появиться новые шумы дробления, которых изначально не было.</li>
</ul>
<p>Из того, что сигнал имеет верхнее ограничение уровня, следует, что нельзя безопасно увеличивать громкость выше единицы. При этом пики, которые окажутся выше границы, будут «срезаны» и произойдет потеря данных.</p>
<p><img src="images/clipping.png" width="100%" alt="Рис. 7. Клиппинг." />
<em>Рис. 7. Клиппинг. 
Источник: <a href="https://en.wikipedia.org/wiki/Clipping_audio">https://en.wikipedia.org/wiki/Clipping_audio</a></em></p>
<p>На практике все это означает, что стандартные для Audio-CD параметры дискретизации (16 бит, 44,1 кГц) не позволяют производить качественную обработку звука, потому что имеют очень малую избыточность. Для этих целей лучше использовать более избыточные форматы. Однако стоит учитывать, что общий размер файла пропорционален параметрам дискретизации, поэтому выдача таких файлов для онлайн воспроизведения - не лучшая идея.</p>
<h3>Измерение громкости</h3><p>Для того чтобы сравнивать громкость двух разных сигналов, ее для начала нужно как-то измерить. Существует по меньшей мере три метрики для измерения громкости сигналов - максимальное пиковое значение, усредненное значение уровня сигнала и метрика ReplayGain.</p>
<p>Максимальное пиковое значение достаточно слабая метрика для оценки громкости. Она никак не учитывает общий уровень громкости - например, если записать грозу, то большую часть времени на записи будет тихо шелестеть дождь и лишь пару раз прогремит гром. Максимальное пиковое значение уровня сигнала у такой записи будет довольно высоким, но большая часть записи будет иметь весьма низкий уровень сигнала. Однако эта метрика все равно является полезной - она позволяет вычислить максимальное усиление, которое можно применить к записи, при котором не будет потерь данных из-за «обрезания» пиков.</p>
<p>Усредненное значение уровня сигнала — более полезная метрика и легко вычислимая, но все же имеет существенные недостатки, связанные с тем, как мы воспринимаем звук. Визг циркулярной пилы и рокот водопада, записанные с одинаковым средним уровнем сигнала, будут восприниматься совершенно по-разному.</p>
<p><a href="https://en.wikipedia.org/wiki/ReplayGain">ReplayGain</a> наиболее точно передает воспринимаемый уровень громкости записи и учитывает физиологические и психические особенности восприятия звука. Для промышленного выпуска записей многие звукозаписывающие студии используют именно ее, также она поддерживается большинством популярных медиа-плееров. (<a href="https://ru.wikipedia.org/wiki/ReplayGain">Русская статья</a> на WIKI содержит много неточностей и фактически не корректно описывает саму суть технологии).</p>
<h3>Нормализация громкости</h3><p>Если мы можем измерять громкость различных записей, мы можем ее нормализовать. Идея нормализации состоит в том, чтобы привести разные звуки к одинаковому уровню воспринимаемой громкости. Для этого используется несколько различных подходов. Как правило, громкость стараются максимизировать, но это не всегда возможно из-за ограничений максимального уровня сигнала. Поэтому обычно берется некоторое значение немного меньше максимума (например -14 dBFS), к которому пытаются привести все сигналы.</p>
<p>Иногда нормализацию громкости производят в рамках одной записи - при этом различные части записи усиливают на разные величины, чтобы их воспринимаемая громкость была одинаковой. Такой подход очень часто применяется в компьютерных видео-плеерах - звуковая дорожка многих фильмов может содержать участки с очень сильно отличающейся громкостью. В такой ситуации возникают проблемы при просмотре фильмов без наушников в позднее время - при громкости, на которой нормально слышен шепот главных героев, выстрелы способны перебудить соседей. А на громкости, при которой выстрелы не бьют по ушам, шепот становится вообще неразличим. При внутри-трековой нормализации громкости плеер автоматически увеличивает громкость на тихих участках и понижает на громких. Однако этот подход создает ощутимые артефакты воспроизведения при резких переходах между тихим и громким звуком, а также порой завышает громкость некоторых звуков, которые по задумке должны быть фоновыми и еле различимыми.</p>
<p>Также внутреннюю нормализацию порой производят, чтобы повысить общую громкость треков. Это называется нормализацией с компрессией. При этом подходе среднее значение уровня сигнала максимизируется за счет усиления всего сигнала на заданную величину. Те участки, которые должны были быть подвергнуты «обрезанию», из-за превышения максимального уровня усиливаются на меньшую величину, позволяя избежать этого. Этот способ увеличения громкости значительно снижает качество звучания трека, но, тем не менее, многие звукозаписывающие студии не брезгуют его применять.</p>
<h2><a href="https://ru.wikipedia.org/wiki/Цифровой_фильтр">Цифровые фильтры сигнала</a></h2><p>В большинстве случаев звук состоит из набора гармоник различной частоты и амплитуды. В некоторых случаях какие-то частоты стоит усиливать или наоборот полностью подавлять (например очень часто подавляют звук на частоте 50 Гц, т.к. эта частота является резонансной по отношению к току в бытовой сети питания). Также бывает необходимо выделять отдельные диапазоны частот (таким образом можно например выводить низкий бас на сабвуфер, не пропуская на него высокие частоты). Для этих целей используются различные фильтры сигнала.  </p>
<h3>Характеристики фильтров</h3><p>Как очевидно, при фильтрации сигнала меняется не только громкость данного сигнала, но и множество других характеристик. Стоит заметить, что изменение громкости при фильтрации почти всегда является побочным явлением, которое требуется компенсировать. Прежде чем рассматривать сами фильтры, стоит уделить немного внимания самим характеристикам этих фильтров.</p>
<p>Характеристики фильтров удобно рассматривать в виде графиков зависимости какой-то величины от частоты сигнала:</p>
<p><em>Горизонтальная ось отображает частоту, по ней применяется логарифмический масштаб, вертикальная - магнитуду (желтый график) от 0 до 2, или фазовый сдвиг (зеленый график) от  -Pi до Pi. Частота фильтра отмечена красной чертой на графике</em></p>
<p><img src="images/lowpass.png" width="100%" alt="Рис. 8. Графики АЧХ и ФЧХ биквадратного фильтра нижних частот" />
<em>Рис. 8. Графики АЧХ и ФЧХ биквадратного фильтра нижних частот.</em></p>
<h4><a href="https://ru.wikipedia.org/wiki/Амплитудно-частотная_характеристика">Амплитудно-частотная характеристика</a> (АЧХ)</h4><p>Данная характеристика показывает зависимость амплитуды выходного сигнала от частоты входного сигнала. Это основная характеристика для большинства фильтров - она показывает, какие частоты будут усилены, какие оставлены без изменений, а какие будут понижены.</p>
<h4><a href="https://ru.wikipedia.org/wiki/Фазо-частотная_характеристика">Фазо-частотная характеристика</a> (ФЧХ)</h4><p>Данная характеристика описывает зависимость фазового сдвига выходного сигнала относительно входного в зависимости от частоты входного сигнала. В целом данная характеристика мало влияет на звучание, но очень важна при сложении сигналов. Если мы возьмем 2 одинаковых сигнала с одинаковой фазой и сложим их - получим сигнал в 2 раза громче. Но если второй сигнал будет иметь сдвиг по фазе Pi (противофаза), то результатом будет нулевой сигнал (кстати, на этом свойстве основана работа многих фильтров). Чтобы лучше понять, как различный фазовый сдвиг отдельных гармоник влияет на результирующий сигнал, можно поэкспериментировать на этой <a href="https://www.desmos.com/calculator/aojmanpjrl">демонстрации</a>.</p>
<h4><a href="http://www.dsplib.ru/content/filters/linphase/linphase.html">Групповая задержка</a></h4><p>Групповая задержка определяет разницу во времени между появлением выходного сигнала относительно момента поступления входного сигнала. Стоит заметить, что групповая задержка и фазовый сдвиг прямо пропорциональны <img class="image__inline" src="https://tex.s2cms.ru/svg/_%5CDelta%20t%20%3D%20%5Ccfrac%7B_%5CDelta%5Comega%7D%7B2%5Cpi%5Cnu%7D" alt="t = w / (2 * Pi * v)" />. При этом стоит учитывать, что при фиксированной групповой задержке фазовый сдвиг будет различен для разных частот и наоброт.</p>
<h4><a href="https://ru.wikipedia.org/wiki/Импульсная_переходная_функция">Импульсная характеристика</a></h4><p>Импульсной характеристикой системы называется ее реакция на единичный импульс при нулевых начальных условиях. ((c)тырено с Вики). Фактически это выходной сигнал системы, являющийся результатом единичного импульса, поданного на вход. Единичный импульс - это бесконечно малый по длительности и бесконечно большой по амплитуде импульс (<a href="https://ru.wikipedia.org/wiki/Дельта-функция">дельта-функция Дирака</a>). В случае цифрового сигнала в качестве единичного импульса берется сигнал с единичной амплитудой и частотой, равной частоте дискретизации (т.е. один отсчет, равный 0 dBFS). Данная характеристика является более полным описанием системы, т.к. и АЧХ, и ФЧХ могут быть рассчитаны из данной характеристики с помощью преобразования Фурье, а линейная свертка входного сигнала и амплитудной характеристки позволяет получить выходной сигнал данной системы.</p>
<h4>Порядок фильтра</h4><p>Если посмотреть на АЧХ большинства фильтров, то заметно, что в полосе подавления или усиления мы имеем не резкий перепад графика, а плавный спуск или подъем, т.е. влияние фильтра проявляется постепенно в зависимости от частоты. Крутизну данного спуска или подъема в переходной зоне фильтра принято обозначать в децибелах на октаву. Порядок фильтра - это безразмерная величина, которая как раз характеризует крутизну графика в переходной зоне. Фильтр с порядком 1 имеет крутизну 6 дБ/окт, с порядком 2 - 12 дБ/окт, с порядком 3 - 18 дБ/окт и т.д. То есть фактически влияние фильтра первого порядка усиливается в 2 раза при изменении частоты в 2 раза, второго порядка - в 4 раза и т.д.</p>
<h3>Типы фильтров</h3><p>В зависимости от того, является импульсная характеристика конечной или бесконечной по времени, выделяют 2 типа фильтров.</p>
<h4><a href="https://ru.wikipedia.org/wiki/Фильтр_с_конечной_импульсной_характеристикой">Фильтры с конечной импульсной характеристикой</a> (КИХ)</h4><p>Данный вид фильтров, как следует из названия, имеет конечную импульсную характеристику. Их также называют нерекурсивными, т.к. в них отсутствует обратная связь. Данный вид фильтров использует множество отсчетов из входного сигнала, на основе которых рассчитывает выходной сигнал. Количество отсчетов, необходимых для построения фильтра, напрямую зависит от диапазона частот, с которыми данный фильтр будет работать, и частоты дискретизации. Чем ниже частота, с которой требуется работать фильтру, тем больше требуется отсчетов. Так как даже для относительно высоких частот требуется использование тысяч отсчетов, данный вид фильтров редко применяется в обработке звука в реальном времени, поскольку требует достаточно большого количества расчетов.</p>
<h4><a href="https://ru.wikipedia.org/wiki/Фильтр_с_бесконечной_импульсной_характеристикой">Фильтры с бесконечной импульсной характеристикой</a> (БИХ)</h4><p>Этот вид фильтров имеет бесконечную импульсную характеристику за счет использования обратной связи. На деле это означает, что один или несколько предыдущих отсчетов выходного сигнала влияют на текущий выходной сигнал. Данный вид фильтров выгодно отличается от КИХ фильтров тем, что обычно использует всего несколько отсчетов из входного сигнала и несколько отсчетов выходного сигнала (например, <a href="https://en.wikipedia.org/wiki/Digital_biquad_filter">биквадратный фильтр</a> использует два отсчета входного сигнала и два выходного). За счет достаточного малого количества расчетов этот фильтр идеально подходит для обработки звука в реальном времени.</p>
<h3>Виды фильтров</h3><p>Существует несколько стандартных задач в области обработки сигналов, для которых применяются стандартные виды фильтров.</p>
<h4><a href="https://ru.wikipedia.org/wiki/Фильтр_нижних_частот">Фильтр низких частот</a></h4><p><em>Горизонтальная ось отображает частоту, по ней применяется логарифмический масштаб, вертикальная - магнитуду от 0 до 2. Частота фильтра отмечена красной чертой на графике</em></p>
<p><img src="images/lowpass-filter.png" width="100%" alt="Рис. 9. Графики АЧХ фильтров нижних частот" />
<em>Рис. 9. Графики АЧХ фильтров нижних частот</em></p>
<p>Фильтр низких частот - это фильтр, пропускающий частоты ниже заданной и подавляющий более высокие частоты. Данный фильтр является одним из самых важных в цифровой обработке звука. При оцифровке сигнала требуется отсекать частоты выше частоты Наквиста (иначе будут возникать алиасы) перед непосредственно оцифровкой - для этих целей используется фильтр нижних частот. Также данный фильтр используется при передискретизации на более низкую частоту с той же целью - чтобы устранить алиасы. Кроме этого, данный фильтр применяется перед низкочастотными динамиками и сабвуферами для улучшения качества звучания.</p>
<p>Идеальный фильтр нижних частот полностью подавляет все частоты выше заданной и пропускает остальные частоты без изменений. В реальности подобный фильтр реализовать практически не возможно, т.к. данный фильтр будет иметь бесконечную импульсную характеристику (данный фильтр реализуем только для записанных сигналов или для идеально-периодичных сигналов). Реальные фильтры нижних частот для обработки звука в реальном времени имеют переходную зону, как показано на графике.</p>
<p>Фильтры нижних частот обычно используются в качестве прототипов при проектировании других видов фильтров, так что они имеют схожие АЧХ и ФЧХ.</p>
<h4><a href="https://ru.wikipedia.org/wiki/Фильтр_верхних_частот">Фильтр верхних частот</a></h4><p><em>Горизонтальная ось отображает частоту, по ней применяется логарифмический масштаб, вертикальная - магнитуду от 0 до 2. Частота фильтра отмечена красной чертой на графике</em></p>
<p><img src="images/highpass-filter.png" width="100%" alt="Рис. 10. Графики АЧХ фильтров верхних частот" />
<em>Рис. 10. Графики АЧХ фильтров верхних частот</em></p>
<p>Фильтр высоких частот является противоположностью фильтра нижних частот - он пропускает частоты выше заданной и подавляет более низкие частоты. В обработке звука данный фильтр чаще всего применяется перед высокочастотными динамиками, чтобы улучшить качество их звучания.</p>
<p>Аналогично фильтру нижних частот идеальный фильтр практически нереализуем для обработки звука в реальном времени. Реальные фильтры имеют переходную зону, как показано на графике.</p>
<h4><a href="https://ru.wikipedia.org/wiki/Полосовой_фильтр">Полосно-пропускающий фильтр</a></h4><p><em>Горизонтальная ось отображает частоту, по ней применяется логарифмический масштаб, вертикальная - магнитуду от 0 до 2. Частоты фильтра отмечены красными чертами на графике</em></p>
<p><img src="images/bandpass-filter.png" width="100%" alt="Рис. 11. Графики АЧХ полосовых фильтров" />
<em>Рис. 11. Графики АЧХ полосовых фильтров</em></p>
<p>Также его называют полосным фильтр. Он пропускает частоты в некой полосе пропускания и заглушает остальные частоты. Данный фильтр можно реализовать как последовательно подключенные фильтр нижних частот и фильтр верхних частот. Аналогично фильтру верхних частот данный фильтр часто применяют перед средне-частотными динамиками. Также данный фильтр используется для выделения голоса в системах распознования речи.</p>
<h4><a href="https://ru.wikipedia.org/wiki/Полосно-заграждающий_фильтр">Полосно-заграждающий фильтр</a></h4><p><em>Горизонтальная ось отображает частоту, по ней применяется логарифмический масштаб, вертикальная - магнитуду от 0 до 2. Частоты фильтра отмечены красными чертами на графике</em></p>
<p><img src="images/bandstop-filter.png" width="100%" alt="Рис. 12. Графики АЧХ полосно-заграждающих фильтров" />
<em>Рис. 12. Графики АЧХ полосно-заграждающих фильтров</em></p>
<p>Данный фильтр является противоположностью полосно-пропускающих фильтров. Этот фильтр заглушает частоты в некой заданной полосе и пропускает все остальные частоты. Данный фильтр можно реализовать как параллельно подключенные фильтр нижних частот и фильтр верхних частот. В обработке звука данный фильтр применяется для подавления шумов на различных частотах (например, таким образом подавляется частота 50 Гц, которая создает резонанс с бытовой сетью электропитания)</p>
<h3>Реализации</h3><p>Существует множество реализаций перечисленных фильтров. Я не стану подробно расписывать принципы их работы, просто дам короткое описание их особенностей.</p>
<h4><a href="https://ru.wikipedia.org/wiki/Фильтр_Бесселя">Фильтр Бесселя</a> (<a href="https://www.desmos.com/calculator/6nz8ct2jfk">демонтрация</a>)</h4><p>Данный фильтр отличается максимально гладкой функцией групповой задержки и линейной ФЧХ, за счет чего форма выходного сигнала в полосе пропускания сохраняется практически неизменной.</p>
<h4><a href="https://ru.wikipedia.org/wiki/Фильтр_Баттерворта">Фильтр Баттерворта</a>(<a href="https://www.desmos.com/calculator/wwgd2cqkkq">демонстрация</a>)</h4><p>Отличительной особенностью данного фильтра является максимально гладкая функция АЧХ. Однако он имеет достаточно большую нелинейную групповую задержку в полосе пропускания на высоких порядках.</p>
<h4><a href="https://ru.wikipedia.org/wiki/Фильтр_Чебышева">Фильтр Чебышева</a> (<a href="https://www.desmos.com/calculator/acy7dkipyy">демонстрация</a>)</h4><p>Данный фильтр имеет более крутой спад АЧХ (особенно фильтр II рода), но также имеет существенные пульсации АЧХ. В случае фильтра I рода эти пульсации находятся в полосе пропускания, а в случае фильтра II рода - в полосе подавления.</p>
<h4><a href="https://ru.wikipedia.org/wiki/Эллиптический_фильтр">Эллиптический фильтр</a> (<a href="https://www.desmos.com/calculator/mbtd8pwz1c">демонстрация</a>)</h4><p>Данный фильтр имеет очень крутой спад АЧХ и пульсации АЧХ в полосе пропускания и в полосе подавления. При этом величина пульсаций в этих полосах независима. Если отсутствуют пульсации в полосе пропускания, то фильтр вырождается в фильтр Чебышева 1 рода, если они отсутствуют в полосе подавления - в фильтр Чебышева 2 рода, если они отсутвуют в обоих полосах пропускания, то он вырождается в фильтр Баттерворта.</p>
<h4><a href="https://ru.wikipedia.org/wiki/Фильтр_Лежандра">Фильтр Лежандра</a> (<a href="https://www.desmos.com/calculator/hpu2mf11xn">демонстрация</a>)</h4><p>Имеет более крутой спад АЧХ, чем фильтр Баттерворта, но его АЧХ в полосе пропускания не такая гладкая. Является компромиссом между фильтром Баттерворта и фильтром Чебышева 1 рода.</p>
<h2>Материалы</h2><ul>
<li><a href="http://audiophilesoft.ru/publ/my/digital_loudness/11-1-0-86">О понятии громкости в цифровом представлении звука и о методах ее повышения</a></li>
<li><a href="https://ru.wikipedia.org/wiki/Звук">Звук</a></li>
<li><a href="https://ru.wikipedia.org/wiki/Амплитуда">Амплитуда</a></li>
<li><a href="https://ru.wikipedia.org/wiki/Частота">Частота</a></li>
<li><a href="https://ru.wikipedia.org/wiki/Цифровой_сигнал">Цифровой сигнал</a></li>
<li><a href="https://ru.wikipedia.org/wiki/Аналоговый_сигнал">Аналоговый сигнал</a></li>
<li><a href="https://ru.wikipedia.org/wiki/Цифровая_обработка_сигналов">Цифровая обработка сигналов</a></li>
<li><a href="https://www.desmos.com/calculator/aojmanpjrl">Интерактивный пример сложения волн и оцифровки сигнала</a></li>
<li><a href="https://ru.wikipedia.org/wiki/Аналого-цифровой_преобразователь">Аналогово-цифровой преобразователь</a></li>
<li><a href="https://ru.wikipedia.org/wiki/Цифро-аналоговый_преобразователь">Цифро-аналоговый преобразователь</a></li>
<li><a href="https://ru.wikipedia.org/wiki/Импульсно-кодовая_модуляция">Импульсно-кодовая модуляция</a></li>
<li><a href="http://wav-pcm.narod.ru/">Формат PCM WAV</a></li>
<li><a href="https://en.wikipedia.org/wiki/Sampling_%28signal_processing%29">Сэмплирование (en)</a></li>
<li><a href="https://ru.wikipedia.org/wiki/Частота_дискретизации">Частота дискретизации</a></li>
<li><a href="https://ru.wikipedia.org/wiki/Теорема_Котельникова">Теорема Котельникова</a></li>
<li><a href="https://ru.wikipedia.org/wiki/Частота_Найквиста">Частота Найквиста</a></li>
<li><a href="https://ru.wikipedia.org/wiki/Квантование_%28обработка_сигналов%29">Глубина дискретизации</a></li>
<li><a href="https://ru.wikipedia.org/wiki/Алиасинг">Alias</a></li>
<li><a href="https://ru.wikipedia.org/wiki/Децибел">Децибел</a></li>
<li><a href="https://ru.wikipedia.org/wiki/Ухо">Строение уха</a></li>
<li><a href="https://ru.wikipedia.org/wiki/Звуковое_давление">Звуковое давление</a></li>
<li><a href="https://ru.wikipedia.org/wiki/Громкость_звука">Воспринимаемая громкость</a></li>
<li><a href="https://en.wikipedia.org/wiki/Clipping_%28audio%29">Клиппинг</a></li>
<li><a href="https://en.wikipedia.org/wiki/ReplayGain">ReplayGain описание</a></li>
<li><a href="http://wiki.hydrogenaud.io/index.php?title=ReplayGain_specification">ReplayGain спецификация</a>  </li>
<li><a href="https://ru.wikipedia.org/wiki/Амплитудно-частотная_характеристика">Амплитудо-частотная характеристика</a></li>
<li><a href="https://ru.wikipedia.org/wiki/Фазо-частотная_характеристика">Фазо-частотная характеристика</a></li>
<li><a href="http://www.dsplib.ru/content/filters/linphase/linphase.html">Групповая задержка</a></li>
<li><a href="https://ru.wikipedia.org/wiki/Импульсная_переходная_функция">Импульсная характеристика</a></li>
<li><a href="https://ru.wikipedia.org/wiki/Дельта-функция">Дельта-функция Дирака</a></li>
<li><a href="https://ru.wikipedia.org/wiki/Преобразование_Фурье">Преобразование Фурье</a></li>
<li><a href="https://ru.wikipedia.org/wiki/Цифровой_фильтр">Цифровые фильтры</a></li>
<li><a href="https://ru.wikipedia.org/wiki/Фильтр_с_бесконечной_импульсной_характеристикой">Фильтр с бесконечной импульсной характеристикой</a></li>
<li><a href="https://ru.wikipedia.org/wiki/Фильтр_с_конечной_импульсной_характеристикой">Фильтр с конечной импульсной характеристикой</a></li>
<li><a href="https://en.wikipedia.org/wiki/Digital_biquad_filter">Биквадратный фильтр (en)</a></li>
<li><a href="https://ru.wikipedia.org/wiki/Фильтр_Бесселя">Фильтр Бесселя</a></li>
<li><a href="https://ru.wikipedia.org/wiki/Фильтр_Баттерворта">Фильтр Баттерворта</a></li>
<li><a href="https://ru.wikipedia.org/wiki/Фильтр_Чебышева">Фильтр Чебышева</a></li>
<li><a href="https://ru.wikipedia.org/wiki/Эллиптический_фильтр">Эллиптический фильтр</a></li>
<li><a href="https://ru.wikipedia.org/wiki/Фильтр_Лежандра">Фильтр Лежандра</a></li>
</ul>
<h2>Полезные ссылки</h2><ul>
<li><a href="http://toxicdump.org/stuff/FourierToy.swf">визуализация синусоид</a></li>
<li><a href="http://www.bfxr.net/">генерация звука с множеством параметров</a></li>
<li><a href="https://en.wikipedia.org/wiki/List_of_audio_programming_languages">языки программирования звука</a></li>
<li>алгоритмические генераторы звука: <a href="http://wavepot.com/">wavepot.com</a>, <a href="http://studio.substack.net/">studio.substack.net</a>, <a href="http://wurstcaptures.untergrund.net/music/">wurstcaptures.untergrund.net</a></li>
<li><a href="http://webaudioplayground.appspot.com/">визуальный конструктор фильтров Web Audio API</a></li>
<li><a href="http://app.hya.io/">визуальная студия аудио-обработки</a> </li>
</ul>
<h2>Благодарности</h2><p>Большое спасибо моим коллегам, которые помогали собирать материалы для этой статьи и давали полезные советы.</p>
<p>Отдельное спасибо </p>
<ul>
<li>Тарасу <a href="http://habrahabr.ru/users/audiophile/">@Audiophile</a> Ковриженко за описание алгоритмов нормализации и максимизации громкости,</li>
<li>Сергею <a href="http://habrahabr.ru/users/forgotten/">@forgotten</a> Константинову за большое количество пояснений и советов по данной статье, </li>
<li>Денису <a href="http://habrahabr.ru/users/deniskreshikhin/">@deniskreshikhin</a> Крешихину и Никите <a href="http://habrahabr.ru/users/merlin-vrn/">@merlin-vrn</a> Киприянову за комментарии по работе цифровых фильтров.</li>
</ul>
<p>Большое спасибо <a href="http://habrahabr.ru/users/dtestyk/">@dtestyk</a> за список полезных ссылок.</p>
</article>

</section>


        

        <footer>
            Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a>
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/main.js"></script>
</body>
</html>