!function e(t,i,n){function r(s,a){if(!i[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[s]={exports:{}};t[s][0].call(c.exports,function(e){var i=t[s][1][e];return r(i?i:e)},c,c.exports,e,t,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,t,i){function n(){c=!1,a.length?u=a.concat(u):p=-1,u.length&&r()}function r(){if(!c){var e=setTimeout(n);c=!0;for(var t=u.length;t;){for(a=u,u=[];++p<t;)a[p].run();p=-1,t=u.length}a=null,c=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function s(){}var a,l=t.exports={},u=[],c=!1,p=-1;l.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];u.push(new o(e,t)),1!==u.length||c||setTimeout(r,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=s,l.addListener=s,l.once=s,l.off=s,l.removeListener=s,l.removeAllListeners=s,l.emit=s,l.binding=function(e){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(e){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],2:[function(e,t,i){(function(e){!function(i){var n,r=function(){var t=[],n=function(e){return 1===t.push(e)},r=function(){var e=t,i=0,n=t.length;for(t=[];n>i;)e[i++]()};if("function"==typeof setImmediate)return function(e){n(e)&&setImmediate(r)};if("object"==typeof e&&e.nextTick)return function(t){n(t)&&e.nextTick(r)};var o=i.MutationObserver||i.WebKitMutationObserver;if(o){var s=1,a=document.createTextNode("");return new o(r).observe(a,{characterData:!0}),function(e){n(e)&&(a.data=s*=-1)}}if(i.postMessage){var l=!0;if(i.attachEvent){var u=function(){l=!1};i.attachEvent("onmessage",u),i.postMessage("__checkAsync","*"),i.detachEvent("onmessage",u)}if(l){var c="__promise"+ +new Date,p=function(e){e.data===c&&(e.stopPropagation&&e.stopPropagation(),r())};return i.addEventListener?i.addEventListener("message",p,!0):i.attachEvent("onmessage",p),function(e){n(e)&&i.postMessage(c,"*")}}}var h=i.document;if("onreadystatechange"in h.createElement("script")){var d=function(){var e=h.createElement("script");e.onreadystatechange=function(){e.parentNode.removeChild(e),e=e.onreadystatechange=null,r()},(h.documentElement||h.body).appendChild(e)};return function(e){n(e)&&d()}}return function(e){n(e)&&setTimeout(r,0)}}(),o=function(e){r(function(){throw e})},s=function(e){return"function"==typeof e},a=function(e){return null!==e&&"object"==typeof e},l=Object.prototype.toString,u=Array.isArray||function(e){return"[object Array]"===l.call(e)},c=function(e){for(var t=[],i=0,n=e.length;n>i;)t.push(i++);return t},p=Object.keys||function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t},h=function(e){var t=function(t){this.name=e,this.message=t};return t.prototype=new Error,t},d=function(e,t){return function(i){e.call(this,i,t)}},f=function(){this._promise=new y};f.prototype={promise:function(){return this._promise},resolve:function(e){this._promise.isResolved()||this._promise._resolve(e)},reject:function(e){this._promise.isResolved()||(_.isPromise(e)?(e=e.then(function(e){var t=_.defer();return t.reject(e),t.promise()}),this._promise._resolve(e)):this._promise._reject(e))},notify:function(e){this._promise.isResolved()||this._promise._notify(e)}};var m={PENDING:0,RESOLVED:1,FULFILLED:2,REJECTED:3},y=function(e){if(this._value=n,this._status=m.PENDING,this._fulfilledCallbacks=[],this._rejectedCallbacks=[],this._progressCallbacks=[],e){var t=this,i=e.length;e(function(e){t.isResolved()||t._resolve(e)},i>1?function(e){t.isResolved()||t._reject(e)}:n,i>2?function(e){t.isResolved()||t._notify(e)}:n)}};y.prototype={valueOf:function(){return this._value},isResolved:function(){return this._status!==m.PENDING},isFulfilled:function(){return this._status===m.FULFILLED},isRejected:function(){return this._status===m.REJECTED},then:function(e,t,i,n){var r=new f;return this._addCallbacks(r,e,t,i,n),r.promise()},"catch":function(e,t){return this.then(n,e,t)},fail:function(e,t){return this.then(n,e,t)},always:function(e,t){var i=this,n=function(){return e.call(this,i)};return this.then(n,n,t)},progress:function(e,t){return this.then(n,n,e,t)},spread:function(e,t,i){return this.then(function(t){return e.apply(this,t)},t,i)},done:function(e,t,i,n){this.then(e,t,i,n).fail(o)},delay:function(e){var t,i=this.then(function(i){var n=new f;return t=setTimeout(function(){n.resolve(i)},e),n.promise()});return i.always(function(){clearTimeout(t)}),i},timeout:function(e){var t=new f,i=setTimeout(function(){t.reject(new _.TimedOutError("timed out"))},e);return this.then(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise().always(function(){clearTimeout(i)}),t.promise()},_vow:!0,_resolve:function(e){if(!(this._status>m.RESOLVED)){if(e===this)return void this._reject(TypeError("Can't resolve promise with itself"));if(this._status=m.RESOLVED,e&&e._vow)return void(e.isFulfilled()?this._fulfill(e.valueOf()):e.isRejected()?this._reject(e.valueOf()):e.then(this._fulfill,this._reject,this._notify,this));if(a(e)||s(e)){var t;try{t=e.then}catch(i){return void this._reject(i)}if(s(t)){var n=this,r=!1;try{t.call(e,function(e){r||(r=!0,n._resolve(e))},function(e){r||(r=!0,n._reject(e))},function(e){n._notify(e)})}catch(i){r||this._reject(i)}return}}this._fulfill(e)}},_fulfill:function(e){this._status>m.RESOLVED||(this._status=m.FULFILLED,this._value=e,this._callCallbacks(this._fulfilledCallbacks,e),this._fulfilledCallbacks=this._rejectedCallbacks=this._progressCallbacks=n)},_reject:function(e){this._status>m.RESOLVED||(this._status=m.REJECTED,this._value=e,this._callCallbacks(this._rejectedCallbacks,e),this._fulfilledCallbacks=this._rejectedCallbacks=this._progressCallbacks=n)},_notify:function(e){this._callCallbacks(this._progressCallbacks,e)},_addCallbacks:function(e,t,i,r,o){i&&!s(i)?(o=i,i=n):r&&!s(r)&&(o=r,r=n);var a;this.isRejected()||(a={defer:e,fn:s(t)?t:n,ctx:o},this.isFulfilled()?this._callCallbacks([a],this._value):this._fulfilledCallbacks.push(a)),this.isFulfilled()||(a={defer:e,fn:i,ctx:o},this.isRejected()?this._callCallbacks([a],this._value):this._rejectedCallbacks.push(a)),this._status<=m.RESOLVED&&this._progressCallbacks.push({defer:e,fn:r,ctx:o})},_callCallbacks:function(e,t){var i=e.length;if(i){var n=this.isResolved(),o=this.isFulfilled();r(function(){for(var r,s,a,l=0;i>l;)if(r=e[l++],s=r.defer,a=r.fn){var u,c=r.ctx;try{u=c?a.call(c,t):a(t)}catch(p){s.reject(p);continue}n?s.resolve(u):s.notify(u)}else n?o?s.resolve(t):s.reject(t):s.notify(t)})}}};var v={cast:function(e){return _.cast(e)},all:function(e){return _.all(e)},race:function(e){return _.anyResolved(e)},resolve:function(e){return _.resolve(e)},reject:function(e){return _.reject(e)}};for(var E in v)v.hasOwnProperty(E)&&(y[E]=v[E]);var _={Deferred:f,Promise:y,defer:function(){return new f},when:function(e,t,i,n,r){return _.cast(e).then(t,i,n,r)},fail:function(e,t,i){return _.when(e,n,t,i)},always:function(e,t,i){return _.when(e).always(t,i)},progress:function(e,t,i){return _.when(e).progress(t,i)},spread:function(e,t,i,n){return _.when(e).spread(t,i,n)},done:function(e,t,i,n,r){_.when(e).done(t,i,n,r)},isPromise:function(e){return a(e)&&s(e.then)},cast:function(e){return e&&e._vow?e:_.resolve(e)},valueOf:function(e){return e&&s(e.valueOf)?e.valueOf():e},isFulfilled:function(e){return e&&s(e.isFulfilled)?e.isFulfilled():!0},isRejected:function(e){return e&&s(e.isRejected)?e.isRejected():!1},isResolved:function(e){return e&&s(e.isResolved)?e.isResolved():!0},resolve:function(e){var t=_.defer();return t.resolve(e),t.promise()},fulfill:function(e){var t=_.defer(),i=t.promise();return t.resolve(e),i.isFulfilled()?i:i.then(null,function(e){return e})},reject:function(e){var t=_.defer();return t.reject(e),t.promise()},invoke:function(e,t){var n,r=Math.max(arguments.length-1,0);if(r){n=Array(r);for(var o=0;r>o;)n[o++]=arguments[o]}try{return _.resolve(n?e.apply(i,n):e.call(i))}catch(s){return _.reject(s)}},all:function(e){var t=new f,i=u(e),n=i?c(e):p(e),r=n.length,o=i?[]:{};if(!r)return t.resolve(o),t.promise();var s=r;return _._forEach(e,function(e,i){o[n[i]]=e,--s||t.resolve(o)},t.reject,t.notify,t,n),t.promise()},allResolved:function(e){var t=new f,i=u(e),n=i?c(e):p(e),r=n.length,o=i?[]:{};if(!r)return t.resolve(o),t.promise();var s=function(){--r||t.resolve(e)};return _._forEach(e,s,s,t.notify,t,n),t.promise()},allPatiently:function(e){return _.allResolved(e).then(function(){var t,i,n,r,o=u(e),s=o?c(e):p(e),a=s.length,l=0;if(!a)return o?[]:{};for(;a>l;)n=s[l++],r=e[n],_.isRejected(r)?(t||(t=o?[]:{}),o?t.push(r.valueOf()):t[n]=r.valueOf()):t||((i||(i=o?[]:{}))[n]=_.valueOf(r));if(t)throw t;return i})},any:function(e){var t=new f,i=e.length;if(!i)return t.reject(Error()),t.promise();var n,r=0;return _._forEach(e,t.resolve,function(e){r||(n=e),++r===i&&t.reject(n)},t.notify,t),t.promise()},anyResolved:function(e){var t=new f,i=e.length;return i?(_._forEach(e,t.resolve,t.reject,t.notify,t),t.promise()):(t.reject(Error()),t.promise())},delay:function(e,t){return _.resolve(e).delay(t)},timeout:function(e,t){return _.resolve(e).timeout(t)},_forEach:function(e,t,i,n,r,o){for(var s=o?o.length:e.length,a=0;s>a;)_.when(e[o?o[a]:a],d(t,a),i,n,r),++a},TimedOutError:h("TimedOut")},g=!0;"object"==typeof t&&"object"==typeof t.exports&&(t.exports=_,g=!1),"object"==typeof modules&&s(modules.define)&&(modules.define("vow",function(e){e(_)}),g=!1),"function"==typeof define&&(define(function(e,t,i){i.exports=_}),g=!1),g&&(i.vow=_)}(this)}).call(this,e("_process"))},{_process:1}],3:[function(e,t,i){var n=e("./logger/logger"),r=new n("AudioPlayer"),o=e("./lib/async/events"),s=e("./lib/async/deferred"),a=e("./lib/browser/detect"),l=e("./config"),u=e("./lib/data/merge"),c=e("./lib/async/reject"),p=e("./error/audio-error"),h=e("./audio-static"),d=1,f={html5:e("./html5/audio-html5"),flash:e("./flash/audio-flash")},m="@"+a.platform.version+" "+a.platform.os+":"+a.browser.name+"/"+a.browser.version;f.flash.priority=0,f.html5.priority=l.html5.blacklist.some(function(e){return m.match(e)})?-1:1,r.debug(null,"audioTypes",f);var y=function(e,t){this.name=d++,r.debug(this,"constructor"),o.call(this),this.preferredType=e,this.overlay=t,this.state=y.STATE_INIT,this._played=0,this._lastSkip=0,this._playId=null,this._whenReady=new s,this.whenReady=this._whenReady.promise().then(function(){r.info(this,"implementation found",this.implementation.type),this.implementation.on("*",function(e,t,i){if(this._populateEvents(e,t,i),!t)switch(e){case y.EVENT_PLAY:this._setState(y.STATE_PLAYING);break;case y.EVENT_SWAP:case y.EVENT_STOP:case y.EVENT_ENDED:case y.EVENT_ERROR:this._setState(y.STATE_IDLE);break;case y.EVENT_PAUSE:this._setState(y.STATE_PAUSED);break;case y.EVENT_CRASHED:this._setState(y.STATE_CRASHED)}}.bind(this)),this._setState(y.STATE_IDLE)}.bind(this),function(e){throw r.error(this,p.NO_IMPLEMENTATION,e),this._setState(y.STATE_CRASHED),e}.bind(this)),this._init(0)};o.mixin(y),u(y,h,!0),y.AudioError=p,y.info={html5:f.html5.available,flash:f.flash.available},y.audioContext=f.html5.audioContext,y.prototype._setState=function(e){r.debug(this,"_setState",e);var t=this.state!==e;this.state=e,t&&(r.info(this,"newState",e),this.trigger(y.EVENT_STATE,e))},y.prototype._init=function(e){function t(){var r=i.shift();return r?void n._initType(r).then(n._whenReady.resolve,t):void n._init(e+1)}if(e=e||0,r.info(this,"_init",e),this._whenReady.pending){e>l.audio.retry&&(r.error(this,p.NO_IMPLEMENTATION),this._whenReady.reject(new p(p.NO_IMPLEMENTATION)));var i=[f.html5,f.flash].sort(function(e,t){return e.available!==t.available?e.available?-1:1:e.AudioImplementation.type===this.preferredType?-1:t.AudioImplementation.type===this.preferredType?1:t.priority-e.priority}.bind(this)),n=this;t()}},y.prototype._initType=function(e){r.info(this,"_initType",e);var t=new s;try{this.implementation=new e.AudioImplementation(this.overlay),this.implementation.whenReady?this.implementation.whenReady.then(t.resolve,t.reject):t.resolve()}catch(i){t.reject(i)}return t.promise()},y.prototype._waitEvents=function(e,t,i){var n=new s,r=this;this[e]=n;var o=function(){t.forEach(function(e){r.off(e,n.resolve)}),i.forEach(function(e){r.off(e,n.reject)}),delete r[e]};return t.forEach(function(e){r.on(e,n.resolve)}),i.forEach(function(e){r.on(e,n.reject)}),n.promise().then(o,o),n.promise()},y.prototype._populateEvents=function(e,t,i){r.debug(this,"_populateEvents",e,t,i);var n=(t?y.PRELOADER_EVENT:"")+e;switch(e){case y.EVENT_CRASHED:case y.EVENT_SWAP:this.trigger(e,i);break;case y.EVENT_ERROR:this.trigger(n,i);break;case y.EVENT_VOLUME:this.trigger(e,this.getVolume());break;case y.EVENT_PROGRESS:this.trigger(n,{duration:this.getDuration(t),loaded:this.getLoaded(t),position:t?0:this.getPosition(),played:t?0:this.getPlayed()});break;default:this.trigger(n)}},y.prototype._generatePlayId=function(){this._playId=Math.random().toString().slice(2)},y.prototype.initPromise=function(){return this.whenReady},y.prototype.getState=function(){return this.state},y.prototype.getType=function(){return this.implementation&&this.implementation.type},y.prototype.getSrc=function(e){return this.implementation&&this.implementation.getSrc(e)},y.prototype.play=function(e,t){r.info(this,"play",e,t),this._played=0,this._lastSkip=0,this._generatePlayId(),this._whenPlay&&this._whenPlay.reject("play"),this._whenPause&&this._whenPause.reject("play"),this._whenStop&&this._whenStop.reject("play");var i=this._waitEvents("_whenPlay",[y.EVENT_PLAY],[y.EVENT_STOP,y.EVENT_ERROR,y.EVENT_CRASHED]);return i.abort=function(){this._whenPlay&&(this._whenPlay.reject.apply(this._whenPlay,arguments),this.stop())}.bind(this),this.implementation.play(e,t),i},y.prototype.stop=function(e){if(r.info(this,"stop",e),0!==e)return this.implementation.stop(e);this._played=0,this._lastSkip=0,this._whenPlay&&this._whenPlay.reject("stop"),this._whenPause&&this._whenPause.reject("stop");var t;return t=this._whenStop?this._whenStop.promise():this._waitEvents("_whenStop",[y.EVENT_STOP],[y.EVENT_PLAY,y.EVENT_ERROR,y.EVENT_CRASHED]),this.implementation.stop(),t},y.prototype.pause=function(){if(r.info(this,"pause"),this.state!==y.STATE_PLAYING)return!1;var e;return this._whenPlay&&this._whenPlay.reject("pause"),e=this._whenPause?this._whenPause.promise():this._waitEvents("_whenPause",[y.EVENT_PAUSE],[y.EVENT_STOP,y.EVENT_PLAY,y.EVENT_ERROR,y.EVENT_CRASHED]),this.implementation.pause(),e},y.prototype.resume=function(){if(r.info(this,"resume"),this.state!==y.STATE_PAUSED&&!this._whenPause)return!1;var e;return this._whenPause&&this._whenPause.reject("resume"),e=this._whenPlay?this._whenPlay.promise():this._waitEvents("_whenPlay",[y.EVENT_PLAY],[y.EVENT_STOP,y.EVENT_ERROR,y.EVENT_CRASHED]),this.implementation.resume(),e},y.prototype.playPreloaded=function(e){if(r.info(this,"playPreloaded",e),!this.isPreloaded(e))return r.warn(this,p.NOT_PRELOADED),c(new p(p.NOT_PRELOADED));this._played=0,this._lastSkip=0,this._generatePlayId(),this._whenPlay&&this._whenPlay.reject("playPreloaded"),this._whenPause&&this._whenPause.reject("playPreloaded"),this._whenStop&&this._whenStop.reject("playPreloaded");var t=this._waitEvents("_whenPlay",[y.EVENT_PLAY],[y.EVENT_STOP,y.EVENT_ERROR,y.EVENT_CRASHED]);t.abort=function(){this._whenPlay&&(this._whenPlay.reject.apply(this._whenPlay,arguments),this.stop())}.bind(this);var i=this.implementation.playPreloaded();return i||(r.warn(this,p.NOT_PRELOADED),this._whenPlay.reject(new p(p.NOT_PRELOADED))),t},y.prototype.preload=function(e,t){r.info(this,"preload",e,t),this._whenPreload&&this._whenPreload.reject("preload");var i=this._waitEvents("_whenPreload",[y.PRELOADER_EVENT+y.EVENT_LOADING,y.EVENT_SWAP],[y.PRELOADER_EVENT+y.EVENT_CRASHED,y.PRELOADER_EVENT+y.EVENT_ERROR,y.PRELOADER_EVENT+y.EVENT_STOP]);return i.abort=function(){this._whenPreload&&(this._whenPreload.reject.apply(this._whenPreload,arguments),this.stop(1))}.bind(this),this.implementation.preload(e,t),i},y.prototype.isPreloaded=function(e){return this.implementation.isPreloaded(e)},y.prototype.isPreloading=function(e){return this.implementation.isPreloading(e)},y.prototype.getPosition=function(){return this.implementation.getPosition()},y.prototype.setPosition=function(e){return r.info(this,"setPosition",e),e="flash"==this.implementation.type?Math.max(0,Math.min(this.getLoaded(),e)):Math.max(0,Math.min(this.getDuration(),e)),this._played+=this.getPosition()-this._lastSkip,this._lastSkip=e,this.implementation.setPosition(e),e},y.prototype.getDuration=function(e){return this.implementation.getDuration(e?1:0)},y.prototype.getLoaded=function(e){return this.implementation.getLoaded(e?1:0)},y.prototype.getPlayed=function(){var e=this.getPosition();return this._played+=e-this._lastSkip,this._lastSkip=e,this._played},y.prototype.getVolume=function(){return this.implementation?this.implementation.getVolume():0},y.prototype.setVolume=function(e){return r.info(this,"setVolume",e),this.implementation?this.implementation.setVolume(e):0},y.prototype.isDeviceVolume=function(){return this.implementation?this.implementation.isDeviceVolume():!0},y.prototype.toggleWebAudioAPI=function(e){return r.info(this,"toggleWebAudioAPI",e),"html5"!==this.implementation.type?(r.warn(this,"toggleWebAudioAPIFailed",this.implementation.type),!1):this.implementation.toggleWebAudioAPI(e)},y.prototype.setAudioPreprocessor=function(e){return r.info(this,"setAudioPreprocessor"),"html5"!==this.implementation.type?(r.warn(this,"setAudioPreprocessorFailed",this.implementation.type),!1):this.implementation.setAudioPreprocessor(e)},y.prototype.getPlayId=function(){return this._playId},y.prototype._logger=function(){return{index:this.implementation&&this.implementation.name,src:this.implementation&&this.implementation._logger(),type:this.implementation&&this.implementation.type}},t.exports=y},{"./audio-static":4,"./config":5,"./error/audio-error":6,"./flash/audio-flash":8,"./html5/audio-html5":18,"./lib/async/deferred":20,"./lib/async/events":21,"./lib/async/reject":23,"./lib/browser/detect":24,"./lib/data/merge":28,"./logger/logger":32}],4:[function(e,t,i){var n={};n.EVENT_PLAY="play",n.EVENT_STOP="stop",n.EVENT_PAUSE="pause",n.EVENT_PROGRESS="progress",n.EVENT_LOADING="loading",n.EVENT_LOADED="loaded",n.EVENT_VOLUME="volumechange",n.EVENT_ENDED="ended",n.EVENT_CRASHED="crashed",n.EVENT_ERROR="error",n.EVENT_STATE="state",n.EVENT_SWAP="swap",n.PRELOADER_EVENT="preloader:",n.STATE_INIT="init",n.STATE_CRASHED="crashed",n.STATE_IDLE="idle",n.STATE_PLAYING="playing",n.STATE_PAUSED="paused",t.exports=n},{}],5:[function(e,t,i){var n={audio:{retry:3},flash:{path:"dist",name:"player-2_0.swf",version:"9.0.28",playerID:"YaMusicFlashPlayer",callback:"__flash__YaMusicFlashCallback",initTimeout:3e3,loadTimeout:5e3,clickTimeout:1e3},html5:{blacklist:["linux:mozilla","unix:mozilla","macos:mozilla",":opera","@NT 5","@NT 4"]}};t.exports=n},{}],6:[function(e,t,i){var n=e("../lib/class/clear-instance"),r=function(e){Error.call(this,e)};r.prototype=n(Error),r.NO_IMPLEMENTATION="cannot find suitable implementation",r.NOT_PRELOADED="track is not preloaded",r.FLASH_BLOCKER="flash is rejected by flash blocker plugin",r.FLASH_UNKNOWN_CRASH="flash is crashed without reason",r.FLASH_INIT_TIMEOUT="flash init timed out",r.FLASH_INTERNAL_ERROR="flash internal error",r.FLASH_EMMITER_NOT_FOUND="flash event emmiter not found",r.FLASH_NOT_RESPONDING="flash player doesn't response",t.exports=r},{"../lib/class/clear-instance":26}],7:[function(e,t,i){"undefined"==typeof window.ya&&(window.ya={});var n=window.ya;"undefined"==typeof n.Audio&&(n.Audio={});var r=e("./config"),o=e("./audio-player"),s=e("./lib/class/proxy");n.Audio=s.createClass(o),n.Audio.config=r,t.exports=n.Audio},{"./audio-player":3,"./config":5,"./lib/class/proxy":27}],8:[function(e,t,i){var n,r=e("../config"),o=e("../lib/browser/swfobject"),s=e("../lib/browser/detect"),a=e("../logger/logger"),l=new a("AudioFlash"),u=e("./flash-manager"),c=e("./flash-interface"),p=e("../lib/async/events"),h=1,d=o.getFlashPlayerVersion();s.flashVersion=d.major+"."+d.minor+"."+d.release,i.available=o.hasFlashPlayerVersion(r.flash.version),l.info(this,"detection",i.available);var f=function(e,t){this.name=h++,l.debug(this,"constructor"),(!n||t)&&(n=new u(e)),p.call(this),this.whenReady=n.createPlayer(this),this.whenReady.then(function(e){l.info(this,"ready",e)}.bind(this),function(e){l.error(this,"failed",e)}.bind(this))};p.mixin(f),f.type=f.prototype.type="flash",Object.keys(c.prototype).filter(function(e){return c.prototype.hasOwnProperty(e)&&"_"!==e[0]}).map(function(e){f.prototype[e]=function(){if(/^get/.test(e)||l.debug(this,e),!this.hasOwnProperty("id"))return l.warn(this,"player is not ready"),null;var t=[].slice.call(arguments);return t.unshift(this.id),n.flash[e].apply(n.flash,t)}}),f.prototype.isDeviceVolume=function(){return!0},f.prototype._logger=function(){try{return{main:this.getSrc(0),preloader:this.getSrc(1)}}catch(e){return""}},i.AudioImplementation=f},{"../config":5,"../lib/async/events":21,"../lib/browser/detect":24,"../lib/browser/swfobject":25,"../logger/logger":32,"./flash-interface":9,"./flash-manager":10}],9:[function(e,t,i){var n=e("../logger/logger"),r=new n("FlashInterface"),o=function(e){this.flash=Ya.Music._flash=e};o.prototype._callFlash=function(e){try{return this.flash.call.apply(this.flash,arguments)}catch(t){return r.error(this,"_callFlashError",t),null}},o.prototype._heartBeat=function(){this._callFlash("heartBeat",-1)},o.prototype._addPlayer=function(){return this._callFlash("addPlayer",-1)},o.prototype.setVolume=function(e,t){return this._callFlash("setVolume",-1,t)},o.prototype.getVolume=function(){return this._callFlash("getVolume",-1)},o.prototype.play=function(e,t,i){return this._callFlash("play",e,t,i)},o.prototype.stop=function(e,t){return this._callFlash("stop",e,t||0)},o.prototype.pause=function(e){return this._callFlash("pause",e)},o.prototype.resume=function(e){return this._callFlash("resume",e)},o.prototype.preload=function(e,t,i,n){return this._callFlash("preload",e,t,i,n||1)},o.prototype.isPreloaded=function(e,t,i){return this._callFlash("isPreloaded",e,t,i||1)},o.prototype.isPreloading=function(e,t,i){return this._callFlash("isPreloading",e,t,i||1)},o.prototype.playPreloaded=function(e,t,i){return this._callFlash("playPreloaded",e,i||1)},o.prototype.getPosition=function(e){return this._callFlash("getPosition",e)},o.prototype.setPosition=function(e,t){return this._callFlash("setPosition",e,t)},o.prototype.getDuration=function(e,t){return this._callFlash("getDuration",e,t||0)},o.prototype.getLoaded=function(e,t){return this._callFlash("getLoaded",e,t||0)},o.prototype.getSrc=function(e,t){return this._callFlash("getSrc",e,t||0)},t.exports=o},{"../logger/logger":32}],10:[function(e,t,i){var n,r=e("../logger/logger"),o=new r("FlashBridge"),s=e("../config"),a=e("../audio-static"),l=e("./loader"),u=e("./flash-interface"),c=e("../lib/async/deferred"),p=e("../error/audio-error"),h=e("../lib/net/error/loader-error"),d=function(e){if(n)return n;n=this,o.debug(this,"constructor",e),this.state="init",this.overlay=e,this.emmiters=[];var t=this.deferred=new c;if(this.whenReady=this.deferred.promise(),window[s.flash.callback]=this.onEvent.bind(this),this.__loadTimeout=setTimeout(this.onLoadTimeout,s.flash.loadTimeout),l(s.flash.path+"/"+s.flash.name,s.flash.version,s.flash.playerID,this.onLoad.bind(this),{},e),e){var i;e.addEventListener("mousedown",function(){i=i||setTimeout(function(){t.reject(new p(p.FLASH_NOT_RESPONDING))},s.flash.clickTimeout)},!0)}this.whenReady.then(function(e){i=i&&clearTimeout(i),o.info(this,"ready",e)}.bind(this),function(e){n=null,o.error(this,"failed",e)}.bind(this))};d.EVENT_INIT="init",d.EVENT_FAIL="failed",d.prototype.onLoad=function(e){o.debug(this,"onLoad",e),clearTimeout(this.__loadTimeout),delete this.__loadTimeout,e.success?(this.flash=new u(e.ref),"ready"===this.state?this.deferred.resolve(e.ref):this.overlay||(this.__initTimeout=setTimeout(this.onInitTimeout.bind(this),s.flash.initTimeout))):(this.state="failed",this.deferred.reject(new p(e.__fbn?p.FLASH_BLOCKER:p.FLASH_UNKNOWN_CRASH)))},d.prototype.onLoadTimeout=function(){this.state="failed",this.deferred.reject(new h(h.TIMEOUT))},d.prototype.onInitTimeout=function(){this.state="failed",this.deferred.reject(new p(p.FLASH_INIT_TIMEOUT))},d.prototype.onInit=function(){o.debug(this,"onInit"),this.state="ready",this.__initTimeout&&(clearTimeout(this.__initTimeout),delete this.__initTimeout),this.flash&&this.deferred.resolve(this.flash)},d.prototype.onEvent=function(e,t,i,n){return"failed"===this.state?void o.warn(this,"onEventFailed",e,t,i,n):(o.debug(this,"onEvent",e,t,i),e===d.EVENT_INIT?this.onInit():e===d.EVENT_FAIL?(o.warn(this,"failed",p.FLASH_INTERNAL_ERROR),void this.deferred.reject(new p(p.FLASH_INTERNAL_ERROR))):void(-1==t?this.emmiters.forEach(function(t){t.trigger(e,i,n)}):this.emmiters[t]?this.emmiters[t].trigger(e,i,n):o.error(this,p.FLASH_EMMITER_NOT_FOUND,t)))},d.prototype.onHeartBeat=function(){try{this.flash._heartBeat()}catch(e){o.error(this,"crashed",e),this.onEvent(a.EVENT_CRASHED,-1,e)}},d.prototype.createPlayer=function(e){o.debug(this,"createPlayer");var t=this.whenReady.then(function(){return e.id=this.flash._addPlayer(),this.emmiters[e.id]=e,e.id}.bind(this));return t.then(function(e){o.debug(this,"createPlayerSuccess",e)}.bind(this),function(e){o.error(this,"createPlayerError",e)}.bind(this)),t},t.exports=d},{"../audio-static":4,"../config":5,"../error/audio-error":6,"../lib/async/deferred":20,"../lib/net/error/loader-error":29,"../logger/logger":32,"./flash-interface":9,"./loader":13}],11:[function(e,t,i){function n(e){e.parentNode.removeChild(e)}var r=e("../lib/browser/swfobject"),o={__SWF_WRAPPER_CLASS:"fbn-swf-wrapper",__TIMEOUT:500,__TESTS:[function(e,t){return t.childNodes.length>1},function(e){return e.type&&"application/x-shockwave-flash"!=e.type},function(e){return!e.parentNode},function(e){return e.parentNode.className.indexOf("CTFnodisplay")>-1}],embedSWF:function(e,t,i,s,a,l,u,c,p,h,d){r&&r.addDomLoadEvent(function(){var f=document.getElementById(t);if(f){var m=document.createElement("div");m.className=o.__SWF_WRAPPER_CLASS,f.parentNode.replaceChild(m,f),m.appendChild(f),r.embedSWF(e,t,i,s,a,l,u,c,p,function(e){function i(e){if(d!==!1){r.removeSWF(t),n(m);var i=document.getElementById("CTFstack");i&&n(i);var o=document.body.lastChild;o&&"ujs_flashblock_placeholder"==o.className&&n(o)}e.success=!1,e.__fbn=!0,h(e)}if(e&&e.success!==!1){var s=e.ref,a=!1;try{a=s&&s.getSVGDocument&&s.getSVGDocument()}catch(l){}a?i(e):window.setTimeout(function(){for(var t=o.__TESTS,n=0,r=t.length;r>n;n++)if(t[n](s,m))return void i(e);h(e)},o.__TIMEOUT)}else h(e)})}})}};t.exports=o},{"../lib/browser/swfobject":25}],12:[function(e,t,i){var n=e("../lib/browser/swfobject"),r={__SWF_WRAPPER_CLASS:"femb-swf-wrapper",__TIMEOUT:500,embedSWF:function(e,t,i,o,s,a,l,u,c,p){n.addDomLoadEvent(function(){var h=document.getElementById(t);if(h){var d=document.createElement("div");d.className=r.__SWF_WRAPPER_CLASS,h.parentNode.replaceChild(d,h),d.appendChild(h),n.embedSWF(e,t,i,o,s,a,l,u,c,function(e){function t(e){e.success=!1,p(e)}if(e&&e.success!==!1){var i=e.ref,n=!1;try{n=i&&i.getSVGDocument&&i.getSVGDocument()}catch(o){}n?t(e):window.setTimeout(function(){p(e)},r.__TIMEOUT)}else p(e)})}})}};t.exports=r},{"../lib/browser/swfobject":25}],13:[function(e,t,i){var n=(e("../lib/browser/swfobject"),e("./flashblocknotifier")),r=e("./flashembedder"),o=e("../lib/browser/detect"),s="windows"===o.platform.os&&"safari"===o.browser.name,a="ya-flash-player-wrapper";t.exports=function(e,t,i,o,l,u,c,p){var h=document.createElement("div");h.id="wrapper_"+i,h.innerHTML='<div id="'+i+'"></div>',c=c||"1000",p=p||"1000";var d,f,m,y;return u&&!s?(d=r,f=c,m=p,y={allowscriptaccess:"always",wmode:"transparent"},h.className=a,h.style.cssText="position: relative; width: 100%; height: 100%; overflow: hidden;",u.appendChild(h)):(d=n,f=m="1",y={allowscriptaccess:"always"},h.style.cssText="position: absolute; left: -1px; top: -1px; width: 0px; height: 0px; overflow: hidden;",document.body.appendChild(h)),d.embedSWF(e,i,f,m,t,"",l,y,{},o),h}},{"../lib/browser/detect":24,"../lib/browser/swfobject":25,"./flashblocknotifier":11,"./flashembedder":12}],14:[function(e,t,i){var n=e("../../lib/async/events"),r=(e("../../lib/class/proxy"),function(e,t){n.call(this),this.preamp=new o(e,"highshelf",0),this.preamp.on("*",this._onBandEvent.bind(this,this.preamp));var i;this.bands=t.map(function(n,r){var s=new o(e,0==r?"lowshelf":r+1<t.length?"peaking":"highshelf",n);return s.on("*",this._onBandEvent.bind(this,s)),i?i.filter.connect(s.filter):this.preamp.filter.connect(s.filter),i=s,s}.bind(this)),this.input=this.preamp.filter,this.output=this.bands[this.bands.length-1].filter});n.mixin(r),r.EVENT_CHANGE="change",r.WINAMP_BANDS=[60,170,310,600,1e3,3e3,6e3,12e3,14e3,16e3],r.WINAMP_PRESETS=e("./winamp.presets"),r.prototype._onBandEvent=function(e,t,i){this.trigger(t,e.getFreq(),i)},r.prototype.loadPreset=function(e){e.bands.forEach(function(e,t){this.bands[t].setValue(e)}.bind(this)),this.preamp.setValue(e.preamp)},r.prototype.savePreset=function(){return{preamp:this.preamp.getValue(),bands:this.bands.map(function(e){return e.getValue()})}},r.prototype.guessPreamp=function(){for(var e=0,t=0,i=this.bands.length;i>t;t++)e+=this.bands[t].getValue();return-e/2};var o=function(e,t,i){n.call(this),this.type=t,this.filter=e.createBiquadFilter(),this.filter.type=t,this.filter.frequency.value=i,this.filter.Q.value=1,this.filter.gain.value=0};n.mixin(o),o.prototype.getFreq=function(){return this.filter.frequency.value},o.prototype.getValue=function(){return this.filter.gain.value},o.prototype.setValue=function(e){this.filter.gain.value=e,this.trigger(r.EVENT_CHANGE,e)},t.exports=r},{"../../lib/async/events":21,"../../lib/class/proxy":27,"./winamp.presets":16}],15:[function(e,t,i){e("../export"),ya.Audio.fx.Equalizer=e("./equalizer")},{"../export":17,"./equalizer":14}],16:[function(e,t,i){t.exports=[{id:"custom",preamp:0,bands:[0,0,0,0,0,0,0,0,0,0]},{id:"default",preamp:0,bands:[0,0,0,0,0,0,0,0,0,0]},{id:"Classical",preamp:-.5,bands:[-.5,-.5,-.5,-.5,-.5,-.5,-3.5,-3.5,-3.5,-4.5]},{id:"Club",preamp:-3.359999895095825,bands:[-.5,-.5,4,2.5,2.5,2.5,1.5,-.5,-.5,-.5]},{id:"Dance",preamp:-2.1599998474121094,bands:[4.5,3.5,1,-.5,-.5,-2.5,-3.5,-3.5,-.5,-.5]},{id:"Full Bass",preamp:-3.5999999046325684,bands:[4,4.5,4.5,2.5,.5,-2,-4,-5,-5.5,-5.5]},{id:"Full Bass & Treble",preamp:-5.039999961853027,bands:[3.5,2.5,-.5,-3.5,-2,.5,4,5.5,6,6]},{id:"Full Treble",preamp:-6,bands:[-4.5,-4.5,-4.5,-2,1,5.5,8,8,8,8]},{id:"Laptop Speakers / Headphone",preamp:-4.079999923706055,bands:[2,5.5,2.5,-1.5,-1,.5,2,4.5,6,7]},{id:"Large Hall",preamp:-3.5999999046325684,bands:[5,5,2.5,2.5,-.5,-2,-2,-2,-.5,-.5]},{id:"Live",preamp:-2.6399998664855957,bands:[-2,-.5,2,2.5,2.5,2.5,2,1,1,1]},{id:"Party",preamp:-2.6399998664855957,bands:[3.5,3.5,-.5,-.5,-.5,-.5,-.5,-.5,3.5,3.5]},{id:"Pop",preamp:-3.119999885559082,bands:[-.5,2,3.5,4,2.5,-.5,-1,-1,-.5,-.5]},{id:"Reggae",preamp:-4.079999923706055,bands:[-.5,-.5,-.5,-2.5,-.5,3,3,-.5,-.5,-.5]},{id:"Rock",preamp:-5.039999961853027,bands:[4,2,-2.5,-4,-1.5,2,4,5.5,5.5,5.5]},{id:"Ska",preamp:-5.519999980926514,bands:[-1,-2,-2,-.5,2,2.5,4,4.5,5.5,4.5]},{id:"Soft",preamp:-4.799999713897705,bands:[2,.5,-.5,-1,-.5,2,4,4.5,5.5,6]},{id:"Soft Rock",preamp:-2.6399998664855957,bands:[2,2,1,-.5,-2,-2.5,-1.5,-.5,1,4]},{id:"Techno",preamp:-3.8399999141693115,bands:[4,2.5,-.5,-2.5,-2,-.5,4,4.5,4.5,4]}]},{}],17:[function(e,t,i){e("../export"),ya.Audio.fx={}},{"../export":7}],18:[function(e,t,i){var n=e("../logger/logger"),r=new n("AudioHTML5"),o=e("../lib/browser/detect"),s=e("../lib/async/events"),a=e("../audio-static"),l=1;
i.available=function(){var e=!0;try{var t=document.createElement("audio"),i=t.canPlayType("audio/mpeg");i&&"no"!==i||(r.warn(this,"HTML5 detection failed with reason",i),e=!1)}catch(n){r.warn(this,"HTML5 detection failed with error",n),e=!1}return r.info(this,"detection",e),e}();try{var u=new AudioContext;r.info(this,"WenAudioAPI context created")}catch(c){u=null,r.info(this,"WenAudioAPI not detected")}i.audioContext=u;var p=function(){this.name=l++,r.debug(this,"constructor"),s.call(this),this.on("*",function(e){r.debug(this,"onEvent",e)}.bind(this)),this.webAudioApi=!1,this.activeLoader=0,this.loaders=[],this.listeners=[],this._addLoader(),this._addLoader(),this._setActive(0)};s.mixin(p),p.type=p.prototype.type="html5",p.EVENT_NATIVE_PLAY="play",p.EVENT_NATIVE_PAUSE="pause",p.EVENT_NATIVE_TIMEUPDATE="timeupdate",p.EVENT_NATIVE_ENDED="ended",p.EVENT_NATIVE_DURATION="durationchange",p.EVENT_NATIVE_LOADING="progress",p.EVENT_NATIVE_META="loadedmetadata",p.EVENT_NATIVE_CANPLAY="canplay",p.EVENT_NATIVE_ERROR="error",p.prototype._addLoader=function(){r.debug(this,"_addLoader");var e=this,t=document.createElement("audio"),i=new s;t.loop=!1,t.preload=t.autobuffer="auto",t.startPlay=function(){t.removeEventListener(p.EVENT_NATIVE_META,t.startPlay),t.removeEventListener(p.EVENT_NATIVE_CANPLAY,t.startPlay);try{t.play(),r.debug(e,"startPlay")}catch(n){r.error(e,"crashed",n),i.trigger(a.EVENT_CRASHED,n)}};var n=0,o=function(){var e=+new Date;30>e-n||(n=e,i.trigger(a.EVENT_PROGRESS))};t.addEventListener(p.EVENT_NATIVE_PAUSE,i.trigger.bind(i,a.EVENT_PAUSE)),t.addEventListener(p.EVENT_NATIVE_PLAY,i.trigger.bind(i,a.EVENT_PLAY)),t.addEventListener(p.EVENT_NATIVE_ENDED,function(){i.trigger(a.EVENT_PROGRESS),i.trigger(a.EVENT_ENDED)}),t.addEventListener(p.EVENT_NATIVE_TIMEUPDATE,o),t.addEventListener(p.EVENT_NATIVE_DURATION,o),t.addEventListener(p.EVENT_NATIVE_LOADING,function(){if(o(),t.buffered.length){var e=t.buffered.end(0)-t.buffered.start(0);t.notLoading&&e&&(t.notLoading=!1,i.trigger(a.EVENT_LOADING)),e>=e.duration-.1&&i.trigger(a.EVENT_LOADED)}}),t.addEventListener(p.EVENT_NATIVE_ERROR,function(e){t.fake||i.trigger(a.EVENT_ERROR,t.error||e)}),i.on("*",function(i,n){var r=(e.loaders.length+t.index-e.activeLoader)%e.loaders.length;e.trigger(i,r,n)}),t.index=this.loaders.push(t)-1,this.listeners.push(i),this.webAudioApi&&this._addSource(t)},p.prototype._addSource=function(e,t){r.debug(this,"_addSource",e),t?t.disconnect():(t=u.createMediaElementSource(e),this.sources.push(t)),this.preprocessor?t.connect(this.preprocessor):t.connect(this.audioOutput)},p.prototype._setActive=function(e){r.debug(this,"_setActive",e),0!==e&&this.stop(),this.activeLoader=(this.activeLoader+e)%this.loaders.length,this.trigger(a.EVENT_SWAP,e)},p.prototype._getLoader=function(e,t){t=t||0;var i=this.loaders[(this.activeLoader+t)%this.loaders.length];return e&&(i.removeEventListener(p.EVENT_NATIVE_META,i.startPlay),i.removeEventListener(p.EVENT_NATIVE_CANPLAY,i.startPlay)),i},p.prototype._play=function(e){r.debug(this,"_play"),e.readyState>e.HAVE_METADATA?e.startPlay():(e.addEventListener(p.EVENT_NATIVE_META,e.startPlay),e.addEventListener(p.EVENT_NATIVE_CANPLAY,e.startPlay))},p.prototype.toggleWebAudioAPI=function(e){return u?(r.info(this,"toggleWebAudioAPI",e),this.webAudioApi==e?e:(e?(this.audioOutput=u.createGain(),this.audioOutput.gain=this.volume,this.audioOutput.connect(u.destination),this.preprocessor&&this.preprocessor.output.connect(this.audioOutput),this.sources=this.sources||[],this.loaders.forEach(function(e,t){e.volume=1,e.crossOrigin="anonymous",this._addSource(e,this.sources[t])}.bind(this))):this.audioOutput&&(this.preprocessor&&this.preprocessor.output.disconnect(),this.audioOutput.disconnect(),delete this.audioOutput,this.sources.forEach(function(e){e.disconnect()}),this.loaders.forEach(function(e,t){e.volume=this.volume,e.crossOrigin="";var i=this.sources[t];i&&i.connect(u.destination)}.bind(this))),this.webAudioApi=e,e)):(r.warn(this,"toggleWebAudioAPIError",e),!1)},p.prototype.setAudioPreprocessor=function(e){if(!this.webAudioApi)return void r.warn(this,"setAudioPreprocessorError",e);if(r.info(this,"setAudioPreprocessor"),this.preprocessor!==e){if(this.preprocessor&&this.preprocessor.output.disconnect(),this.preprocessor=e,!e)return void this.sources.forEach(function(e){e.disconnect(),e.connect(this.audioOutput)}.bind(this));this.sources.forEach(function(t){t.disconnect(),t.connect(e.input)}),e.output.connect(this.audioOutput)}},p.prototype.play=function(e){r.info(this,"play",e);var t=this._getLoader(!0);t.preloaded=!1,t.fake=!1,t.src=e,t.notLoading=!0,t.load(),this._play(t)},p.prototype.pause=function(){r.info(this,"pause");var e=this._getLoader(!0);e.pause()},p.prototype.resume=function(){r.info(this,"resume");var e=this._getLoader(!0);this._play(e)},p.prototype.stop=function(e){r.info(this,"stop");var t=this._getLoader(!0,e||0);t.fake=!0,t.src="",t.notLoading=!0,t.load(),this.trigger(a.EVENT_STOP)},p.prototype.preload=function(e,t,i){if(r.info(this,"preload",e,i),i=i||1,this.loaders.length<i+1)return!1;var n=this._getLoader(!0,i);return n.preloaded=e,n.src=e,n.notLoading=!0,n.load(),!0},p.prototype.isPreloaded=function(e,t){var i=this._getLoader(!1,t);return i.preloaded===e&&!i.notLoading},p.prototype.isPreloading=function(e,t){var i=this._getLoader(!1,t);return i.preloaded===e},p.prototype.playPreloaded=function(e){return r.info(this,"playPreloaded",e),e=e||1,this.loaders.length<1+e?!1:this._getLoader(!1,e).preloaded?(this._setActive(e),this._play(this._getLoader(!0)),!0):!1},p.prototype.getPosition=function(){return this._getLoader().currentTime},p.prototype.setPosition=function(e){r.info(this,"setPosition",e),this._getLoader().currentTime=e-.001},p.prototype.getDuration=function(e){return this._getLoader(!1,e).duration},p.prototype.getLoaded=function(e){var t=this._getLoader(!1,e);return t.buffered.length?t.buffered.end(0)-t.buffered.start(0):0},p.prototype.getVolume=function(){return this.volume},p.prototype.setVolume=function(e){r.info(this,"setVolume",e),this.volume=e,this.webAudioApi?this.audioOutput.gain.value=e:this.loaders.forEach(function(t){t.volume=e}),this.trigger(a.EVENT_VOLUME)},p.prototype.getSrc=function(e){return this._getLoader(!1,e).src},p.prototype.isDeviceVolume=function(){return o.onlyDeviceVolume},p.prototype._logger=function(){try{return{main:this.getSrc(0),preloader:this.getSrc(1)}}catch(e){return""}},i.AudioImplementation=p},{"../audio-static":4,"../lib/async/events":21,"../lib/browser/detect":24,"../logger/logger":32}],19:[function(e,t,i){var n=e("./export");e("./logger/export"),e("./fx/equalizer/export"),t.exports=n},{"./export":7,"./fx/equalizer/export":15,"./logger/export":31}],20:[function(e,t,i){var n=e("./promise"),r=e("../noop"),o=t.exports=function(){var e=this,t=new n(function(t,i){e.resolve=t,e.reject=i}),i=t.then(function(t){return e.resolved=!0,e.pending=!1,t},function(t){throw e.rejected=!0,e.pending=!1,t});i["catch"](r),e.pending=!0,e.promise=function(){return i}};o.when=function(){var e=new o,t=[].slice.call(arguments),i=t.length,n=function(){i--,0>=i&&e.resolve()};return t.forEach(function(t){t.then(n,e.reject)}),t=null,e.promise.abort=e.reject,e.promise()}},{"../noop":30,"./promise":22}],21:[function(e,t,i){var n=e("../data/merge"),r="_listeners",o="_muted",s=function(){this[r]={}};s.mixin=function(e){return n(e.prototype,s.prototype,!0),e},s.eventize=function(e){return n(e,s.prototype,!0),s.call(e),e},s.prototype.on=function(e,t){return this[r][e]||(this[r][e]=[]),this[r][e].push(t),this},s.prototype.off=function(e,t){if(!this[r][e])return this;if(!t)return delete this[r][e],this;for(var i=this[r][e],n=0,o=i.length;o>n;n++)if(i[n]===t||i[n].callback===t){i.splice(n,1),i.length||delete this[r][e];break}return this},s.prototype.once=function(e,t){var i=this,n=function(){i.off(e,n),t.apply(this,arguments)};return n.callback=t,i.on(e,n),this},s.prototype.trigger=function(e,t){if(this[o])return this;if(t=[].slice.call(arguments,1),"*"!==e&&s.prototype.trigger.apply(this,["*",e].concat(t)),!this[r][e])return this;for(var i=[].concat(this[r][e]),n=0,a=i.length;a>n;n++)i[n].apply(null,t);return this},s.prototype.clearListeners=function(){for(var e in this[r])this[r].hasOwnProperty(e)&&delete this[r][e];return this},s.prototype.pipeEvents=function(e){return this.on("*",s.prototype.trigger.bind(e)),this},s.prototype.muteEvents=function(){this[o]=!0},s.prototype.unmuteEvents=function(){delete this[o]},t.exports=s},{"../data/merge":28}],22:[function(e,t,i){var n,r=e("vow"),o=e("../browser/detect");n="function"!=typeof window.Promise||"msie"===o.browser.name||"edge"===o.browser.name?r.Promise:window.Promise,t.exports=n},{"../browser/detect":24,vow:2}],23:[function(e,t,i){var n=e("../noop"),r=e("./promise");t.exports=function(e){var t=r.reject(e);return t["catch"](n),t}},{"../noop":30,"./promise":22}],24:[function(e,t,i){var n=navigator.userAgent.toLowerCase(),r=/(webkit)[ \/]([\w.]+)/,o=/(yabrowser)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,a=/(msie) ([\w.]+)/,l=/(edge)\/([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,c=/^((?!chrome).)*version\/([\d\w\.]+).*(safari)/,p=c.exec(n)||o.exec(n)||l.exec(n)||r.exec(n)||s.exec(n)||a.exec(n)||n.indexOf("compatible")<0&&u.exec(n)||[],h={name:p[1]||"",version:p[2]||"0"};"safari"===p[3]&&(h.name=p[3]),"msie"===h.name&&(document.documentMode?h.documentMode=document.documentMode:(h.documentMode=5,document.compatMode&&"CSS1Compat"===document.compatMode&&(h.documentMode=7)));var d=/(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/,f=/(ipad|playbook)/,m=/(android)/,y=/(mobile)/;E=d.exec(n)||[];var v=f.exec(n)||!y.exec(n)&&m.exec(n)||[];E[1]&&(E[1]=E[1].replace(/\s/g,"_"));var E={type:E[1]||"",tablet:!!v[1],mobile:E[1]&&!v[1]||!1};E.type||(E.type="pc"),E.os=E.type,"ipad"===E.type||"iphone"===E.type||"ipod"===E.type?E.os="ios":"android"===E.type?E.os="android":-1!==navigator.appVersion.indexOf("Win")?(E.os="windows",E.version=navigator.userAgent.match(/win[^ ]* ([^;]*)/i),E.version=E.version&&E.version[1]):-1!==navigator.appVersion.indexOf("Mac")?E.os="macos":-1!==navigator.appVersion.indexOf("X11")?E.os="unix":-1!==navigator.appVersion.indexOf("Linux")&&(E.os="linux");var _=!0;try{var g=document.createElement("audio");g.volume=.63,_=Math.abs(g.volume-.63)>.01}catch(w){_=!0}t.exports={browser:h,platform:E,onlyDeviceVolume:_}},{}],25:[function(e,t,i){var n=function(){function e(){if(!G){try{var e=k.getElementsByTagName("body")[0].appendChild(v("span"));e.parentNode.removeChild(e)}catch(t){return}G=!0;for(var i=H.length,n=0;i>n;n++)H[n]()}}function t(e){G?e():H[H.length]=e}function i(e){if(typeof j.addEventListener!=V)j.addEventListener("load",e,!1);else if(typeof k.addEventListener!=V)k.addEventListener("load",e,!1);else if(typeof j.attachEvent!=V)E(j,"onload",e);else if("function"==typeof j.onload){var t=j.onload;j.onload=function(){t(),e()}}else j.onload=e}function r(){M?o():s()}function o(){var e=k.getElementsByTagName("body")[0],t=v(O);t.setAttribute("type",x);var i=e.appendChild(t);if(i){var n=0;!function(){if(typeof i.GetVariable!=V){var r=i.GetVariable("$version");r&&(r=r.split(" ")[1].split(","),$.pv=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)])}else if(10>n)return n++,void setTimeout(arguments.callee,10);e.removeChild(t),i=null,s()}()}else s()}function s(){var e=W.length;if(e>0)for(var t=0;e>t;t++){var i=W[t].id,n=W[t].callbackFn,r={success:!1,id:i};if($.pv[0]>0){var o=y(i);if(o)if(!_(W[t].swfVersion)||$.wk&&$.wk<312)if(W[t].expressInstall&&l()){var s={};s.data=W[t].expressInstall,s.width=o.getAttribute("width")||"0",s.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(s.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(s.align=o.getAttribute("align"));for(var p={},h=o.getElementsByTagName("param"),d=h.length,f=0;d>f;f++)"movie"!=h[f].getAttribute("name").toLowerCase()&&(p[h[f].getAttribute("name")]=h[f].getAttribute("value"));u(s,p,i,n)}else c(o),n&&n(r);else w(i,!0),n&&(r.success=!0,r.ref=a(i),n(r))}else if(w(i,!0),n){var m=a(i);m&&typeof m.SetVariable!=V&&(r.success=!0,r.ref=m),n(r)}}}function a(e){var t=null,i=y(e);if(i&&"OBJECT"==i.nodeName)if(typeof i.SetVariable!=V)t=i;else{var n=i.getElementsByTagName(O)[0];n&&(t=n)}return t}function l(){return!Y&&_("6.0.65")&&($.win||$.mac)&&!($.wk&&$.wk<312)}function u(e,t,i,n){Y=!0,N=n||null,P={success:!1,id:i};var r=y(i);if(r){"OBJECT"==r.nodeName?(T=p(r),A=null):(T=r,A=i),e.id=D,(typeof e.width==V||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==V||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),k.title=k.title.slice(0,47)+" - Flash Player Installation";var o=$.ie&&$.win?"ActiveX":"PlugIn",s="MMredirectURL="+j.location.toString().replace(/&/g,"%26")+"&MMplayerType="+o+"&MMdoctitle="+k.title;if(typeof t.flashvars!=V?t.flashvars+="&"+s:t.flashvars=s,$.ie&&$.win&&4!=r.readyState){var a=v("div");i+="SWFObjectNew",a.setAttribute("id",i),r.parentNode.insertBefore(a,r),r.style.display="none",function(){4==r.readyState?r.parentNode.removeChild(r):setTimeout(arguments.callee,10)}()}h(e,t,i)}}function c(e){if($.ie&&$.win&&4!=e.readyState){var t=v("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(p(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(p(e),e)}function p(e){var t=v("div");if($.win&&$.ie)t.innerHTML=e.innerHTML;else{var i=e.getElementsByTagName(O)[0];if(i){var n=i.childNodes;if(n)for(var r=n.length,o=0;r>o;o++)1==n[o].nodeType&&"PARAM"==n[o].nodeName||8==n[o].nodeType||t.appendChild(n[o].cloneNode(!0))}}return t}function h(e,t,i){var n,r=y(i);if($.wk&&$.wk<312)return n;if(r)if(typeof e.id==V&&(e.id=i),$.ie&&$.win){var o="";for(var s in e)e[s]!=Object.prototype[s]&&("data"==s.toLowerCase()?t.movie=e[s]:"styleclass"==s.toLowerCase()?o+=' class="'+e[s]+'"':"classid"!=s.toLowerCase()&&(o+=" "+s+'="'+e[s]+'"'));var a="";for(var l in t)t[l]!=Object.prototype[l]&&(a+='<param name="'+l+'" value="'+t[l]+'" />');r.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+o+">"+a+"</object>",U[U.length]=e.id,n=y(e.id)}else{var u=v(O);u.setAttribute("type",x);for(var c in e)e[c]!=Object.prototype[c]&&("styleclass"==c.toLowerCase()?u.setAttribute("class",e[c]):"classid"!=c.toLowerCase()&&u.setAttribute(c,e[c]));for(var p in t)t[p]!=Object.prototype[p]&&"movie"!=p.toLowerCase()&&d(u,p,t[p]);r.parentNode.replaceChild(u,r),n=u}return n}function d(e,t,i){var n=v("param");n.setAttribute("name",t),n.setAttribute("value",i),e.appendChild(n)}function f(e){var t=y(e);t&&"OBJECT"==t.nodeName&&($.ie&&$.win?(t.style.display="none",function(){4==t.readyState?m(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function m(e){var t=y(e);if(t){for(var i in t)"function"==typeof t[i]&&(t[i]=null);t.parentNode.removeChild(t)}}function y(e){var t=null;try{t=k.getElementById(e)}catch(i){}return t}function v(e){return k.createElement(e)}function E(e,t,i){e.attachEvent(t,i),B[B.length]=[e,t,i]}function _(e){var t=$.pv,i=e.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,t[0]>i[0]||t[0]==i[0]&&t[1]>i[1]||t[0]==i[0]&&t[1]==i[1]&&t[2]>=i[2]?!0:!1}function g(e,t,i,n){if(!$.ie||!$.mac){var r=k.getElementsByTagName("head")[0];if(r){var o=i&&"string"==typeof i?i:"screen";if(n&&(S=null,L=null),!S||L!=o){var s=v("style");s.setAttribute("type","text/css"),s.setAttribute("media",o),S=r.appendChild(s),$.ie&&$.win&&typeof k.styleSheets!=V&&k.styleSheets.length>0&&(S=k.styleSheets[k.styleSheets.length-1]),L=o}$.ie&&$.win?S&&typeof S.addRule==O&&S.addRule(e,t):S&&typeof k.createTextNode!=V&&S.appendChild(k.createTextNode(e+" {"+t+"}"))}}}function w(e,t){if(q){var i=t?"visible":"hidden";G&&y(e)?y(e).style.visibility=i:g("#"+e,"visibility:"+i)}}function b(e){var t=/[\\\"<>\.;]/,i=null!=t.exec(e);return i&&typeof encodeURIComponent!=V?encodeURIComponent(e):e}var T,A,N,P,S,L,V="undefined",O="object",R="Shockwave Flash",I="ShockwaveFlash.ShockwaveFlash",x="application/x-shockwave-flash",D="SWFObjectExprInst",C="onreadystatechange",j=window,k=document,F=navigator,M=!1,H=[r],W=[],U=[],B=[],G=!1,Y=!1,q=!0,$=function(){var e=typeof k.getElementById!=V&&typeof k.getElementsByTagName!=V&&typeof k.createElement!=V,t=F.userAgent.toLowerCase(),i=F.platform.toLowerCase(),n=i?/win/.test(i):/win/.test(t),r=i?/mac/.test(i):/mac/.test(t),o=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,s=!1,a=[0,0,0],l=null;if(typeof F.plugins!=V&&typeof F.plugins[R]==O)l=F.plugins[R].description,!l||typeof F.mimeTypes!=V&&F.mimeTypes[x]&&!F.mimeTypes[x].enabledPlugin||(M=!0,s=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),a[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),a[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),a[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof j.ActiveXObject!=V)try{var u=new ActiveXObject(I);u&&(l=u.GetVariable("$version"),l&&(s=!0,l=l.split(" ")[1].split(","),a=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]))}catch(c){}return{w3:e,pv:a,wk:o,ie:s,win:n,mac:r}}();(function(){$.w3&&((typeof k.readyState!=V&&"complete"==k.readyState||typeof k.readyState==V&&(k.getElementsByTagName("body")[0]||k.body))&&e(),G||(typeof k.addEventListener!=V&&k.addEventListener("DOMContentLoaded",e,!1),$.ie&&$.win&&(k.attachEvent(C,function(){"complete"==k.readyState&&(k.detachEvent(C,arguments.callee),e())}),j==top&&!function(){if(!G){try{k.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}e()}}()),$.wk&&!function(){return G?void 0:/loaded|complete/.test(k.readyState)?void e():void setTimeout(arguments.callee,0)}(),i(e)))})(),function(){$.ie&&$.win&&window.attachEvent("onunload",function(){for(var e=B.length,t=0;e>t;t++)B[t][0].detachEvent(B[t][1],B[t][2]);for(var i=U.length,r=0;i>r;r++)f(U[r]);for(var o in $)$[o]=null;$=null;for(var s in n)n[s]=null;n=null})}();return{registerObject:function(e,t,i,n){if($.w3&&e&&t){var r={};r.id=e,r.swfVersion=t,r.expressInstall=i,r.callbackFn=n,W[W.length]=r,w(e,!1)}else n&&n({success:!1,id:e})},getObjectById:function(e){return $.w3?a(e):void 0},embedSWF:function(e,i,n,r,o,s,a,c,p,d){var f={success:!1,id:i};$.w3&&!($.wk&&$.wk<312)&&e&&i&&n&&r&&o?(w(i,!1),t(function(){n+="",r+="";var t={};if(p&&typeof p===O)for(var m in p)t[m]=p[m];t.data=e,t.width=n,t.height=r;var y={};if(c&&typeof c===O)for(var v in c)y[v]=c[v];if(a&&typeof a===O)for(var E in a)typeof y.flashvars!=V?y.flashvars+="&"+E+"="+a[E]:y.flashvars=E+"="+a[E];if(_(o)){var g=h(t,y,i);t.id==i&&w(i,!0),f.success=!0,f.ref=g}else{if(s&&l())return t.data=s,void u(t,y,i,d);w(i,!0)}d&&d(f)})):d&&d(f)},switchOffAutoHideShow:function(){q=!1},ua:$,getFlashPlayerVersion:function(){return{major:$.pv[0],minor:$.pv[1],release:$.pv[2]}},hasFlashPlayerVersion:_,createSWF:function(e,t,i){return $.w3?h(e,t,i):void 0},showExpressInstall:function(e,t,i,n){$.w3&&l()&&u(e,t,i,n)},removeSWF:function(e){$.w3&&f(e)},createCSS:function(e,t,i,n){$.w3&&g(e,t,i,n)},addDomLoadEvent:t,addLoadEvent:i,getQueryParamValue:function(e){var t=k.location.search||k.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return b(t);for(var i=t.split("&"),n=0;n<i.length;n++)if(i[n].substring(0,i[n].indexOf("="))==e)return b(i[n].substring(i[n].indexOf("=")+1))}return""},expressInstallCallback:function(){if(Y){var e=y(D);e&&T&&(e.parentNode.replaceChild(T,e),A&&(w(A,!0),$.ie&&$.win&&(T.style.display="block")),N&&N(P)),Y=!1}}}}();t.exports=n},{}],26:[function(e,t,i){var n=function(e){var t=function(){};return t.prototype=e.prototype,new t};t.exports=n},{}],27:[function(e,t,i){var n=e("../async/events"),r=function(e){if(e){for(var t in e)"_"===t[0]||"function"!=typeof e[t]||e[t]===Object.prototype[t]||e.hasOwnProperty(t)||n.prototype.hasOwnProperty(t)||(this[t]=e[t].bind(e));e.pipeEvents&&(n.call(this),this.on=n.prototype.on,this.once=n.prototype.once,this.off=n.prototype.off,this.clearListeners=n.prototype.clearListeners,e.pipeEvents(this))}};r.exportStatic=function(e,t,i){i=i||[],Object.keys(e).forEach(function(n){e.hasOwnProperty(n)&&"_"!==n[0]&&"prototype"!==n&&-1===i.indexOf(n)&&(t[n]=e[n])})},r.createClass=function(e,t){var i=function(){var t=function(){};t.prototype=e.prototype;var i=new t;return e.apply(i,arguments),i._proxy()},n=function(){};n.prototype=(t||r).prototype,i.prototype=new n;var o;for(var s in e.prototype)o=e.prototype[s],Object.prototype[s]!=o&&"function"!=typeof o&&"_"!==s[0]&&(i.prototype[s]=o);var a=function(e){var t=r.prototype;r.prototype=i.prototype;var n=new r(e);return r.prototype=t,n};return e.prototype._proxy=function(){return this.__proxy||(this.__proxy=a(this)),this.__proxy},r.exportStatic(e,i),i},t.exports=r},{"../async/events":21}],28:[function(e,t,i){t.exports=function(e){var t,i,n=[].slice.call(arguments,1);if(n[n.length-1]===!0)t=e,n.pop();else{t={};for(i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}for(var r=0,o=n.length;o>r;r++)for(i in n[r])n[r].hasOwnProperty(i)&&(t[i]=n[r][i]);return t}},{}],29:[function(e,t,i){var n=e("../../class/clear-instance"),r=function(e){Error.call(this,e)};r.prototype=n(Error),r.TIMEOUT="request timeout",r.FAILED="request failed",t.exports=r},{"../../class/clear-instance":26}],30:[function(e,t,i){t.exports=function(){}},{}],31:[function(e,t,i){e("../export");var n=e("./logger");ya.Audio.Logger=n},{"../export":7,"./logger":32}],32:[function(e,t,i){var n=["debug","log","info","warn","error","trace"],r=function(e){this.channel=e};r.ignores=[],r.logLevels=[],r.log=function(e,t,i){var n=[].slice.call(arguments,3).map(function(e){return e&&e._logger&&e._logger()||e}),o={timestamp:+new Date,level:e,channel:t,context:i,message:n};r.ignores[t]||-1===r.logLevels.indexOf(e)||r._dumpEntry(o)},r._dumpEntry=function(e){var t=e.level,i=e.context&&(e.context.taskName||e.context.name),n=e.context&&(e.context._logger?e.context._logger():"");"function"!=typeof console[t]?console.log.apply(console,[t.toUpperCase(),r._formatTimestamp(e.timestamp),"["+e.channel+(i?":"+i:"")+"]",n].concat(e.message)):console[t].apply(console,[r._formatTimestamp(e.timestamp),"["+e.channel+(i?":"+i:"")+"]",n].concat(e.message))},r._formatTimestamp=function(e){var t=new Date(e),i=t.getMilliseconds();return i=i>100?i:i>10?"0"+i:"00"+i,t.toLocaleTimeString()+"."+i},n.forEach(function(e){r.prototype[e]=function(){var t=[].slice.call(arguments);t.unshift(this.channel),t.unshift(e),r.log.apply(r,t)}}),t.exports=r},{}]},{},[19]);
//# sourceMappingURL=dist/index.map.json
