!function e(t,r,i){function n(s,a){if(!r[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[s]={exports:{}};t[s][0].call(u.exports,function(e){var r=t[s][1][e];return n(r?r:e)},u,u.exports,e,t,r,i)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(e,t,r){function i(){u=!1,a.length?c=a.concat(c):p=-1,c.length&&n()}function n(){if(!u){var e=setTimeout(i);u=!0;for(var t=c.length;t;){for(a=c,c=[];++p<t;)a&&a[p].run();p=-1,t=c.length}a=null,u=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function s(){}var a,l=t.exports={},c=[],u=!1,p=-1;l.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new o(e,t)),1!==c.length||u||setTimeout(n,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=s,l.addListener=s,l.once=s,l.off=s,l.removeListener=s,l.removeAllListeners=s,l.emit=s,l.binding=function(e){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(e){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],2:[function(e,t,r){(function(e){!function(r){var i,n=function(){var t=[],i=function(e){return 1===t.push(e)},n=function(){var e=t,r=0,i=t.length;for(t=[];i>r;)e[r++]()};if("function"==typeof setImmediate)return function(e){i(e)&&setImmediate(n)};if("object"==typeof e&&e.nextTick)return function(t){i(t)&&e.nextTick(n)};var o=r.MutationObserver||r.WebKitMutationObserver;if(o){var s=1,a=document.createTextNode("");return new o(n).observe(a,{characterData:!0}),function(e){i(e)&&(a.data=s*=-1)}}if(r.postMessage){var l=!0;if(r.attachEvent){var c=function(){l=!1};r.attachEvent("onmessage",c),r.postMessage("__checkAsync","*"),r.detachEvent("onmessage",c)}if(l){var u="__promise"+ +new Date,p=function(e){e.data===u&&(e.stopPropagation&&e.stopPropagation(),n())};return r.addEventListener?r.addEventListener("message",p,!0):r.attachEvent("onmessage",p),function(e){i(e)&&r.postMessage(u,"*")}}}var h=r.document;if("onreadystatechange"in h.createElement("script")){var d=function(){var e=h.createElement("script");e.onreadystatechange=function(){e.parentNode.removeChild(e),e=e.onreadystatechange=null,n()},(h.documentElement||h.body).appendChild(e)};return function(e){i(e)&&d()}}return function(e){i(e)&&setTimeout(n,0)}}(),o=function(e){n(function(){throw e})},s=function(e){return"function"==typeof e},a=function(e){return null!==e&&"object"==typeof e},l=Object.prototype.toString,c=Array.isArray||function(e){return"[object Array]"===l.call(e)},u=function(e){for(var t=[],r=0,i=e.length;i>r;)t.push(r++);return t},p=Object.keys||function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t},h=function(e){var t=function(t){this.name=e,this.message=t};return t.prototype=new Error,t},d=function(e,t){return function(r){e.call(this,r,t)}},f=function(){this._promise=new m};f.prototype={promise:function(){return this._promise},resolve:function(e){this._promise.isResolved()||this._promise._resolve(e)},reject:function(e){this._promise.isResolved()||(_.isPromise(e)?(e=e.then(function(e){var t=_.defer();return t.reject(e),t.promise()}),this._promise._resolve(e)):this._promise._reject(e))},notify:function(e){this._promise.isResolved()||this._promise._notify(e)}};var y={PENDING:0,RESOLVED:1,FULFILLED:2,REJECTED:3},m=function(e){if(this._value=i,this._status=y.PENDING,this._fulfilledCallbacks=[],this._rejectedCallbacks=[],this._progressCallbacks=[],e){var t=this,r=e.length;e(function(e){t.isResolved()||t._resolve(e)},r>1?function(e){t.isResolved()||t._reject(e)}:i,r>2?function(e){t.isResolved()||t._notify(e)}:i)}};m.prototype={valueOf:function(){return this._value},isResolved:function(){return this._status!==y.PENDING},isFulfilled:function(){return this._status===y.FULFILLED},isRejected:function(){return this._status===y.REJECTED},then:function(e,t,r,i){var n=new f;return this._addCallbacks(n,e,t,r,i),n.promise()},"catch":function(e,t){return this.then(i,e,t)},fail:function(e,t){return this.then(i,e,t)},always:function(e,t){var r=this,i=function(){return e.call(this,r)};return this.then(i,i,t)},progress:function(e,t){return this.then(i,i,e,t)},spread:function(e,t,r){return this.then(function(t){return e.apply(this,t)},t,r)},done:function(e,t,r,i){this.then(e,t,r,i).fail(o)},delay:function(e){var t,r=this.then(function(r){var i=new f;return t=setTimeout(function(){i.resolve(r)},e),i.promise()});return r.always(function(){clearTimeout(t)}),r},timeout:function(e){var t=new f,r=setTimeout(function(){t.reject(new _.TimedOutError("timed out"))},e);return this.then(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise().always(function(){clearTimeout(r)}),t.promise()},_vow:!0,_resolve:function(e){if(!(this._status>y.RESOLVED)){if(e===this)return void this._reject(TypeError("Can't resolve promise with itself"));if(this._status=y.RESOLVED,e&&e._vow)return void(e.isFulfilled()?this._fulfill(e.valueOf()):e.isRejected()?this._reject(e.valueOf()):e.then(this._fulfill,this._reject,this._notify,this));if(a(e)||s(e)){var t;try{t=e.then}catch(r){return void this._reject(r)}if(s(t)){var i=this,n=!1;try{t.call(e,function(e){n||(n=!0,i._resolve(e))},function(e){n||(n=!0,i._reject(e))},function(e){i._notify(e)})}catch(r){n||this._reject(r)}return}}this._fulfill(e)}},_fulfill:function(e){this._status>y.RESOLVED||(this._status=y.FULFILLED,this._value=e,this._callCallbacks(this._fulfilledCallbacks,e),this._fulfilledCallbacks=this._rejectedCallbacks=this._progressCallbacks=i)},_reject:function(e){this._status>y.RESOLVED||(this._status=y.REJECTED,this._value=e,this._callCallbacks(this._rejectedCallbacks,e),this._fulfilledCallbacks=this._rejectedCallbacks=this._progressCallbacks=i)},_notify:function(e){this._callCallbacks(this._progressCallbacks,e)},_addCallbacks:function(e,t,r,n,o){r&&!s(r)?(o=r,r=i):n&&!s(n)&&(o=n,n=i);var a;this.isRejected()||(a={defer:e,fn:s(t)?t:i,ctx:o},this.isFulfilled()?this._callCallbacks([a],this._value):this._fulfilledCallbacks.push(a)),this.isFulfilled()||(a={defer:e,fn:r,ctx:o},this.isRejected()?this._callCallbacks([a],this._value):this._rejectedCallbacks.push(a)),this._status<=y.RESOLVED&&this._progressCallbacks.push({defer:e,fn:n,ctx:o})},_callCallbacks:function(e,t){var r=e.length;if(r){var i=this.isResolved(),o=this.isFulfilled();n(function(){for(var n,s,a,l=0;r>l;)if(n=e[l++],s=n.defer,a=n.fn){var c,u=n.ctx;try{c=u?a.call(u,t):a(t)}catch(p){s.reject(p);continue}i?s.resolve(c):s.notify(c)}else i?o?s.resolve(t):s.reject(t):s.notify(t)})}}};var E={cast:function(e){return _.cast(e)},all:function(e){return _.all(e)},race:function(e){return _.anyResolved(e)},resolve:function(e){return _.resolve(e)},reject:function(e){return _.reject(e)}};for(var v in E)E.hasOwnProperty(v)&&(m[v]=E[v]);var _={Deferred:f,Promise:m,defer:function(){return new f},when:function(e,t,r,i,n){return _.cast(e).then(t,r,i,n)},fail:function(e,t,r){return _.when(e,i,t,r)},always:function(e,t,r){return _.when(e).always(t,r)},progress:function(e,t,r){return _.when(e).progress(t,r)},spread:function(e,t,r,i){return _.when(e).spread(t,r,i)},done:function(e,t,r,i,n){_.when(e).done(t,r,i,n)},isPromise:function(e){return a(e)&&s(e.then)},cast:function(e){return e&&e._vow?e:_.resolve(e)},valueOf:function(e){return e&&s(e.valueOf)?e.valueOf():e},isFulfilled:function(e){return e&&s(e.isFulfilled)?e.isFulfilled():!0},isRejected:function(e){return e&&s(e.isRejected)?e.isRejected():!1},isResolved:function(e){return e&&s(e.isResolved)?e.isResolved():!0},resolve:function(e){var t=_.defer();return t.resolve(e),t.promise()},fulfill:function(e){var t=_.defer(),r=t.promise();return t.resolve(e),r.isFulfilled()?r:r.then(null,function(e){return e})},reject:function(e){var t=_.defer();return t.reject(e),t.promise()},invoke:function(e,t){var i,n=Math.max(arguments.length-1,0);if(n){i=Array(n);for(var o=0;n>o;)i[o++]=arguments[o]}try{return _.resolve(i?e.apply(r,i):e.call(r))}catch(s){return _.reject(s)}},all:function(e){var t=new f,r=c(e),i=r?u(e):p(e),n=i.length,o=r?[]:{};if(!n)return t.resolve(o),t.promise();var s=n;return _._forEach(e,function(e,r){o[i[r]]=e,--s||t.resolve(o)},t.reject,t.notify,t,i),t.promise()},allResolved:function(e){var t=new f,r=c(e),i=r?u(e):p(e),n=i.length,o=r?[]:{};if(!n)return t.resolve(o),t.promise();var s=function(){--n||t.resolve(e)};return _._forEach(e,s,s,t.notify,t,i),t.promise()},allPatiently:function(e){return _.allResolved(e).then(function(){var t,r,i,n,o=c(e),s=o?u(e):p(e),a=s.length,l=0;if(!a)return o?[]:{};for(;a>l;)i=s[l++],n=e[i],_.isRejected(n)?(t||(t=o?[]:{}),o?t.push(n.valueOf()):t[i]=n.valueOf()):t||((r||(r=o?[]:{}))[i]=_.valueOf(n));if(t)throw t;return r})},any:function(e){var t=new f,r=e.length;if(!r)return t.reject(Error()),t.promise();var i,n=0;return _._forEach(e,t.resolve,function(e){n||(i=e),++n===r&&t.reject(i)},t.notify,t),t.promise()},anyResolved:function(e){var t=new f,r=e.length;return r?(_._forEach(e,t.resolve,t.reject,t.notify,t),t.promise()):(t.reject(Error()),t.promise())},delay:function(e,t){return _.resolve(e).delay(t)},timeout:function(e,t){return _.resolve(e).timeout(t)},_forEach:function(e,t,r,i,n,o){for(var s=o?o.length:e.length,a=0;s>a;)_.when(e[o?o[a]:a],d(t,a),r,i,n),++a},TimedOutError:h("TimedOut")},g=!0;"object"==typeof t&&"object"==typeof t.exports&&(t.exports=_,g=!1),"object"==typeof modules&&s(modules.define)&&(modules.define("vow",function(e){e(_)}),g=!1),"function"==typeof define&&(define(function(e,t,r){r.exports=_}),g=!1),g&&(r.vow=_)}(this)}).call(this,e("_process"))},{_process:1}],3:[function(e,t,r){var i=e("./logger/logger"),n=new i("AudioPlayer"),o=e("./lib/async/events"),s=e("./lib/async/deferred"),a=e("./lib/browser/detect"),l=e("./config"),c=e("./lib/data/merge"),u=e("./lib/async/reject"),p=e("./error/audio-error"),h=e("./audio-static"),d=1,f={html5:e("./html5/audio-html5"),flash:e("./flash/audio-flash")},y="@"+a.platform.version+" "+a.platform.os+":"+a.browser.name+"/"+a.browser.version;f.flash.priority=0,f.html5.priority=l.html5.blacklist.some(function(e){return y.match(e)})?-1:1,n.debug(null,"audioTypes",f);var m=function(e,t){this.name=d++,n.debug(this,"constructor"),o.call(this),this.preferredType=e,this.overlay=t,this.state=m.STATE_INIT,this._played=0,this._lastSkip=0,this._playId=null,this._whenReady=new s,this.whenReady=this._whenReady.promise().then(function(){n.info(this,"implementation found",this.implementation.type),this.implementation.on("*",function(e,t,r){if(this._populateEvents(e,t,r),!t)switch(e){case m.EVENT_PLAY:this._setState(m.STATE_PLAYING);break;case m.EVENT_SWAP:case m.EVENT_STOP:case m.EVENT_ENDED:case m.EVENT_ERROR:this._setState(m.STATE_IDLE);break;case m.EVENT_PAUSE:this._setState(m.STATE_PAUSED);break;case m.EVENT_CRASHED:this._setState(m.STATE_CRASHED)}}.bind(this)),this._setState(m.STATE_IDLE)}.bind(this),function(e){throw n.error(this,p.NO_IMPLEMENTATION,e),this._setState(m.STATE_CRASHED),e}.bind(this)),this._init(0)};o.mixin(m),c(m,h,!0),m.info={html5:f.html5.available,flash:f.flash.available},m.audioContext=f.html5.audioContext,m.prototype._setState=function(e){n.debug(this,"_setState",e);var t=this.state!==e;this.state=e,t&&(n.info(this,"newState",e),this.trigger(m.EVENT_STATE,e))},m.prototype._init=function(e){function t(){var n=r.shift();return n?void i._initType(n).then(i._whenReady.resolve,t):void i._init(e+1)}if(e=e||0,n.info(this,"_init",e),this._whenReady.pending){e>l.audio.retry&&(n.error(this,p.NO_IMPLEMENTATION),this._whenReady.reject(new p(p.NO_IMPLEMENTATION)));var r=[f.html5,f.flash].sort(function(e,t){return e.available!==t.available?e.available?-1:1:e.AudioImplementation.type===this.preferredType?-1:t.AudioImplementation.type===this.preferredType?1:t.priority-e.priority}.bind(this)),i=this;t()}},m.prototype._initType=function(e){n.info(this,"_initType",e);var t=new s;try{this.implementation=new e.AudioImplementation(this.overlay),this.implementation.whenReady?this.implementation.whenReady.then(t.resolve,t.reject):t.resolve()}catch(r){t.reject(r)}return t.promise()},m.prototype._waitEvents=function(e,t,r){var i=new s,n=this;this[e]=i;var o=function(){t.forEach(function(e){n.off(e,i.resolve)}),r.forEach(function(e){n.off(e,i.reject)}),delete n[e]};return t.forEach(function(e){n.on(e,i.resolve)}),r.forEach(function(e){n.on(e,function(t){var r=t instanceof Error?t:new p(t||e);i.reject(r)})}),i.promise().then(o,o),i.promise()},m.prototype._populateEvents=function(e,t,r){e!==m.EVENT_PROGRESS&&n.debug(this,"_populateEvents",e,t,r);var i=(t?m.PRELOADER_EVENT:"")+e;switch(e){case m.EVENT_CRASHED:case m.EVENT_SWAP:this.trigger(e,r);break;case m.EVENT_ERROR:this.trigger(i,r);break;case m.EVENT_VOLUME:this.trigger(e,this.getVolume());break;case m.EVENT_PROGRESS:this.trigger(i,{duration:this.getDuration(t),loaded:this.getLoaded(t),position:t?0:this.getPosition(),played:t?0:this.getPlayed()});break;default:this.trigger(i)}},m.prototype._generatePlayId=function(){this._playId=Math.random().toString().slice(2)},m.prototype.initPromise=function(){return this.whenReady},m.prototype.getState=function(){return this.state},m.prototype.getType=function(){return this.implementation&&this.implementation.type},m.prototype.getSrc=function(e){return this.implementation&&this.implementation.getSrc(e)},m.prototype.play=function(e,t){n.info(this,"play",e,t),this._played=0,this._lastSkip=0,this._generatePlayId(),this._whenPlay&&this._whenPlay.reject("play"),this._whenPause&&this._whenPause.reject("play"),this._whenStop&&this._whenStop.reject("play");var r=this._waitEvents("_whenPlay",[m.EVENT_PLAY],[m.EVENT_STOP,m.EVENT_ERROR,m.EVENT_CRASHED]);return r.abort=function(){this._whenPlay&&(this._whenPlay.reject.apply(this._whenPlay,arguments),this.stop())}.bind(this),this._setState(m.STATE_PAUSED),this.implementation.play(e,t),r},m.prototype.stop=function(e){if(n.info(this,"stop",e),0!==e)return this.implementation.stop(e);this._played=0,this._lastSkip=0,this._whenPlay&&this._whenPlay.reject("stop"),this._whenPause&&this._whenPause.reject("stop");var t;return t=this._whenStop?this._whenStop.promise():this._waitEvents("_whenStop",[m.EVENT_STOP],[m.EVENT_PLAY,m.EVENT_ERROR,m.EVENT_CRASHED]),this.implementation.stop(),t},m.prototype.pause=function(){if(n.info(this,"pause"),this.state!==m.STATE_PLAYING)return u(new p(p.BAD_STATE));var e;return this._whenPlay&&this._whenPlay.reject("pause"),e=this._whenPause?this._whenPause.promise():this._waitEvents("_whenPause",[m.EVENT_PAUSE],[m.EVENT_STOP,m.EVENT_PLAY,m.EVENT_ERROR,m.EVENT_CRASHED]),this.implementation.pause(),e},m.prototype.resume=function(){if(n.info(this,"resume"),this.state===m.STATE_PLAYING&&!this._whenPause)return Promise.resolve();if(this.state!==m.STATE_IDLE&&this.state!==m.STATE_PAUSED&&this.state!==m.STATE_PLAYING)return u(new p(p.BAD_STATE));var e;return this._whenPause&&this._whenPause.reject("resume"),e=this._whenPlay?this._whenPlay.promise():this._waitEvents("_whenPlay",[m.EVENT_PLAY],[m.EVENT_STOP,m.EVENT_ERROR,m.EVENT_CRASHED]),this.implementation.resume(),e},m.prototype.playPreloaded=function(e){if(n.info(this,"playPreloaded",e),!this.isPreloaded(e))return n.warn(this,"playPreloadedBadTrack",p.NOT_PRELOADED),u(new p(p.NOT_PRELOADED));this._played=0,this._lastSkip=0,this._generatePlayId(),this._whenPlay&&this._whenPlay.reject("playPreloaded"),this._whenPause&&this._whenPause.reject("playPreloaded"),this._whenStop&&this._whenStop.reject("playPreloaded");var t=this._waitEvents("_whenPlay",[m.EVENT_PLAY],[m.EVENT_STOP,m.EVENT_ERROR,m.EVENT_CRASHED]);t.abort=function(){this._whenPlay&&(this._whenPlay.reject.apply(this._whenPlay,arguments),this.stop())}.bind(this),this._setState(m.STATE_PAUSED);var r=this.implementation.playPreloaded();return r||(n.warn(this,"playPreloadedError",p.NOT_PRELOADED),this._whenPlay.reject(new p(p.NOT_PRELOADED))),t},m.prototype.preload=function(e,t){n.info(this,"preload",e,t),this._whenPreload&&this._whenPreload.reject("preload");var r=this._waitEvents("_whenPreload",[m.PRELOADER_EVENT+m.EVENT_LOADING,m.EVENT_SWAP],[m.PRELOADER_EVENT+m.EVENT_CRASHED,m.PRELOADER_EVENT+m.EVENT_ERROR,m.PRELOADER_EVENT+m.EVENT_STOP]);return r.abort=function(){this._whenPreload&&(this._whenPreload.reject.apply(this._whenPreload,arguments),this.stop(1))}.bind(this),this.implementation.preload(e,t),r},m.prototype.isPreloaded=function(e){return this.implementation.isPreloaded(e)},m.prototype.isPreloading=function(e){return this.implementation.isPreloading(e,1)},m.prototype.getPosition=function(){return this.implementation.getPosition()},m.prototype.setPosition=function(e){return n.info(this,"setPosition",e),e="flash"==this.implementation.type?Math.max(0,Math.min(this.getLoaded(),e)):Math.max(0,Math.min(this.getDuration(),e)),this._played+=this.getPosition()-this._lastSkip,this._lastSkip=e,this.implementation.setPosition(e),e},m.prototype.getDuration=function(e){return this.implementation.getDuration(e?1:0)},m.prototype.getLoaded=function(e){return this.implementation.getLoaded(e?1:0)},m.prototype.getPlayed=function(){var e=this.getPosition();return this._played+=e-this._lastSkip,this._lastSkip=e,this._played},m.prototype.getVolume=function(){return this.implementation?this.implementation.getVolume():0},m.prototype.setVolume=function(e){return n.info(this,"setVolume",e),this.implementation?this.implementation.setVolume(e):0},m.prototype.isDeviceVolume=function(){return this.implementation?this.implementation.isDeviceVolume():!0},m.prototype.toggleWebAudioAPI=function(e){return n.info(this,"toggleWebAudioAPI",e),"html5"!==this.implementation.type?(n.warn(this,"toggleWebAudioAPIFailed",this.implementation.type),!1):this.implementation.toggleWebAudioAPI(e)},m.prototype.setAudioPreprocessor=function(e){return n.info(this,"setAudioPreprocessor"),"html5"!==this.implementation.type?(n.warn(this,"setAudioPreprocessorFailed",this.implementation.type),!1):this.implementation.setAudioPreprocessor(e)},m.prototype.getPlayId=function(){return this._playId},m.prototype._logger=function(){return{index:this.implementation&&this.implementation.name,src:this.implementation&&this.implementation._logger(),type:this.implementation&&this.implementation.type}},t.exports=m},{"./audio-static":4,"./config":5,"./error/audio-error":6,"./flash/audio-flash":10,"./html5/audio-html5":20,"./lib/async/deferred":22,"./lib/async/events":23,"./lib/async/reject":25,"./lib/browser/detect":26,"./lib/data/merge":31,"./logger/logger":36}],4:[function(e,t,r){var i={};i.EVENT_PLAY="play",i.EVENT_STOP="stop",i.EVENT_PAUSE="pause",i.EVENT_PROGRESS="progress",i.EVENT_LOADING="loading",i.EVENT_LOADED="loaded",i.EVENT_VOLUME="volumechange",i.EVENT_ENDED="ended",i.EVENT_CRASHED="crashed",i.EVENT_ERROR="error",i.EVENT_STATE="state",i.EVENT_SWAP="swap",i.PRELOADER_EVENT="preloader:",i.STATE_INIT="init",i.STATE_CRASHED="crashed",i.STATE_IDLE="idle",i.STATE_PLAYING="playing",i.STATE_PAUSED="paused",t.exports=i},{}],5:[function(e,t,r){var i={audio:{retry:3},flash:{path:"dist",name:"player-2_0.swf",version:"9.0.28",playerID:"YandexAudioFlashPlayer",callback:"ya.Audio._flashCallback",initTimeout:3e3,loadTimeout:5e3,clickTimeout:1e3,heartBeatInterval:1e3},html5:{blacklist:["linux:mozilla","unix:mozilla","macos:mozilla",":opera","@NT 5","@NT 4"]}};t.exports=i},{}],6:[function(e,t,r){var i=e("../lib/class/error-class"),n=function(e){i.call(this,e)};n.prototype=i.create("AudioError"),n.NO_IMPLEMENTATION="cannot find suitable implementation",n.NOT_PRELOADED="track is not preloaded",n.BAD_STATE="action is not permited from current state",n.FLASH_BLOCKER="flash is rejected by flash blocker plugin",n.FLASH_UNKNOWN_CRASH="flash is crashed without reason",n.FLASH_INIT_TIMEOUT="flash init timed out",n.FLASH_INTERNAL_ERROR="flash internal error",n.FLASH_EMMITER_NOT_FOUND="flash event emmiter not found",n.FLASH_NOT_RESPONDING="flash player doesn't response",t.exports=n},{"../lib/class/error-class":29}],7:[function(e,t,r){e("../export");var i=e("./audio-error"),n=e("./playback-error");ya.Audio.AudioError=i,ya.Audio.PlaybackError=n},{"../export":9,"./audio-error":6,"./playback-error":8}],8:[function(e,t,r){var i=e("../lib/class/error-class"),n=function(e,t){i.call(this,e),this.src=t};n.prototype=i.create("PlaybackError"),n.CONNECTION_ABORTED="Connection aborted",n.NETWORK_ERROR="Network error",n.DECODE_ERROR="Decode error",n.BAD_DATA="Bad data",n.html5={1:n.CONNECTION_ABORTED,2:n.NETWORK_ERROR,3:n.DECODE_ERROR,4:n.BAD_DATA},t.exports=n},{"../lib/class/error-class":29}],9:[function(e,t,r){"undefined"==typeof window.ya&&(window.ya={});var i=window.ya;"undefined"==typeof i.Audio&&(i.Audio={});var n=e("./config"),o=e("./audio-player"),s=e("./lib/class/proxy");i.Audio=s.createClass(o),i.Audio.config=n,t.exports=i.Audio},{"./audio-player":3,"./config":5,"./lib/class/proxy":30}],10:[function(e,t,r){var i,n=e("../config"),o=e("../lib/browser/swfobject"),s=e("../lib/browser/detect"),a=e("../logger/logger"),l=new a("AudioFlash"),c=e("./flash-manager"),u=e("./flash-interface"),p=e("../lib/async/events"),h=1,d=o.getFlashPlayerVersion();s.flashVersion=d.major+"."+d.minor+"."+d.release,r.available=o.hasFlashPlayerVersion(n.flash.version),l.info(this,"detection",r.available);var f=function(e,t){this.name=h++,l.debug(this,"constructor"),(!i||t)&&(i=new c(e)),p.call(this),this.whenReady=i.createPlayer(this),this.whenReady.then(function(e){l.info(this,"ready",e)}.bind(this),function(e){l.error(this,"failed",e)}.bind(this))};p.mixin(f),f.type=f.prototype.type="flash",Object.keys(u.prototype).filter(function(e){return u.prototype.hasOwnProperty(e)&&"_"!==e[0]}).map(function(e){f.prototype[e]=function(){if(/^get/.test(e)||l.debug(this,e),!this.hasOwnProperty("id"))return l.warn(this,"player is not ready"),null;var t=[].slice.call(arguments);return t.unshift(this.id),i.flash[e].apply(i.flash,t)}}),f.prototype.isDeviceVolume=function(){return!1},f.prototype._logger=function(){try{return this.hasOwnProperty("id")?{main:this.getSrc(0),preloader:this.getSrc(1)}:{main:"not ready",preloader:"not ready"}}catch(e){return""}},r.AudioImplementation=f},{"../config":5,"../lib/async/events":23,"../lib/browser/detect":26,"../lib/browser/swfobject":27,"../logger/logger":36,"./flash-interface":11,"./flash-manager":12}],11:[function(e,t,r){var i=(e("../config"),e("../logger/logger")),n=new i("FlashInterface"),o=function(e){this.flash=ya.Audio._flash=e};o.prototype._callFlash=function(e){try{return this.flash.call.apply(this.flash,arguments)}catch(t){return n.error(this,"_callFlashError",t),null}},o.prototype._heartBeat=function(){this._callFlash("heartBeat",-1)},o.prototype._addPlayer=function(){return this._callFlash("addPlayer",-1)},o.prototype.setVolume=function(e,t){this._callFlash("setVolume",-1,t)},o.prototype.getVolume=function(){return this._callFlash("getVolume",-1)},o.prototype.play=function(e,t,r){this._callFlash("play",e,t,r)},o.prototype.stop=function(e,t){this._callFlash("stop",e,t||0)},o.prototype.pause=function(e){this._callFlash("pause",e)},o.prototype.resume=function(e){this._callFlash("resume",e)},o.prototype.preload=function(e,t,r,i){return this._callFlash("preload",e,t,r,null==i?1:i)},o.prototype.isPreloaded=function(e,t,r){return this._callFlash("isPreloaded",e,t,null==r?1:r)},o.prototype.isPreloading=function(e,t,r){return this._callFlash("isPreloading",e,t,null==r?1:r)},o.prototype.playPreloaded=function(e,t){return this._callFlash("playPreloaded",e,null==t?1:t)},o.prototype.getPosition=function(e){return this._callFlash("getPosition",e)},o.prototype.setPosition=function(e,t){this._callFlash("setPosition",e,t)},o.prototype.getDuration=function(e,t){return this._callFlash("getDuration",e,t||0)},o.prototype.getLoaded=function(e,t){return this._callFlash("getLoaded",e,t||0)},o.prototype.getSrc=function(e,t){return this._callFlash("getSrc",e,t||0)},t.exports=o},{"../config":5,"../logger/logger":36}],12:[function(e,t,r){var i=e("../logger/logger"),n=new i("FlashBridge"),o=e("../config"),s=e("../audio-static"),a=e("./loader"),l=e("./flash-interface"),c=e("../lib/async/deferred"),u=e("../error/audio-error"),p=e("../lib/net/error/loader-error"),h=function(e){n.debug(this,"constructor",e),this.state="init",this.overlay=e,this.emmiters=[];var t=this.deferred=new c;this.whenReady=this.deferred.promise();var r=o.flash.callback.split("."),i=r.pop(),s=window;if(r.forEach(function(e){s[e]||(s[e]={}),s=s[e]}),s[i]=this._onEvent.bind(this),this.__loadTimeout=setTimeout(this._onLoadTimeout,o.flash.loadTimeout),a(o.flash.path+"/"+o.flash.name,o.flash.version,o.flash.playerID,this._onLoad.bind(this),{},e),e){var l;e.addEventListener("mousedown",function(){l=l||setTimeout(function(){t.reject(new u(u.FLASH_NOT_RESPONDING))},o.flash.clickTimeout)},!0)}this.whenReady.then(function(e){l=l&&clearTimeout(l),n.info(this,"ready",e)}.bind(this),function(e){flashManager=null,n.error(this,"failed",e)}.bind(this))};h.EVENT_INIT="init",h.EVENT_FAIL="failed",h.prototype._onLoad=function(e){n.debug(this,"_onLoad",e),clearTimeout(this.__loadTimeout),delete this.__loadTimeout,e.success?(this.flash=new l(e.ref),"ready"===this.state?this.deferred.resolve(e.ref):this.overlay||(this.__initTimeout=setTimeout(this._onInitTimeout.bind(this),o.flash.initTimeout))):(this.state="failed",this.deferred.reject(new u(e.__fbn?u.FLASH_BLOCKER:u.FLASH_UNKNOWN_CRASH)))},h.prototype._onLoadTimeout=function(){this.state="failed",this.deferred.reject(new p(p.TIMEOUT))},h.prototype._onInitTimeout=function(){this.state="failed",this.deferred.reject(new u(u.FLASH_INIT_TIMEOUT))},h.prototype._onInit=function(){n.debug(this,"_onInit"),this.state="ready",this.__initTimeout&&(clearTimeout(this.__initTimeout),delete this.__initTimeout),this.flash&&(this.deferred.resolve(this.flash),this.__heartbeat=setInterval(this._onHeartBeat.bind(this),1e3))},h.prototype._onEvent=function(e,t,r,i){return"debug"===e&&console.debug("flashDEBUG",t,r,i),"failed"===this.state?void n.warn(this,"onEventFailed",e,t,r,i):(n.debug(this,"onEvent",e,t,r),e===h.EVENT_INIT?this._onInit():e===h.EVENT_FAIL?(n.warn(this,"failed",u.FLASH_INTERNAL_ERROR),void this.deferred.reject(new u(u.FLASH_INTERNAL_ERROR))):void(-1==t?this.emmiters.forEach(function(t){t.trigger(e,r,i)}):this.emmiters[t]?this.emmiters[t].trigger(e,r,i):n.error(this,u.FLASH_EMMITER_NOT_FOUND,t)))},h.prototype._onHeartBeat=function(){try{this.flash._heartBeat()}catch(e){n.error(this,"crashed",e),this._onEvent(s.EVENT_CRASHED,-1,e)}},h.prototype.createPlayer=function(e){n.debug(this,"createPlayer");var t=this.whenReady.then(function(){return e.id=this.flash._addPlayer(),this.emmiters[e.id]=e,e.id}.bind(this));return t.then(function(e){n.debug(this,"createPlayerSuccess",e)}.bind(this),function(e){n.error(this,"createPlayerError",e)}.bind(this)),t},t.exports=h},{"../audio-static":4,"../config":5,"../error/audio-error":6,"../lib/async/deferred":22,"../lib/net/error/loader-error":33,"../logger/logger":36,"./flash-interface":11,"./loader":15}],13:[function(e,t,r){function i(e){e.parentNode.removeChild(e)}var n=e("../lib/browser/swfobject"),o={__SWF_WRAPPER_CLASS:"fbn-swf-wrapper",__TIMEOUT:500,__TESTS:[function(e,t){return t.childNodes.length>1},function(e){return e.type&&"application/x-shockwave-flash"!=e.type},function(e){return!e.parentNode},function(e){return e.parentNode.className.indexOf("CTFnodisplay")>-1}],embedSWF:function(e,t,r,s,a,l,c,u,p,h,d){n&&n.addDomLoadEvent(function(){var f=document.getElementById(t);if(f){var y=document.createElement("div");y.className=o.__SWF_WRAPPER_CLASS,f.parentNode.replaceChild(y,f),y.appendChild(f),n.embedSWF(e,t,r,s,a,l,c,u,p,function(e){function r(e){if(d!==!1){n.removeSWF(t),i(y);var r=document.getElementById("CTFstack");r&&i(r);var o=document.body.lastChild;o&&"ujs_flashblock_placeholder"==o.className&&i(o)}e.success=!1,e.__fbn=!0,h(e)}if(e&&e.success!==!1){var s=e.ref,a=!1;try{a=s&&s.getSVGDocument&&s.getSVGDocument()}catch(l){}a?r(e):window.setTimeout(function(){for(var t=o.__TESTS,i=0,n=t.length;n>i;i++)if(t[i](s,y))return void r(e);h(e)},o.__TIMEOUT)}else h(e)})}})}};t.exports=o},{"../lib/browser/swfobject":27}],14:[function(e,t,r){var i=e("../lib/browser/swfobject"),n={__SWF_WRAPPER_CLASS:"femb-swf-wrapper",__TIMEOUT:500,embedSWF:function(e,t,r,o,s,a,l,c,u,p){i.addDomLoadEvent(function(){var h=document.getElementById(t);if(h){var d=document.createElement("div");d.className=n.__SWF_WRAPPER_CLASS,h.parentNode.replaceChild(d,h),d.appendChild(h),i.embedSWF(e,t,r,o,s,a,l,c,u,function(e){function t(e){e.success=!1,p(e)}if(e&&e.success!==!1){var r=e.ref,i=!1;try{i=r&&r.getSVGDocument&&r.getSVGDocument()}catch(o){}i?t(e):window.setTimeout(function(){p(e)},n.__TIMEOUT)}else p(e)})}})}};t.exports=n},{"../lib/browser/swfobject":27}],15:[function(e,t,r){var i=(e("../lib/browser/swfobject"),e("./flashblocknotifier")),n=e("./flashembedder"),o=e("../lib/browser/detect"),s="windows"===o.platform.os&&"safari"===o.browser.name,a="ya-flash-player-wrapper";t.exports=function(e,t,r,o,l,c,u,p){var h=document.createElement("div");h.id="wrapper_"+r,h.innerHTML='<div id="'+r+'"></div>',u=u||"1000",p=p||"1000";var d,f,y,m;return c&&!s?(d=n,f=u,y=p,m={allowscriptaccess:"always",wmode:"transparent"},h.className=a,h.style.cssText="position: relative; width: 100%; height: 100%; overflow: hidden;",c.appendChild(h)):(d=i,f=y="1",m={allowscriptaccess:"always"},h.style.cssText="position: absolute; left: -1px; top: -1px; width: 0px; height: 0px; overflow: hidden;",document.body.appendChild(h)),d.embedSWF(e,r,f,y,t,"",l,m,{},o),h}},{"../lib/browser/detect":26,"../lib/browser/swfobject":27,"./flashblocknotifier":13,"./flashembedder":14}],16:[function(e,t,r){t.exports=[{id:"custom",preamp:0,bands:[0,0,0,0,0,0,0,0,0,0]},{id:"default",preamp:0,bands:[0,0,0,0,0,0,0,0,0,0]},{id:"Classical",preamp:-.5,bands:[-.5,-.5,-.5,-.5,-.5,-.5,-3.5,-3.5,-3.5,-4.5]},{id:"Club",preamp:-3.359999895095825,bands:[-.5,-.5,4,2.5,2.5,2.5,1.5,-.5,-.5,-.5]},{id:"Dance",preamp:-2.1599998474121094,bands:[4.5,3.5,1,-.5,-.5,-2.5,-3.5,-3.5,-.5,-.5]},{id:"Full Bass",preamp:-3.5999999046325684,bands:[4,4.5,4.5,2.5,.5,-2,-4,-5,-5.5,-5.5]},{id:"Full Bass & Treble",preamp:-5.039999961853027,bands:[3.5,2.5,-.5,-3.5,-2,.5,4,5.5,6,6]},{id:"Full Treble",preamp:-6,bands:[-4.5,-4.5,-4.5,-2,1,5.5,8,8,8,8]},{id:"Laptop Speakers / Headphone",preamp:-4.079999923706055,bands:[2,5.5,2.5,-1.5,-1,.5,2,4.5,6,7]},{id:"Large Hall",preamp:-3.5999999046325684,bands:[5,5,2.5,2.5,-.5,-2,-2,-2,-.5,-.5]},{id:"Live",preamp:-2.6399998664855957,bands:[-2,-.5,2,2.5,2.5,2.5,2,1,1,1]},{id:"Party",preamp:-2.6399998664855957,bands:[3.5,3.5,-.5,-.5,-.5,-.5,-.5,-.5,3.5,3.5]},{id:"Pop",preamp:-3.119999885559082,bands:[-.5,2,3.5,4,2.5,-.5,-1,-1,-.5,-.5]},{id:"Reggae",preamp:-4.079999923706055,bands:[-.5,-.5,-.5,-2.5,-.5,3,3,-.5,-.5,-.5]},{id:"Rock",preamp:-5.039999961853027,bands:[4,2,-2.5,-4,-1.5,2,4,5.5,5.5,5.5]},{id:"Ska",preamp:-5.519999980926514,bands:[-1,-2,-2,-.5,2,2.5,4,4.5,5.5,4.5]},{id:"Soft",preamp:-4.799999713897705,bands:[2,.5,-.5,-1,-.5,2,4,4.5,5.5,6]},{id:"Soft Rock",preamp:-2.6399998664855957,bands:[2,2,1,-.5,-2,-2.5,-1.5,-.5,1,4]},{id:"Techno",preamp:-3.8399999141693115,bands:[4,2.5,-.5,-2.5,-2,-.5,4,4.5,4.5,4]}]},{}],17:[function(e,t,r){var i=e("../../lib/async/events"),n=function(e,t){i.call(this),this.preamp=new o(e,"highshelf",0),this.preamp.on("*",this._onBandEvent.bind(this,this.preamp));var r;this.bands=t.map(function(i,n){var s=new o(e,0==n?"lowshelf":n+1<t.length?"peaking":"highshelf",i);return s.on("*",this._onBandEvent.bind(this,s)),r?r.filter.connect(s.filter):this.preamp.filter.connect(s.filter),r=s,s}.bind(this)),this.input=this.preamp.filter,this.output=this.bands[this.bands.length-1].filter};i.mixin(n),n.EVENT_CHANGE="change",n.DEFAULT_BANDS=[60,170,310,600,1e3,3e3,6e3,12e3,14e3,16e3],
n.DEFAULT_PRESETS=e("./default.presets.js"),n.prototype._onBandEvent=function(e,t,r){this.trigger(t,e.getFreq(),r)},n.prototype.loadPreset=function(e){e.bands.forEach(function(e,t){this.bands[t].setValue(e)}.bind(this)),this.preamp.setValue(e.preamp)},n.prototype.savePreset=function(){return{preamp:this.preamp.getValue(),bands:this.bands.map(function(e){return e.getValue()})}},n.prototype.guessPreamp=function(){for(var e=0,t=0,r=this.bands.length;r>t;t++)e+=this.bands[t].getValue();return-e/2};var o=function(e,t,r){i.call(this),this.type=t,this.filter=e.createBiquadFilter(),this.filter.type=t,this.filter.frequency.value=r,this.filter.Q.value=1,this.filter.gain.value=0};i.mixin(o),o.prototype.getFreq=function(){return this.filter.frequency.value},o.prototype.getValue=function(){return this.filter.gain.value},o.prototype.setValue=function(e){this.filter.gain.value=e,this.trigger(n.EVENT_CHANGE,e)},t.exports=n},{"../../lib/async/events":23,"./default.presets.js":16}],18:[function(e,t,r){e("../export"),ya.Audio.fx.Equalizer=e("./equalizer")},{"../export":19,"./equalizer":17}],19:[function(e,t,r){e("../export"),ya.Audio.fx={}},{"../export":9}],20:[function(e,t,r){var i=e("../logger/logger"),n=new i("AudioHTML5"),o=e("../lib/browser/detect"),s=e("../lib/async/events"),a=e("../audio-static"),l=e("../error/playback-error"),c=1;r.available=function(){var e=!0;try{var t=document.createElement("audio"),r=t.canPlayType("audio/mpeg");r&&"no"!==r||(n.warn(this,"HTML5 detection failed with reason",r),e=!1)}catch(i){n.warn(this,"HTML5 detection failed with error",i),e=!1}return n.info(this,"detection",e),e}();try{var u=new AudioContext;n.info(this,"WenAudioAPI context created")}catch(p){u=null,n.info(this,"WenAudioAPI not detected")}var h=function(){this.name=c++,n.debug(this,"constructor"),s.call(this),this.on("*",function(e){e!==a.EVENT_PROGRESS&&n.debug(this,"onEvent",e)}.bind(this)),this.webAudioApi=!1,this.activeLoader=0,this.loaders=[],this.listeners=[],this._addLoader(),this._addLoader(),this._setActive(0)};s.mixin(h),h.type=h.prototype.type="html5",h.EVENT_NATIVE_PLAY="play",h.EVENT_NATIVE_PAUSE="pause",h.EVENT_NATIVE_TIMEUPDATE="timeupdate",h.EVENT_NATIVE_ENDED="ended",h.EVENT_NATIVE_DURATION="durationchange",h.EVENT_NATIVE_LOADING="progress",h.EVENT_NATIVE_META="loadedmetadata",h.EVENT_NATIVE_CANPLAY="canplay",h.EVENT_NATIVE_ERROR="error",h.prototype._addLoader=function(){n.debug(this,"_addLoader");var e=this,t=document.createElement("audio"),r=new s;t.loop=!1,t.preload=t.autobuffer="auto",t.startPlay=function(){t.removeEventListener(h.EVENT_NATIVE_META,t.startPlay),t.removeEventListener(h.EVENT_NATIVE_CANPLAY,t.startPlay);try{t.play(),n.debug(e,"startPlay")}catch(i){n.error(e,"crashed",i),r.trigger(a.EVENT_CRASHED,i)}};var i=0,o=function(){var e=+new Date;30>e-i||(i=e,r.trigger(a.EVENT_PROGRESS))};t.addEventListener(h.EVENT_NATIVE_PAUSE,r.trigger.bind(r,a.EVENT_PAUSE)),t.addEventListener(h.EVENT_NATIVE_PLAY,r.trigger.bind(r,a.EVENT_PLAY)),t.addEventListener(h.EVENT_NATIVE_ENDED,function(){r.trigger(a.EVENT_PROGRESS),r.trigger(a.EVENT_ENDED)}),t.addEventListener(h.EVENT_NATIVE_TIMEUPDATE,o),t.addEventListener(h.EVENT_NATIVE_DURATION,o),t.addEventListener(h.EVENT_NATIVE_LOADING,function(){if(o(),t.buffered.length){var e=t.buffered.end(0)-t.buffered.start(0);t.notLoading&&e&&(t.notLoading=!1,r.trigger(a.EVENT_LOADING)),e>=e.duration-.1&&r.trigger(a.EVENT_LOADED)}}),t.addEventListener(h.EVENT_NATIVE_ERROR,function(e){if(!t.fake){var i=new l(t.error?l.html5[t.error.code]:e instanceof Error?e.message:e,t.src);r.trigger(a.EVENT_ERROR,i)}}),r.on("*",function(r,i){var n=(e.loaders.length+t.index-e.activeLoader)%e.loaders.length;e.trigger(r,n,i)}),t.index=this.loaders.push(t)-1,this.listeners.push(r),this.webAudioApi&&this._addSource(t)},h.prototype._addSource=function(e,t){n.debug(this,"_addSource",e),t?t.disconnect():(t=u.createMediaElementSource(e),this.sources.push(t)),this.preprocessor?t.connect(this.preprocessor):t.connect(this.audioOutput)},h.prototype._setActive=function(e){n.debug(this,"_setActive",e),this.activeLoader=(this.activeLoader+e)%this.loaders.length,this.trigger(a.EVENT_SWAP,e),0!==e&&this.stop(e)},h.prototype._getLoader=function(e,t){t=t||0;var r=this.loaders[(this.activeLoader+t)%this.loaders.length];return e&&(r.removeEventListener(h.EVENT_NATIVE_META,r.startPlay),r.removeEventListener(h.EVENT_NATIVE_CANPLAY,r.startPlay)),r},h.prototype._play=function(e){n.debug(this,"_play"),e.readyState>e.HAVE_METADATA?e.startPlay():(e.addEventListener(h.EVENT_NATIVE_META,e.startPlay),e.addEventListener(h.EVENT_NATIVE_CANPLAY,e.startPlay))},h.prototype.toggleWebAudioAPI=function(e){return u?(n.info(this,"toggleWebAudioAPI",e),this.webAudioApi==e?e:(e?(this.audioOutput=u.createGain(),this.audioOutput.gain=this.volume,this.audioOutput.connect(u.destination),this.preprocessor&&this.preprocessor.output.connect(this.audioOutput),this.sources=this.sources||[],this.loaders.forEach(function(e,t){e.volume=1;var r=e.crossOrigin;if(e.crossOrigin="anonymous",this._addSource(e,this.sources[t]),!r){var i=e.currentTime,n=e.paused;e.load(),e.currentTime=i,n||e.play()}}.bind(this))):this.audioOutput&&(this.preprocessor&&this.preprocessor.output.disconnect(),this.audioOutput.disconnect(),delete this.audioOutput,this.sources.forEach(function(e){e.disconnect()}),this.loaders.forEach(function(e,t){e.volume=this.volume;var r=this.sources[t];r&&r.connect(u.destination)}.bind(this))),this.webAudioApi=e,e)):(n.warn(this,"toggleWebAudioAPIError",e),!1)},h.prototype.setAudioPreprocessor=function(e){if(!this.webAudioApi)return void n.warn(this,"setAudioPreprocessorError",e);if(n.info(this,"setAudioPreprocessor"),this.preprocessor!==e){if(this.preprocessor&&this.preprocessor.output.disconnect(),this.preprocessor=e,!e)return void this.sources.forEach(function(e){e.disconnect(),e.connect(this.audioOutput)}.bind(this));this.sources.forEach(function(t){t.disconnect(),t.connect(e.input)}),e.output.connect(this.audioOutput)}},h.prototype.play=function(e,t){n.info(this,"play",e);var r=this._getLoader(!0);r.fake=!1,r.src=e,r._src=e,r.notLoading=!0,r.load(),this._play(r)},h.prototype.pause=function(){n.info(this,"pause");var e=this._getLoader(!0);e.pause()},h.prototype.resume=function(){n.info(this,"resume");var e=this._getLoader(!0);this._play(e)},h.prototype.stop=function(e){n.info(this,"stop");var t=this._getLoader(!0,e||0);t.fake=!0,t.src="",t._src=!1,t.notLoading=!0,t.load(),this.trigger(a.EVENT_STOP,e)},h.prototype.preload=function(e,t,r){n.info(this,"preload",e,r),r=null==r?1:r;var i=this._getLoader(!0,r);i.src=e,i._src=e,i.notLoading=!0,i.load()},h.prototype.isPreloaded=function(e,t){t=null==t?1:t;var r=this._getLoader(!1,t);return r._src===e&&!r.notLoading},h.prototype.isPreloading=function(e,t){t=null==t?1:t;var r=this._getLoader(!1,t);return r._src===e},h.prototype.playPreloaded=function(e){n.info(this,"playPreloaded",e),e=null==e?1:e;var t=this._getLoader(!1,e);return t._src?(this._setActive(e),this._play(this._getLoader(!0,0)),!0):!1},h.prototype.getPosition=function(){return this._getLoader().currentTime},h.prototype.setPosition=function(e){n.info(this,"setPosition",e),this._getLoader().currentTime=e-.001},h.prototype.getDuration=function(e){return this._getLoader(!1,e).duration},h.prototype.getLoaded=function(e){var t=this._getLoader(!1,e);return t.buffered.length?t.buffered.end(0)-t.buffered.start(0):0},h.prototype.getVolume=function(){return this.volume},h.prototype.setVolume=function(e){n.info(this,"setVolume",e),this.volume=e,this.webAudioApi?this.audioOutput.gain.value=e:this.loaders.forEach(function(t){t.volume=e}),this.trigger(a.EVENT_VOLUME)},h.prototype.getSrc=function(e){return this._getLoader(!1,e)._src},h.prototype.isDeviceVolume=function(){return o.onlyDeviceVolume},h.prototype._logger=function(){try{return{main:this.getSrc(0),preloader:this.getSrc(1)}}catch(e){return""}},r.audioContext=u,r.AudioImplementation=h},{"../audio-static":4,"../error/playback-error":8,"../lib/async/events":23,"../lib/browser/detect":26,"../logger/logger":36}],21:[function(e,t,r){var i=e("./export");e("./error/export"),e("./lib/net/error/export"),e("./logger/export"),e("./fx/equalizer/export"),t.exports=i},{"./error/export":7,"./export":9,"./fx/equalizer/export":18,"./lib/net/error/export":32,"./logger/export":35}],22:[function(e,t,r){var i=e("./promise"),n=e("../noop"),o=function(){var e=this,t=new i(function(t,r){e.resolve=t,e.reject=r}),r=t.then(function(t){return e.resolved=!0,e.pending=!1,t},function(t){throw e.rejected=!0,e.pending=!1,t});r["catch"](n),this.pending=!0,this.rejected=!1,this.promise=function(){return r}};o.when=function(){var e=new o,t=[].slice.call(arguments),r=t.length,i=function(){r--,0>=r&&e.resolve()};return t.forEach(function(t){t.then(i,e.reject)}),t=null,e.promise.abort=e.reject,e.promise()},t.exports=o},{"../noop":34,"./promise":24}],23:[function(e,t,r){var i=e("../data/merge"),n="_listeners",o="_muted",s=function(){this[n]={},this[o]=!1};s.mixin=function(e){return i(e.prototype,s.prototype,!0),e},s.eventize=function(e){return i(e,s.prototype,!0),s.call(e),e},s.prototype.on=function(e,t){return this[n][e]||(this[n][e]=[]),this[n][e].push(t),this},s.prototype.off=function(e,t){if(!this[n][e])return this;if(!t)return delete this[n][e],this;for(var r=this[n][e],i=0,o=r.length;o>i;i++)if(r[i]===t||r[i].callback===t){r.splice(i,1),r.length||delete this[n][e];break}return this},s.prototype.once=function(e,t){var r=this,i=function(){r.off(e,i),t.apply(this,arguments)};return i.callback=t,r.on(e,i),this},s.prototype.trigger=function(e,t){if(this[o])return this;if(t=[].slice.call(arguments,1),"*"!==e&&s.prototype.trigger.apply(this,["*",e].concat(t)),!this[n][e])return this;for(var r=[].concat(this[n][e]),i=0,a=r.length;a>i;i++)r[i].apply(null,t);return this},s.prototype.clearListeners=function(){for(var e in this[n])this[n].hasOwnProperty(e)&&delete this[n][e];return this},s.prototype.pipeEvents=function(e){return this.on("*",s.prototype.trigger.bind(e)),this},s.prototype.muteEvents=function(){return this[o]=!0,this},s.prototype.unmuteEvents=function(){return delete this[o],this},t.exports=s},{"../data/merge":31}],24:[function(e,t,r){var i,n=e("vow"),o=e("../browser/detect");i="function"!=typeof window.Promise||"msie"===o.browser.name||"edge"===o.browser.name?n.Promise:window.Promise,t.exports=i},{"../browser/detect":26,vow:2}],25:[function(e,t,r){var i=e("../noop"),n=e("./promise");t.exports=function(e){var t=n.reject(e);return t["catch"](i),t}},{"../noop":34,"./promise":24}],26:[function(e,t,r){var i=navigator.userAgent.toLowerCase(),n=/(webkit)[ \/]([\w.]+)/,o=/(yabrowser)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,a=/(msie) ([\w.]+)/,l=/(edge)\/([\w.]+)/,c=/(mozilla)(?:.*? rv:([\w.]+))?/,u=/^((?!chrome).)*version\/([\d\w\.]+).*(safari)/,p=u.exec(i)||o.exec(i)||l.exec(i)||n.exec(i)||s.exec(i)||a.exec(i)||i.indexOf("compatible")<0&&c.exec(i)||[],h={name:p[1]||"",version:p[2]||"0"};"safari"===p[3]&&(h.name=p[3]),"msie"===h.name&&(document.documentMode?h.documentMode=document.documentMode:(h.documentMode=5,document.compatMode&&"CSS1Compat"===document.compatMode&&(h.documentMode=7)));var d=/(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/,f=/(ipad|playbook)/,y=/(android)/,m=/(mobile)/;v=d.exec(i)||[];var E=f.exec(i)||!m.exec(i)&&y.exec(i)||[];v[1]&&(v[1]=v[1].replace(/\s/g,"_"));var v={type:v[1]||"",tablet:!!E[1],mobile:v[1]&&!E[1]||!1};v.type||(v.type="pc"),v.os=v.type,"ipad"===v.type||"iphone"===v.type||"ipod"===v.type?v.os="ios":"android"===v.type?v.os="android":-1!==navigator.appVersion.indexOf("Win")?(v.os="windows",v.version=navigator.userAgent.match(/win[^ ]* ([^;]*)/i),v.version=v.version&&v.version[1]):-1!==navigator.appVersion.indexOf("Mac")?v.os="macos":-1!==navigator.appVersion.indexOf("X11")?v.os="unix":-1!==navigator.appVersion.indexOf("Linux")&&(v.os="linux");var _=!0;try{var g=document.createElement("audio");g.volume=.63,_=Math.abs(g.volume-.63)>.01}catch(T){_=!0}var b={browser:h,platform:v,onlyDeviceVolume:_};t.exports=b},{}],27:[function(e,t,r){var i=function(){function e(){if(!G){try{var e=k.getElementsByTagName("body")[0].appendChild(E("span"));e.parentNode.removeChild(e)}catch(t){return}G=!0;for(var r=B.length,i=0;r>i;i++)B[i]()}}function t(e){G?e():B[B.length]=e}function r(e){if(typeof j.addEventListener!=R)j.addEventListener("load",e,!1);else if(typeof k.addEventListener!=R)k.addEventListener("load",e,!1);else if(typeof j.attachEvent!=R)v(j,"onload",e);else if("function"==typeof j.onload){var t=j.onload;j.onload=function(){t(),e()}}else j.onload=e}function n(){M?o():s()}function o(){var e=k.getElementsByTagName("body")[0],t=E(V);t.setAttribute("type",x);var r=e.appendChild(t);if(r){var i=0;!function(){if(typeof r.GetVariable!=R){var n=r.GetVariable("$version");n&&(n=n.split(" ")[1].split(","),$.pv=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)])}else if(10>i)return i++,void setTimeout(arguments.callee,10);e.removeChild(t),r=null,s()}()}else s()}function s(){var e=H.length;if(e>0)for(var t=0;e>t;t++){var r=H[t].id,i=H[t].callbackFn,n={success:!1,id:r};if($.pv[0]>0){var o=m(r);if(o)if(!_(H[t].swfVersion)||$.wk&&$.wk<312)if(H[t].expressInstall&&l()){var s={};s.data=H[t].expressInstall,s.width=o.getAttribute("width")||"0",s.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(s.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(s.align=o.getAttribute("align"));for(var p={},h=o.getElementsByTagName("param"),d=h.length,f=0;d>f;f++)"movie"!=h[f].getAttribute("name").toLowerCase()&&(p[h[f].getAttribute("name")]=h[f].getAttribute("value"));c(s,p,r,i)}else u(o),i&&i(n);else T(r,!0),i&&(n.success=!0,n.ref=a(r),i(n))}else if(T(r,!0),i){var y=a(r);y&&typeof y.SetVariable!=R&&(n.success=!0,n.ref=y),i(n)}}}function a(e){var t=null,r=m(e);if(r&&"OBJECT"==r.nodeName)if(typeof r.SetVariable!=R)t=r;else{var i=r.getElementsByTagName(V)[0];i&&(t=i)}return t}function l(){return!Y&&_("6.0.65")&&($.win||$.mac)&&!($.wk&&$.wk<312)}function c(e,t,r,i){Y=!0,N=i||null,P={success:!1,id:r};var n=m(r);if(n){"OBJECT"==n.nodeName?(w=p(n),A=null):(w=n,A=r),e.id=D,(typeof e.width==R||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==R||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),k.title=k.title.slice(0,47)+" - Flash Player Installation";var o=$.ie&&$.win?"ActiveX":"PlugIn",s="MMredirectURL="+j.location.toString().replace(/&/g,"%26")+"&MMplayerType="+o+"&MMdoctitle="+k.title;if(typeof t.flashvars!=R?t.flashvars+="&"+s:t.flashvars=s,$.ie&&$.win&&4!=n.readyState){var a=E("div");r+="SWFObjectNew",a.setAttribute("id",r),n.parentNode.insertBefore(a,n),n.style.display="none",function(){4==n.readyState?n.parentNode.removeChild(n):setTimeout(arguments.callee,10)}()}h(e,t,r)}}function u(e){if($.ie&&$.win&&4!=e.readyState){var t=E("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(p(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(p(e),e)}function p(e){var t=E("div");if($.win&&$.ie)t.innerHTML=e.innerHTML;else{var r=e.getElementsByTagName(V)[0];if(r){var i=r.childNodes;if(i)for(var n=i.length,o=0;n>o;o++)1==i[o].nodeType&&"PARAM"==i[o].nodeName||8==i[o].nodeType||t.appendChild(i[o].cloneNode(!0))}}return t}function h(e,t,r){var i,n=m(r);if($.wk&&$.wk<312)return i;if(n)if(typeof e.id==R&&(e.id=r),$.ie&&$.win){var o="";for(var s in e)e[s]!=Object.prototype[s]&&("data"==s.toLowerCase()?t.movie=e[s]:"styleclass"==s.toLowerCase()?o+=' class="'+e[s]+'"':"classid"!=s.toLowerCase()&&(o+=" "+s+'="'+e[s]+'"'));var a="";for(var l in t)t[l]!=Object.prototype[l]&&(a+='<param name="'+l+'" value="'+t[l]+'" />');n.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+o+">"+a+"</object>",U[U.length]=e.id,i=m(e.id)}else{var c=E(V);c.setAttribute("type",x);for(var u in e)e[u]!=Object.prototype[u]&&("styleclass"==u.toLowerCase()?c.setAttribute("class",e[u]):"classid"!=u.toLowerCase()&&c.setAttribute(u,e[u]));for(var p in t)t[p]!=Object.prototype[p]&&"movie"!=p.toLowerCase()&&d(c,p,t[p]);n.parentNode.replaceChild(c,n),i=c}return i}function d(e,t,r){var i=E("param");i.setAttribute("name",t),i.setAttribute("value",r),e.appendChild(i)}function f(e){var t=m(e);t&&"OBJECT"==t.nodeName&&($.ie&&$.win?(t.style.display="none",function(){4==t.readyState?y(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function y(e){var t=m(e);if(t){for(var r in t)"function"==typeof t[r]&&(t[r]=null);t.parentNode.removeChild(t)}}function m(e){var t=null;try{t=k.getElementById(e)}catch(r){}return t}function E(e){return k.createElement(e)}function v(e,t,r){e.attachEvent(t,r),W[W.length]=[e,t,r]}function _(e){var t=$.pv,r=e.split(".");return r[0]=parseInt(r[0],10),r[1]=parseInt(r[1],10)||0,r[2]=parseInt(r[2],10)||0,t[0]>r[0]||t[0]==r[0]&&t[1]>r[1]||t[0]==r[0]&&t[1]==r[1]&&t[2]>=r[2]?!0:!1}function g(e,t,r,i){if(!$.ie||!$.mac){var n=k.getElementsByTagName("head")[0];if(n){var o=r&&"string"==typeof r?r:"screen";if(i&&(S=null,L=null),!S||L!=o){var s=E("style");s.setAttribute("type","text/css"),s.setAttribute("media",o),S=n.appendChild(s),$.ie&&$.win&&typeof k.styleSheets!=R&&k.styleSheets.length>0&&(S=k.styleSheets[k.styleSheets.length-1]),L=o}$.ie&&$.win?S&&typeof S.addRule==V&&S.addRule(e,t):S&&typeof k.createTextNode!=R&&S.appendChild(k.createTextNode(e+" {"+t+"}"))}}}function T(e,t){if(q){var r=t?"visible":"hidden";G&&m(e)?m(e).style.visibility=r:g("#"+e,"visibility:"+r)}}function b(e){var t=/[\\\"<>\.;]/,r=null!=t.exec(e);return r&&typeof encodeURIComponent!=R?encodeURIComponent(e):e}var w,A,N,P,S,L,R="undefined",V="object",O="Shockwave Flash",I="ShockwaveFlash.ShockwaveFlash",x="application/x-shockwave-flash",D="SWFObjectExprInst",C="onreadystatechange",j=window,k=document,F=navigator,M=!1,B=[n],H=[],U=[],W=[],G=!1,Y=!1,q=!0,$=function(){var e=typeof k.getElementById!=R&&typeof k.getElementsByTagName!=R&&typeof k.createElement!=R,t=F.userAgent.toLowerCase(),r=F.platform.toLowerCase(),i=r?/win/.test(r):/win/.test(t),n=r?/mac/.test(r):/mac/.test(t),o=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,s=!1,a=[0,0,0],l=null;if(typeof F.plugins!=R&&typeof F.plugins[O]==V)l=F.plugins[O].description,!l||typeof F.mimeTypes!=R&&F.mimeTypes[x]&&!F.mimeTypes[x].enabledPlugin||(M=!0,s=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),a[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),a[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),a[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof j.ActiveXObject!=R)try{var c=new ActiveXObject(I);c&&(l=c.GetVariable("$version"),l&&(s=!0,l=l.split(" ")[1].split(","),a=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]))}catch(u){}return{w3:e,pv:a,wk:o,ie:s,win:i,mac:n}}();(function(){$.w3&&((typeof k.readyState!=R&&"complete"==k.readyState||typeof k.readyState==R&&(k.getElementsByTagName("body")[0]||k.body))&&e(),G||(typeof k.addEventListener!=R&&k.addEventListener("DOMContentLoaded",e,!1),$.ie&&$.win&&(k.attachEvent(C,function(){"complete"==k.readyState&&(k.detachEvent(C,arguments.callee),e())}),j==top&&!function(){if(!G){try{k.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}e()}}()),$.wk&&!function(){return G?void 0:/loaded|complete/.test(k.readyState)?void e():void setTimeout(arguments.callee,0)}(),r(e)))})(),function(){$.ie&&$.win&&window.attachEvent("onunload",function(){for(var e=W.length,t=0;e>t;t++)W[t][0].detachEvent(W[t][1],W[t][2]);for(var r=U.length,n=0;r>n;n++)f(U[n]);for(var o in $)$[o]=null;$=null;for(var s in i)i[s]=null;i=null})}();return{registerObject:function(e,t,r,i){if($.w3&&e&&t){var n={};n.id=e,n.swfVersion=t,n.expressInstall=r,n.callbackFn=i,H[H.length]=n,T(e,!1)}else i&&i({success:!1,id:e})},getObjectById:function(e){return $.w3?a(e):void 0},embedSWF:function(e,r,i,n,o,s,a,u,p,d){var f={success:!1,id:r};$.w3&&!($.wk&&$.wk<312)&&e&&r&&i&&n&&o?(T(r,!1),t(function(){i+="",n+="";var t={};if(p&&typeof p===V)for(var y in p)t[y]=p[y];t.data=e,t.width=i,t.height=n;var m={};if(u&&typeof u===V)for(var E in u)m[E]=u[E];if(a&&typeof a===V)for(var v in a)typeof m.flashvars!=R?m.flashvars+="&"+v+"="+a[v]:m.flashvars=v+"="+a[v];if(_(o)){var g=h(t,m,r);t.id==r&&T(r,!0),f.success=!0,f.ref=g}else{if(s&&l())return t.data=s,void c(t,m,r,d);T(r,!0)}d&&d(f)})):d&&d(f)},switchOffAutoHideShow:function(){q=!1},ua:$,getFlashPlayerVersion:function(){return{major:$.pv[0],minor:$.pv[1],release:$.pv[2]}},hasFlashPlayerVersion:_,createSWF:function(e,t,r){return $.w3?h(e,t,r):void 0},showExpressInstall:function(e,t,r,i){$.w3&&l()&&c(e,t,r,i)},removeSWF:function(e){$.w3&&f(e)},createCSS:function(e,t,r,i){$.w3&&g(e,t,r,i)},addDomLoadEvent:t,addLoadEvent:r,getQueryParamValue:function(e){var t=k.location.search||k.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return b(t);for(var r=t.split("&"),i=0;i<r.length;i++)if(r[i].substring(0,r[i].indexOf("="))==e)return b(r[i].substring(r[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(Y){var e=m(D);e&&w&&(e.parentNode.replaceChild(w,e),A&&(T(A,!0),$.ie&&$.win&&(w.style.display="block")),N&&N(P)),Y=!1}}}}();t.exports=i},{}],28:[function(e,t,r){var i=function(e){var t=function(){};return t.prototype=e.prototype,new t};t.exports=i},{}],29:[function(e,t,r){var i=e("./clear-instance"),n=function(e,t){var r=new Error(e,t);r.name=this.name,this.message=r.message,this.stack=r.stack};n.create=function(e){var t=i(n);return t.name=e,t},n.prototype=i(Error),n.prototype.name="ErrorClass",t.exports=n},{"./clear-instance":28}],30:[function(e,t,r){var i=e("../async/events"),n=function(e){if(e){for(var t in e)"_"===t[0]||"function"!=typeof e[t]||e[t]===Object.prototype[t]||e.hasOwnProperty(t)||i.prototype.hasOwnProperty(t)||(this[t]=e[t].bind(e));e.pipeEvents&&(i.call(this),this.on=i.prototype.on,this.once=i.prototype.once,this.off=i.prototype.off,this.clearListeners=i.prototype.clearListeners,e.pipeEvents(this))}};n.exportStatic=function(e,t,r){r=r||[],Object.keys(e).forEach(function(i){e.hasOwnProperty(i)&&"_"!==i[0]&&"prototype"!==i&&-1===r.indexOf(i)&&(t[i]=e[i])})},n.createClass=function(e,t){var r=function(){var t=function(){};t.prototype=e.prototype;var r=new t;return e.apply(r,arguments),r._proxy()},i=function(){};i.prototype=(t||n).prototype,r.prototype=new i;var o;for(var s in e.prototype)o=e.prototype[s],Object.prototype[s]!=o&&"function"!=typeof o&&"_"!==s[0]&&(r.prototype[s]=o);var a=function(e){var t=n.prototype;n.prototype=r.prototype;var i=new n(e);return n.prototype=t,i};return e.prototype._proxy=function(){return this.__proxy||(this.__proxy=a(this)),this.__proxy},n.exportStatic(e,r),r},t.exports=n},{"../async/events":23}],31:[function(e,t,r){var i=function(e){var t,r,i=[].slice.call(arguments,1);if(i[i.length-1]===!0)t=e,i.pop();else{t={};for(r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}for(var n=0,o=i.length;o>n;n++)for(r in i[n])i[n].hasOwnProperty(r)&&(t[r]=i[n][r]);return t};t.exports=i},{}],32:[function(e,t,r){e("../../../export");var i=e("./loader-error");ya.Audio.LoaderError=i},{"../../../export":9,"./loader-error":33}],33:[function(e,t,r){var i=e("../../class/error-class"),n=function(e){i.call(this,e)};n.prototype=i.create("LoaderError"),n.TIMEOUT="request timeout",n.FAILED="request failed",t.exports=n},{"../../class/error-class":29}],34:[function(e,t,r){t.exports=function(){}},{}],35:[function(e,t,r){e("../export");var i=e("./logger");ya.Audio.Logger=i},{"../export":9,"./logger":36}],36:[function(e,t,r){var i=["debug","log","info","warn","error","trace"],n=e("../lib/noop"),o=function(e){this.channel=e};o.ignores=[],o.logLevels=[],o.prototype.debug=n,o.prototype.log=n,o.prototype.info=n,o.prototype.warn=n,o.prototype.error=n,o.prototype.trace=n,o.log=function(e,t,r){var i=[].slice.call(arguments,3).map(function(e){return e&&e._logger&&e._logger()||e}),n={timestamp:+new Date,level:e,channel:t,context:r,message:i};o.ignores[t]||-1===o.logLevels.indexOf(e)||o._dumpEntry(n)},o._dumpEntry=function(e){try{var t=e.level,r=e.context&&(e.context.taskName||e.context.name),i=e.context&&(e.context._logger?e.context._logger():"");"function"!=typeof console[t]?console.log.apply(console,[t.toUpperCase(),o._formatTimestamp(e.timestamp),"["+e.channel+(r?":"+r:"")+"]",i].concat(e.message)):console[t].apply(console,[o._formatTimestamp(e.timestamp),"["+e.channel+(r?":"+r:"")+"]",i].concat(e.message))}catch(n){}},o._formatTimestamp=function(e){var t=new Date(e),r=t.getMilliseconds();return r=r>100?r:r>10?"0"+r:"00"+r,t.toLocaleTimeString()+"."+r},i.forEach(function(e){o.prototype[e]=function(){var t=[].slice.call(arguments);t.unshift(this.channel),t.unshift(e),o.log.apply(o,t)}}),t.exports=o},{"../lib/noop":34}]},{},[21]);
//# sourceMappingURL=dist/index.map.json
