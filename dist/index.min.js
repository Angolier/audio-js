!function e(t,i,r){function n(s,a){if(!i[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=i[s]={exports:{}};t[s][0].call(u.exports,function(e){var i=t[s][1][e];return n(i?i:e)},u,u.exports,e,t,i,r)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(e,t,i){function r(){u=!1,a.length?c=a.concat(c):h=-1,c.length&&n()}function n(){if(!u){var e=setTimeout(r);u=!0;for(var t=c.length;t;){for(a=c,c=[];++h<t;)a&&a[h].run();h=-1,t=c.length}a=null,u=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function s(){}var a,l=t.exports={},c=[],u=!1,h=-1;l.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];c.push(new o(e,t)),1!==c.length||u||setTimeout(n,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=s,l.addListener=s,l.once=s,l.off=s,l.removeListener=s,l.removeAllListeners=s,l.emit=s,l.binding=function(e){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(e){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],2:[function(e,t,i){(function(e){!function(i){var r,n=function(){var t=[],r=function(e){return 1===t.push(e)},n=function(){var e=t,i=0,r=t.length;for(t=[];r>i;)e[i++]()};if("function"==typeof setImmediate)return function(e){r(e)&&setImmediate(n)};if("object"==typeof e&&e.nextTick)return function(t){r(t)&&e.nextTick(n)};var o=i.MutationObserver||i.WebKitMutationObserver;if(o){var s=1,a=document.createTextNode("");return new o(n).observe(a,{characterData:!0}),function(e){r(e)&&(a.data=s*=-1)}}if(i.postMessage){var l=!0;if(i.attachEvent){var c=function(){l=!1};i.attachEvent("onmessage",c),i.postMessage("__checkAsync","*"),i.detachEvent("onmessage",c)}if(l){var u="__promise"+ +new Date,h=function(e){e.data===u&&(e.stopPropagation&&e.stopPropagation(),n())};return i.addEventListener?i.addEventListener("message",h,!0):i.attachEvent("onmessage",h),function(e){r(e)&&i.postMessage(u,"*")}}}var p=i.document;if("onreadystatechange"in p.createElement("script")){var d=function(){var e=p.createElement("script");e.onreadystatechange=function(){e.parentNode.removeChild(e),e=e.onreadystatechange=null,n()},(p.documentElement||p.body).appendChild(e)};return function(e){r(e)&&d()}}return function(e){r(e)&&setTimeout(n,0)}}(),o=function(e){n(function(){throw e})},s=function(e){return"function"==typeof e},a=function(e){return null!==e&&"object"==typeof e},l=Object.prototype.toString,c=Array.isArray||function(e){return"[object Array]"===l.call(e)},u=function(e){for(var t=[],i=0,r=e.length;r>i;)t.push(i++);return t},h=Object.keys||function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t},p=function(e){var t=function(t){this.name=e,this.message=t};return t.prototype=new Error,t},d=function(e,t){return function(i){e.call(this,i,t)}},f=function(){this._promise=new y};f.prototype={promise:function(){return this._promise},resolve:function(e){this._promise.isResolved()||this._promise._resolve(e)},reject:function(e){this._promise.isResolved()||(_.isPromise(e)?(e=e.then(function(e){var t=_.defer();return t.reject(e),t.promise()}),this._promise._resolve(e)):this._promise._reject(e))},notify:function(e){this._promise.isResolved()||this._promise._notify(e)}};var m={PENDING:0,RESOLVED:1,FULFILLED:2,REJECTED:3},y=function(e){if(this._value=r,this._status=m.PENDING,this._fulfilledCallbacks=[],this._rejectedCallbacks=[],this._progressCallbacks=[],e){var t=this,i=e.length;e(function(e){t.isResolved()||t._resolve(e)},i>1?function(e){t.isResolved()||t._reject(e)}:r,i>2?function(e){t.isResolved()||t._notify(e)}:r)}};y.prototype={valueOf:function(){return this._value},isResolved:function(){return this._status!==m.PENDING},isFulfilled:function(){return this._status===m.FULFILLED},isRejected:function(){return this._status===m.REJECTED},then:function(e,t,i,r){var n=new f;return this._addCallbacks(n,e,t,i,r),n.promise()},"catch":function(e,t){return this.then(r,e,t)},fail:function(e,t){return this.then(r,e,t)},always:function(e,t){var i=this,r=function(){return e.call(this,i)};return this.then(r,r,t)},progress:function(e,t){return this.then(r,r,e,t)},spread:function(e,t,i){return this.then(function(t){return e.apply(this,t)},t,i)},done:function(e,t,i,r){this.then(e,t,i,r).fail(o)},delay:function(e){var t,i=this.then(function(i){var r=new f;return t=setTimeout(function(){r.resolve(i)},e),r.promise()});return i.always(function(){clearTimeout(t)}),i},timeout:function(e){var t=new f,i=setTimeout(function(){t.reject(new _.TimedOutError("timed out"))},e);return this.then(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise().always(function(){clearTimeout(i)}),t.promise()},_vow:!0,_resolve:function(e){if(!(this._status>m.RESOLVED)){if(e===this)return void this._reject(TypeError("Can't resolve promise with itself"));if(this._status=m.RESOLVED,e&&e._vow)return void(e.isFulfilled()?this._fulfill(e.valueOf()):e.isRejected()?this._reject(e.valueOf()):e.then(this._fulfill,this._reject,this._notify,this));if(a(e)||s(e)){var t;try{t=e.then}catch(i){return void this._reject(i)}if(s(t)){var r=this,n=!1;try{t.call(e,function(e){n||(n=!0,r._resolve(e))},function(e){n||(n=!0,r._reject(e))},function(e){r._notify(e)})}catch(i){n||this._reject(i)}return}}this._fulfill(e)}},_fulfill:function(e){this._status>m.RESOLVED||(this._status=m.FULFILLED,this._value=e,this._callCallbacks(this._fulfilledCallbacks,e),this._fulfilledCallbacks=this._rejectedCallbacks=this._progressCallbacks=r)},_reject:function(e){this._status>m.RESOLVED||(this._status=m.REJECTED,this._value=e,this._callCallbacks(this._rejectedCallbacks,e),this._fulfilledCallbacks=this._rejectedCallbacks=this._progressCallbacks=r)},_notify:function(e){this._callCallbacks(this._progressCallbacks,e)},_addCallbacks:function(e,t,i,n,o){i&&!s(i)?(o=i,i=r):n&&!s(n)&&(o=n,n=r);var a;this.isRejected()||(a={defer:e,fn:s(t)?t:r,ctx:o},this.isFulfilled()?this._callCallbacks([a],this._value):this._fulfilledCallbacks.push(a)),this.isFulfilled()||(a={defer:e,fn:i,ctx:o},this.isRejected()?this._callCallbacks([a],this._value):this._rejectedCallbacks.push(a)),this._status<=m.RESOLVED&&this._progressCallbacks.push({defer:e,fn:n,ctx:o})},_callCallbacks:function(e,t){var i=e.length;if(i){var r=this.isResolved(),o=this.isFulfilled();n(function(){for(var n,s,a,l=0;i>l;)if(n=e[l++],s=n.defer,a=n.fn){var c,u=n.ctx;try{c=u?a.call(u,t):a(t)}catch(h){s.reject(h);continue}r?s.resolve(c):s.notify(c)}else r?o?s.resolve(t):s.reject(t):s.notify(t)})}}};var E={cast:function(e){return _.cast(e)},all:function(e){return _.all(e)},race:function(e){return _.anyResolved(e)},resolve:function(e){return _.resolve(e)},reject:function(e){return _.reject(e)}};for(var v in E)E.hasOwnProperty(v)&&(y[v]=E[v]);var _={Deferred:f,Promise:y,defer:function(){return new f},when:function(e,t,i,r,n){return _.cast(e).then(t,i,r,n)},fail:function(e,t,i){return _.when(e,r,t,i)},always:function(e,t,i){return _.when(e).always(t,i)},progress:function(e,t,i){return _.when(e).progress(t,i)},spread:function(e,t,i,r){return _.when(e).spread(t,i,r)},done:function(e,t,i,r,n){_.when(e).done(t,i,r,n)},isPromise:function(e){return a(e)&&s(e.then)},cast:function(e){return e&&e._vow?e:_.resolve(e)},valueOf:function(e){return e&&s(e.valueOf)?e.valueOf():e},isFulfilled:function(e){return e&&s(e.isFulfilled)?e.isFulfilled():!0},isRejected:function(e){return e&&s(e.isRejected)?e.isRejected():!1},isResolved:function(e){return e&&s(e.isResolved)?e.isResolved():!0},resolve:function(e){var t=_.defer();return t.resolve(e),t.promise()},fulfill:function(e){var t=_.defer(),i=t.promise();return t.resolve(e),i.isFulfilled()?i:i.then(null,function(e){return e})},reject:function(e){var t=_.defer();return t.reject(e),t.promise()},invoke:function(e,t){var r,n=Math.max(arguments.length-1,0);if(n){r=Array(n);for(var o=0;n>o;)r[o++]=arguments[o]}try{return _.resolve(r?e.apply(i,r):e.call(i))}catch(s){return _.reject(s)}},all:function(e){var t=new f,i=c(e),r=i?u(e):h(e),n=r.length,o=i?[]:{};if(!n)return t.resolve(o),t.promise();var s=n;return _._forEach(e,function(e,i){o[r[i]]=e,--s||t.resolve(o)},t.reject,t.notify,t,r),t.promise()},allResolved:function(e){var t=new f,i=c(e),r=i?u(e):h(e),n=r.length,o=i?[]:{};if(!n)return t.resolve(o),t.promise();var s=function(){--n||t.resolve(e)};return _._forEach(e,s,s,t.notify,t,r),t.promise()},allPatiently:function(e){return _.allResolved(e).then(function(){var t,i,r,n,o=c(e),s=o?u(e):h(e),a=s.length,l=0;if(!a)return o?[]:{};for(;a>l;)r=s[l++],n=e[r],_.isRejected(n)?(t||(t=o?[]:{}),o?t.push(n.valueOf()):t[r]=n.valueOf()):t||((i||(i=o?[]:{}))[r]=_.valueOf(n));if(t)throw t;return i})},any:function(e){var t=new f,i=e.length;if(!i)return t.reject(Error()),t.promise();var r,n=0;return _._forEach(e,t.resolve,function(e){n||(r=e),++n===i&&t.reject(r)},t.notify,t),t.promise()},anyResolved:function(e){var t=new f,i=e.length;return i?(_._forEach(e,t.resolve,t.reject,t.notify,t),t.promise()):(t.reject(Error()),t.promise())},delay:function(e,t){return _.resolve(e).delay(t)},timeout:function(e,t){return _.resolve(e).timeout(t)},_forEach:function(e,t,i,r,n,o){for(var s=o?o.length:e.length,a=0;s>a;)_.when(e[o?o[a]:a],d(t,a),i,r,n),++a},TimedOutError:p("TimedOut")},g=!0;"object"==typeof t&&"object"==typeof t.exports&&(t.exports=_,g=!1),"object"==typeof modules&&s(modules.define)&&(modules.define("vow",function(e){e(_)}),g=!1),"function"==typeof define&&(define(function(e,t,i){i.exports=_}),g=!1),g&&(i.vow=_)}(this)}).call(this,e("_process"))},{_process:1}],3:[function(e,t,i){var r=e("./logger/logger"),n=new r("AudioPlayer"),o=e("./lib/async/events"),s=e("./lib/async/deferred"),a=e("./lib/browser/detect"),l=e("./config"),c=e("./lib/data/merge"),u=e("./lib/async/reject"),h=e("./error/audio-error"),p=e("./audio-static"),d=1,f={html5:e("./html5/audio-html5"),flash:e("./flash/audio-flash")},m="@"+a.platform.version+" "+a.platform.os+":"+a.browser.name+"/"+a.browser.version;f.flash.priority=0,f.html5.priority=l.html5.blacklist.some(function(e){return m.match(e)})?-1:1,n.debug(null,"audioTypes",f);var y=function(e,t){this.name=d++,n.debug(this,"constructor"),o.call(this),this.preferredType=e,this.overlay=t,this.state=y.STATE_INIT,this._played=0,this._lastSkip=0,this._playId=null,this._whenReady=new s,this.whenReady=this._whenReady.promise().then(function(){n.info(this,"implementation found",this.implementation.type),this.implementation.on("*",function(e,t,i){if(this._populateEvents(e,t,i),!t)switch(e){case y.EVENT_PLAY:this._setState(y.STATE_PLAYING);break;case y.EVENT_SWAP:case y.EVENT_STOP:case y.EVENT_ENDED:case y.EVENT_ERROR:this._setState(y.STATE_IDLE);break;case y.EVENT_PAUSE:this._setState(y.STATE_PAUSED);break;case y.EVENT_CRASHED:this._setState(y.STATE_CRASHED)}}.bind(this)),this._setState(y.STATE_IDLE)}.bind(this),function(e){throw n.error(this,h.NO_IMPLEMENTATION,e),this._setState(y.STATE_CRASHED),e}.bind(this)),this._init(0)};o.mixin(y),c(y,p,!0),y.AudioError=h,y.info={html5:f.html5.available,flash:f.flash.available},y.audioContext=f.html5.audioContext,y.prototype._setState=function(e){n.debug(this,"_setState",e);var t=this.state!==e;this.state=e,t&&(n.info(this,"newState",e),this.trigger(y.EVENT_STATE,e))},y.prototype._init=function(e){function t(){var n=i.shift();return n?void r._initType(n).then(r._whenReady.resolve,t):void r._init(e+1)}if(e=e||0,n.info(this,"_init",e),this._whenReady.pending){e>l.audio.retry&&(n.error(this,h.NO_IMPLEMENTATION),this._whenReady.reject(new h(h.NO_IMPLEMENTATION)));var i=[f.html5,f.flash].sort(function(e,t){return e.available!==t.available?e.available?-1:1:e.AudioImplementation.type===this.preferredType?-1:t.AudioImplementation.type===this.preferredType?1:t.priority-e.priority}.bind(this)),r=this;t()}},y.prototype._initType=function(e){n.info(this,"_initType",e);var t=new s;try{this.implementation=new e.AudioImplementation(this.overlay),this.implementation.whenReady?this.implementation.whenReady.then(t.resolve,t.reject):t.resolve()}catch(i){t.reject(i)}return t.promise()},y.prototype._waitEvents=function(e,t,i){var r=new s,n=this;this[e]=r;var o=function(){t.forEach(function(e){n.off(e,r.resolve)}),i.forEach(function(e){n.off(e,r.reject)}),delete n[e]};return t.forEach(function(e){n.on(e,r.resolve)}),i.forEach(function(e){n.on(e,function(t){var i=t instanceof Error?t:new h(t||e);r.reject(i)})}),r.promise().then(o,o),r.promise()},y.prototype._populateEvents=function(e,t,i){e!==y.EVENT_PROGRESS&&n.debug(this,"_populateEvents",e,t,i);var r=(t?y.PRELOADER_EVENT:"")+e;switch(e){case y.EVENT_CRASHED:case y.EVENT_SWAP:this.trigger(e,i);break;case y.EVENT_ERROR:this.trigger(r,i);break;case y.EVENT_VOLUME:this.trigger(e,this.getVolume());break;case y.EVENT_PROGRESS:this.trigger(r,{duration:this.getDuration(t),loaded:this.getLoaded(t),position:t?0:this.getPosition(),played:t?0:this.getPlayed()});break;default:this.trigger(r)}},y.prototype._generatePlayId=function(){this._playId=Math.random().toString().slice(2)},y.prototype.initPromise=function(){return this.whenReady},y.prototype.getState=function(){return this.state},y.prototype.getType=function(){return this.implementation&&this.implementation.type},y.prototype.getSrc=function(e){return this.implementation&&this.implementation.getSrc(e)},y.prototype.play=function(e,t){n.info(this,"play",e,t),this._played=0,this._lastSkip=0,this._generatePlayId(),this._whenPlay&&this._whenPlay.reject("play"),this._whenPause&&this._whenPause.reject("play"),this._whenStop&&this._whenStop.reject("play");var i=this._waitEvents("_whenPlay",[y.EVENT_PLAY],[y.EVENT_STOP,y.EVENT_ERROR,y.EVENT_CRASHED]);return i.abort=function(){this._whenPlay&&(this._whenPlay.reject.apply(this._whenPlay,arguments),this.stop())}.bind(this),this.implementation.play(e,t),i},y.prototype.stop=function(e){if(n.info(this,"stop",e),0!==e)return this.implementation.stop(e);this._played=0,this._lastSkip=0,this._whenPlay&&this._whenPlay.reject("stop"),this._whenPause&&this._whenPause.reject("stop");var t;return t=this._whenStop?this._whenStop.promise():this._waitEvents("_whenStop",[y.EVENT_STOP],[y.EVENT_PLAY,y.EVENT_ERROR,y.EVENT_CRASHED]),this.implementation.stop(),t},y.prototype.pause=function(){if(n.info(this,"pause"),this.state!==y.STATE_PLAYING)return u(new h(h.BAD_STATE));var e;return this._whenPlay&&this._whenPlay.reject("pause"),e=this._whenPause?this._whenPause.promise():this._waitEvents("_whenPause",[y.EVENT_PAUSE],[y.EVENT_STOP,y.EVENT_PLAY,y.EVENT_ERROR,y.EVENT_CRASHED]),this.implementation.pause(),e},y.prototype.resume=function(){if(n.info(this,"resume"),this.state===y.STATE_PLAYING&&!this._whenPause)return Promise.resolve();if(this.state!==y.STATE_IDLE&&this.state!==y.STATE_PAUSED&&this.state!==y.STATE_PLAYING)return u(new h(h.BAD_STATE));var e;return this._whenPause&&this._whenPause.reject("resume"),e=this._whenPlay?this._whenPlay.promise():this._waitEvents("_whenPlay",[y.EVENT_PLAY],[y.EVENT_STOP,y.EVENT_ERROR,y.EVENT_CRASHED]),this.implementation.resume(),e},y.prototype.playPreloaded=function(e){if(n.info(this,"playPreloaded",e),!this.isPreloaded(e))return n.warn(this,"playPreloadedBadTrack",h.NOT_PRELOADED),u(new h(h.NOT_PRELOADED));this._played=0,this._lastSkip=0,this._generatePlayId(),this._whenPlay&&this._whenPlay.reject("playPreloaded"),this._whenPause&&this._whenPause.reject("playPreloaded"),this._whenStop&&this._whenStop.reject("playPreloaded");var t=this._waitEvents("_whenPlay",[y.EVENT_PLAY],[y.EVENT_STOP,y.EVENT_ERROR,y.EVENT_CRASHED]);t.abort=function(){this._whenPlay&&(this._whenPlay.reject.apply(this._whenPlay,arguments),this.stop())}.bind(this);var i=this.implementation.playPreloaded();return i||(n.warn(this,"playPreloadedError",h.NOT_PRELOADED),this._whenPlay.reject(new h(h.NOT_PRELOADED))),t},y.prototype.preload=function(e,t){n.info(this,"preload",e,t),this._whenPreload&&this._whenPreload.reject("preload");var i=this._waitEvents("_whenPreload",[y.PRELOADER_EVENT+y.EVENT_LOADING,y.EVENT_SWAP],[y.PRELOADER_EVENT+y.EVENT_CRASHED,y.PRELOADER_EVENT+y.EVENT_ERROR,y.PRELOADER_EVENT+y.EVENT_STOP]);return i.abort=function(){this._whenPreload&&(this._whenPreload.reject.apply(this._whenPreload,arguments),this.stop(1))}.bind(this),this.implementation.preload(e,t),i},y.prototype.isPreloaded=function(e){return this.implementation.isPreloaded(e)},y.prototype.isPreloading=function(e){return this.implementation.isPreloading(e,1)},y.prototype.getPosition=function(){return this.implementation.getPosition()},y.prototype.setPosition=function(e){return n.info(this,"setPosition",e),e="flash"==this.implementation.type?Math.max(0,Math.min(this.getLoaded(),e)):Math.max(0,Math.min(this.getDuration(),e)),this._played+=this.getPosition()-this._lastSkip,this._lastSkip=e,this.implementation.setPosition(e),e},y.prototype.getDuration=function(e){return this.implementation.getDuration(e?1:0)},y.prototype.getLoaded=function(e){return this.implementation.getLoaded(e?1:0)},y.prototype.getPlayed=function(){var e=this.getPosition();return this._played+=e-this._lastSkip,this._lastSkip=e,this._played},y.prototype.getVolume=function(){return this.implementation?this.implementation.getVolume():0},y.prototype.setVolume=function(e){return n.info(this,"setVolume",e),this.implementation?this.implementation.setVolume(e):0},y.prototype.isDeviceVolume=function(){return this.implementation?this.implementation.isDeviceVolume():!0},y.prototype.toggleWebAudioAPI=function(e){return n.info(this,"toggleWebAudioAPI",e),"html5"!==this.implementation.type?(n.warn(this,"toggleWebAudioAPIFailed",this.implementation.type),!1):this.implementation.toggleWebAudioAPI(e)},y.prototype.setAudioPreprocessor=function(e){return n.info(this,"setAudioPreprocessor"),"html5"!==this.implementation.type?(n.warn(this,"setAudioPreprocessorFailed",this.implementation.type),!1):this.implementation.setAudioPreprocessor(e)},y.prototype.getPlayId=function(){return this._playId},y.prototype._logger=function(){return{index:this.implementation&&this.implementation.name,src:this.implementation&&this.implementation._logger(),type:this.implementation&&this.implementation.type}},t.exports=y},{"./audio-static":4,"./config":5,"./error/audio-error":6,"./flash/audio-flash":9,"./html5/audio-html5":19,"./lib/async/deferred":21,"./lib/async/events":22,"./lib/async/reject":24,"./lib/browser/detect":25,"./lib/data/merge":30,"./logger/logger":34}],4:[function(e,t,i){var r={};r.EVENT_PLAY="play",r.EVENT_STOP="stop",r.EVENT_PAUSE="pause",r.EVENT_PROGRESS="progress",r.EVENT_LOADING="loading",r.EVENT_LOADED="loaded",r.EVENT_VOLUME="volumechange",r.EVENT_ENDED="ended",r.EVENT_CRASHED="crashed",r.EVENT_ERROR="error",r.EVENT_STATE="state",r.EVENT_SWAP="swap",r.PRELOADER_EVENT="preloader:",r.STATE_INIT="init",r.STATE_CRASHED="crashed",r.STATE_IDLE="idle",r.STATE_PLAYING="playing",r.STATE_PAUSED="paused",t.exports=r},{}],5:[function(e,t,i){var r={audio:{retry:3},flash:{path:"dist",name:"player-2_0.swf",version:"9.0.28",playerID:"YaMusicFlashPlayer",callback:"__flash__YaMusicFlashCallback",initTimeout:3e3,loadTimeout:5e3,clickTimeout:1e3},html5:{blacklist:["linux:mozilla","unix:mozilla","macos:mozilla",":opera","@NT 5","@NT 4"]}};t.exports=r},{}],6:[function(e,t,i){var r=e("../lib/class/error-class"),n=function(e){r.call(this,e)};n.prototype=r.create("AudioError"),n.NO_IMPLEMENTATION="cannot find suitable implementation",n.NOT_PRELOADED="track is not preloaded",n.BAD_STATE="action is not permited from current state",n.FLASH_BLOCKER="flash is rejected by flash blocker plugin",n.FLASH_UNKNOWN_CRASH="flash is crashed without reason",n.FLASH_INIT_TIMEOUT="flash init timed out",n.FLASH_INTERNAL_ERROR="flash internal error",n.FLASH_EMMITER_NOT_FOUND="flash event emmiter not found",n.FLASH_NOT_RESPONDING="flash player doesn't response",t.exports=n},{"../lib/class/error-class":28}],7:[function(e,t,i){var r=e("../lib/class/error-class"),n=function(e,t){r.call(this,e),this.src=t};n.prototype=r.create("PlaybackError"),n.CONNECTION_ABORTED="Connection aborted",n.NETWORK_ERROR="Network error",n.DECODE_ERROR="Decode error",n.BAD_DATA="Bad data",n.html5={1:n.CONNECTION_ABORTED,2:n.NETWORK_ERROR,3:n.DECODE_ERROR,4:n.BAD_DATA},t.exports=n},{"../lib/class/error-class":28}],8:[function(e,t,i){"undefined"==typeof window.ya&&(window.ya={});var r=window.ya;"undefined"==typeof r.Audio&&(r.Audio={});var n=e("./config"),o=e("./audio-player"),s=e("./lib/class/proxy");r.Audio=s.createClass(o),r.Audio.config=n,t.exports=r.Audio},{"./audio-player":3,"./config":5,"./lib/class/proxy":29}],9:[function(e,t,i){var r,n=e("../config"),o=e("../lib/browser/swfobject"),s=e("../lib/browser/detect"),a=e("../logger/logger"),l=new a("AudioFlash"),c=e("./flash-manager"),u=e("./flash-interface"),h=e("../lib/async/events"),p=1,d=o.getFlashPlayerVersion();s.flashVersion=d.major+"."+d.minor+"."+d.release,i.available=o.hasFlashPlayerVersion(n.flash.version),l.info(this,"detection",i.available);var f=function(e,t){this.name=p++,l.debug(this,"constructor"),(!r||t)&&(r=new c(e)),h.call(this),this.whenReady=r.createPlayer(this),this.whenReady.then(function(e){l.info(this,"ready",e)}.bind(this),function(e){l.error(this,"failed",e)}.bind(this))};h.mixin(f),f.type=f.prototype.type="flash",Object.keys(u.prototype).filter(function(e){return u.prototype.hasOwnProperty(e)&&"_"!==e[0]}).map(function(e){f.prototype[e]=function(){if(/^get/.test(e)||l.debug(this,e),!this.hasOwnProperty("id"))return l.warn(this,"player is not ready"),null;var t=[].slice.call(arguments);return t.unshift(this.id),r.flash[e].apply(r.flash,t)}}),f.prototype.isDeviceVolume=function(){return!0},f.prototype._logger=function(){try{return this.hasOwnProperty("id")?{main:this.getSrc(0),preloader:this.getSrc(1)}:{main:"not ready",preloader:"not ready"}}catch(e){return""}},i.AudioImplementation=f},{"../config":5,"../lib/async/events":22,"../lib/browser/detect":25,"../lib/browser/swfobject":26,"../logger/logger":34,"./flash-interface":10,"./flash-manager":11}],10:[function(e,t,i){var r=(e("../config"),e("../logger/logger")),n=new r("FlashInterface"),o=function(e){this.flash=ya.Audio._flash=e};o.prototype._callFlash=function(e){try{return this.flash.call.apply(this.flash,arguments)}catch(t){return n.error(this,"_callFlashError",t),null}},o.prototype._heartBeat=function(){this._callFlash("heartBeat",-1)},o.prototype._addPlayer=function(){return this._callFlash("addPlayer",-1)},o.prototype.setVolume=function(e,t){return this._callFlash("setVolume",-1,t)},o.prototype.getVolume=function(){return this._callFlash("getVolume",-1)},o.prototype.play=function(e,t,i){return this._callFlash("play",e,t,i)},o.prototype.stop=function(e,t){return this._callFlash("stop",e,t||0)},o.prototype.pause=function(e){return this._callFlash("pause",e)},o.prototype.resume=function(e){return this._callFlash("resume",e)},o.prototype.preload=function(e,t,i,r){return this._callFlash("preload",e,t,i,r||1)},o.prototype.isPreloaded=function(e,t,i){return this._callFlash("isPreloaded",e,t,i||1)},o.prototype.isPreloading=function(e,t,i){return this._callFlash("isPreloading",e,t,i||1)},o.prototype.playPreloaded=function(e,t,i){return this._callFlash("playPreloaded",e,i||1)},o.prototype.getPosition=function(e){return this._callFlash("getPosition",e)},o.prototype.setPosition=function(e,t){return this._callFlash("setPosition",e,t)},o.prototype.getDuration=function(e,t){return this._callFlash("getDuration",e,t||0)},o.prototype.getLoaded=function(e,t){return this._callFlash("getLoaded",e,t||0)},o.prototype.getSrc=function(e,t){return this._callFlash("getSrc",e,t||0)},t.exports=o},{"../config":5,"../logger/logger":34}],11:[function(e,t,i){var r,n=e("../logger/logger"),o=new n("FlashBridge"),s=e("../config"),a=e("../audio-static"),l=e("./loader"),c=e("./flash-interface"),u=e("../lib/async/deferred"),h=e("../error/audio-error"),p=e("../lib/net/error/loader-error"),d=function(e){if(r)return r;r=this,o.debug(this,"constructor",e),this.state="init",this.overlay=e,this.emmiters=[];var t=this.deferred=new u;if(this.whenReady=this.deferred.promise(),window[s.flash.callback]=this.onEvent.bind(this),this.__loadTimeout=setTimeout(this.onLoadTimeout,s.flash.loadTimeout),l(s.flash.path+"/"+s.flash.name,s.flash.version,s.flash.playerID,this.onLoad.bind(this),{},e),e){var i;e.addEventListener("mousedown",function(){i=i||setTimeout(function(){t.reject(new h(h.FLASH_NOT_RESPONDING))},s.flash.clickTimeout)},!0)}this.whenReady.then(function(e){i=i&&clearTimeout(i),o.info(this,"ready",e)}.bind(this),function(e){r=null,o.error(this,"failed",e)}.bind(this))};d.EVENT_INIT="init",d.EVENT_FAIL="failed",d.prototype.onLoad=function(e){o.debug(this,"onLoad",e),clearTimeout(this.__loadTimeout),delete this.__loadTimeout,e.success?(this.flash=new c(e.ref),"ready"===this.state?this.deferred.resolve(e.ref):this.overlay||(this.__initTimeout=setTimeout(this.onInitTimeout.bind(this),s.flash.initTimeout))):(this.state="failed",this.deferred.reject(new h(e.__fbn?h.FLASH_BLOCKER:h.FLASH_UNKNOWN_CRASH)))},d.prototype.onLoadTimeout=function(){this.state="failed",this.deferred.reject(new p(p.TIMEOUT))},d.prototype.onInitTimeout=function(){this.state="failed",this.deferred.reject(new h(h.FLASH_INIT_TIMEOUT))},d.prototype.onInit=function(){o.debug(this,"onInit"),this.state="ready",this.__initTimeout&&(clearTimeout(this.__initTimeout),delete this.__initTimeout),this.flash&&this.deferred.resolve(this.flash)},d.prototype.onEvent=function(e,t,i,r){return"debug"===e&&console.debug("flashDEBUG",t,i,r),"failed"===this.state?void o.warn(this,"onEventFailed",e,t,i,r):(o.debug(this,"onEvent",e,t,i),e===d.EVENT_INIT?this.onInit():e===d.EVENT_FAIL?(o.warn(this,"failed",h.FLASH_INTERNAL_ERROR),void this.deferred.reject(new h(h.FLASH_INTERNAL_ERROR))):void(-1==t?this.emmiters.forEach(function(t){t.trigger(e,i,r)}):this.emmiters[t]?this.emmiters[t].trigger(e,i,r):o.error(this,h.FLASH_EMMITER_NOT_FOUND,t)))},d.prototype.onHeartBeat=function(){try{this.flash._heartBeat()}catch(e){o.error(this,"crashed",e),this.onEvent(a.EVENT_CRASHED,-1,e)}},d.prototype.createPlayer=function(e){o.debug(this,"createPlayer");var t=this.whenReady.then(function(){return e.id=this.flash._addPlayer(),this.emmiters[e.id]=e,e.id}.bind(this));return t.then(function(e){o.debug(this,"createPlayerSuccess",e)}.bind(this),function(e){o.error(this,"createPlayerError",e)}.bind(this)),t},t.exports=d},{"../audio-static":4,"../config":5,"../error/audio-error":6,"../lib/async/deferred":21,"../lib/net/error/loader-error":31,"../logger/logger":34,"./flash-interface":10,"./loader":14}],12:[function(e,t,i){function r(e){e.parentNode.removeChild(e)}var n=e("../lib/browser/swfobject"),o={__SWF_WRAPPER_CLASS:"fbn-swf-wrapper",__TIMEOUT:500,__TESTS:[function(e,t){return t.childNodes.length>1},function(e){return e.type&&"application/x-shockwave-flash"!=e.type},function(e){return!e.parentNode},function(e){return e.parentNode.className.indexOf("CTFnodisplay")>-1}],embedSWF:function(e,t,i,s,a,l,c,u,h,p,d){n&&n.addDomLoadEvent(function(){var f=document.getElementById(t);if(f){var m=document.createElement("div");m.className=o.__SWF_WRAPPER_CLASS,f.parentNode.replaceChild(m,f),m.appendChild(f),n.embedSWF(e,t,i,s,a,l,c,u,h,function(e){function i(e){if(d!==!1){n.removeSWF(t),r(m);var i=document.getElementById("CTFstack");i&&r(i);var o=document.body.lastChild;o&&"ujs_flashblock_placeholder"==o.className&&r(o)}e.success=!1,e.__fbn=!0,p(e)}if(e&&e.success!==!1){var s=e.ref,a=!1;try{a=s&&s.getSVGDocument&&s.getSVGDocument()}catch(l){}a?i(e):window.setTimeout(function(){for(var t=o.__TESTS,r=0,n=t.length;n>r;r++)if(t[r](s,m))return void i(e);p(e)},o.__TIMEOUT)}else p(e)})}})}};t.exports=o},{"../lib/browser/swfobject":26}],13:[function(e,t,i){var r=e("../lib/browser/swfobject"),n={__SWF_WRAPPER_CLASS:"femb-swf-wrapper",__TIMEOUT:500,embedSWF:function(e,t,i,o,s,a,l,c,u,h){r.addDomLoadEvent(function(){var p=document.getElementById(t);if(p){var d=document.createElement("div");d.className=n.__SWF_WRAPPER_CLASS,p.parentNode.replaceChild(d,p),d.appendChild(p),r.embedSWF(e,t,i,o,s,a,l,c,u,function(e){function t(e){e.success=!1,h(e)}if(e&&e.success!==!1){var i=e.ref,r=!1;try{r=i&&i.getSVGDocument&&i.getSVGDocument()}catch(o){}r?t(e):window.setTimeout(function(){h(e)},n.__TIMEOUT)}else h(e)})}})}};t.exports=n},{"../lib/browser/swfobject":26}],14:[function(e,t,i){var r=(e("../lib/browser/swfobject"),e("./flashblocknotifier")),n=e("./flashembedder"),o=e("../lib/browser/detect"),s="windows"===o.platform.os&&"safari"===o.browser.name,a="ya-flash-player-wrapper";t.exports=function(e,t,i,o,l,c,u,h){var p=document.createElement("div");p.id="wrapper_"+i,p.innerHTML='<div id="'+i+'"></div>',u=u||"1000",h=h||"1000";var d,f,m,y;return c&&!s?(d=n,f=u,m=h,y={allowscriptaccess:"always",wmode:"transparent"},p.className=a,p.style.cssText="position: relative; width: 100%; height: 100%; overflow: hidden;",c.appendChild(p)):(d=r,f=m="1",y={allowscriptaccess:"always"},p.style.cssText="position: absolute; left: -1px; top: -1px; width: 0px; height: 0px; overflow: hidden;",document.body.appendChild(p)),d.embedSWF(e,i,f,m,t,"",l,y,{},o),p}},{"../lib/browser/detect":25,"../lib/browser/swfobject":26,"./flashblocknotifier":12,"./flashembedder":13}],15:[function(e,t,i){var r=e("../../lib/async/events"),n=(e("../../lib/class/proxy"),function(e,t){r.call(this),this.preamp=new o(e,"highshelf",0),this.preamp.on("*",this._onBandEvent.bind(this,this.preamp));var i;this.bands=t.map(function(r,n){var s=new o(e,0==n?"lowshelf":n+1<t.length?"peaking":"highshelf",r);return s.on("*",this._onBandEvent.bind(this,s)),i?i.filter.connect(s.filter):this.preamp.filter.connect(s.filter),i=s,s}.bind(this)),this.input=this.preamp.filter,this.output=this.bands[this.bands.length-1].filter});r.mixin(n),n.EVENT_CHANGE="change",n.WINAMP_BANDS=[60,170,310,600,1e3,3e3,6e3,12e3,14e3,16e3],n.WINAMP_PRESETS=e("./winamp.presets"),n.prototype._onBandEvent=function(e,t,i){this.trigger(t,e.getFreq(),i)},n.prototype.loadPreset=function(e){e.bands.forEach(function(e,t){this.bands[t].setValue(e)}.bind(this)),this.preamp.setValue(e.preamp)},n.prototype.savePreset=function(){return{preamp:this.preamp.getValue(),bands:this.bands.map(function(e){return e.getValue()})}},n.prototype.guessPreamp=function(){for(var e=0,t=0,i=this.bands.length;i>t;t++)e+=this.bands[t].getValue();return-e/2};var o=function(e,t,i){r.call(this),this.type=t,this.filter=e.createBiquadFilter(),this.filter.type=t,this.filter.frequency.value=i,this.filter.Q.value=1,this.filter.gain.value=0};r.mixin(o),o.prototype.getFreq=function(){return this.filter.frequency.value},o.prototype.getValue=function(){return this.filter.gain.value},o.prototype.setValue=function(e){this.filter.gain.value=e,this.trigger(n.EVENT_CHANGE,e)},t.exports=n},{"../../lib/async/events":22,"../../lib/class/proxy":29,"./winamp.presets":17}],16:[function(e,t,i){e("../export"),ya.Audio.fx.Equalizer=e("./equalizer")},{"../export":18,"./equalizer":15}],17:[function(e,t,i){t.exports=[{id:"custom",preamp:0,bands:[0,0,0,0,0,0,0,0,0,0]},{id:"default",preamp:0,bands:[0,0,0,0,0,0,0,0,0,0]},{id:"Classical",preamp:-.5,bands:[-.5,-.5,-.5,-.5,-.5,-.5,-3.5,-3.5,-3.5,-4.5]},{id:"Club",preamp:-3.359999895095825,bands:[-.5,-.5,4,2.5,2.5,2.5,1.5,-.5,-.5,-.5]},{id:"Dance",preamp:-2.1599998474121094,bands:[4.5,3.5,1,-.5,-.5,-2.5,-3.5,-3.5,-.5,-.5]},{id:"Full Bass",preamp:-3.5999999046325684,bands:[4,4.5,4.5,2.5,.5,-2,-4,-5,-5.5,-5.5]},{id:"Full Bass & Treble",preamp:-5.039999961853027,bands:[3.5,2.5,-.5,-3.5,-2,.5,4,5.5,6,6]},{id:"Full Treble",preamp:-6,bands:[-4.5,-4.5,-4.5,-2,1,5.5,8,8,8,8]},{id:"Laptop Speakers / Headphone",preamp:-4.079999923706055,bands:[2,5.5,2.5,-1.5,-1,.5,2,4.5,6,7]},{id:"Large Hall",preamp:-3.5999999046325684,bands:[5,5,2.5,2.5,-.5,-2,-2,-2,-.5,-.5]
},{id:"Live",preamp:-2.6399998664855957,bands:[-2,-.5,2,2.5,2.5,2.5,2,1,1,1]},{id:"Party",preamp:-2.6399998664855957,bands:[3.5,3.5,-.5,-.5,-.5,-.5,-.5,-.5,3.5,3.5]},{id:"Pop",preamp:-3.119999885559082,bands:[-.5,2,3.5,4,2.5,-.5,-1,-1,-.5,-.5]},{id:"Reggae",preamp:-4.079999923706055,bands:[-.5,-.5,-.5,-2.5,-.5,3,3,-.5,-.5,-.5]},{id:"Rock",preamp:-5.039999961853027,bands:[4,2,-2.5,-4,-1.5,2,4,5.5,5.5,5.5]},{id:"Ska",preamp:-5.519999980926514,bands:[-1,-2,-2,-.5,2,2.5,4,4.5,5.5,4.5]},{id:"Soft",preamp:-4.799999713897705,bands:[2,.5,-.5,-1,-.5,2,4,4.5,5.5,6]},{id:"Soft Rock",preamp:-2.6399998664855957,bands:[2,2,1,-.5,-2,-2.5,-1.5,-.5,1,4]},{id:"Techno",preamp:-3.8399999141693115,bands:[4,2.5,-.5,-2.5,-2,-.5,4,4.5,4.5,4]}]},{}],18:[function(e,t,i){e("../export"),ya.Audio.fx={}},{"../export":8}],19:[function(e,t,i){var r=e("../logger/logger"),n=new r("AudioHTML5"),o=e("../lib/browser/detect"),s=e("../lib/async/events"),a=e("../audio-static"),l=e("../error/playback-error"),c=1;i.available=function(){var e=!0;try{var t=document.createElement("audio"),i=t.canPlayType("audio/mpeg");i&&"no"!==i||(n.warn(this,"HTML5 detection failed with reason",i),e=!1)}catch(r){n.warn(this,"HTML5 detection failed with error",r),e=!1}return n.info(this,"detection",e),e}();try{var u=new AudioContext;n.info(this,"WenAudioAPI context created")}catch(h){u=null,n.info(this,"WenAudioAPI not detected")}i.audioContext=u;var p=function(){this.name=c++,n.debug(this,"constructor"),s.call(this),this.on("*",function(e){n.debug(this,"onEvent",e)}.bind(this)),this.webAudioApi=!1,this.activeLoader=0,this.loaders=[],this.listeners=[],this._addLoader(),this._addLoader(),this._setActive(0)};s.mixin(p),p.type=p.prototype.type="html5",p.EVENT_NATIVE_PLAY="play",p.EVENT_NATIVE_PAUSE="pause",p.EVENT_NATIVE_TIMEUPDATE="timeupdate",p.EVENT_NATIVE_ENDED="ended",p.EVENT_NATIVE_DURATION="durationchange",p.EVENT_NATIVE_LOADING="progress",p.EVENT_NATIVE_META="loadedmetadata",p.EVENT_NATIVE_CANPLAY="canplay",p.EVENT_NATIVE_ERROR="error",p.prototype._addLoader=function(){n.debug(this,"_addLoader");var e=this,t=document.createElement("audio"),i=new s;t.loop=!1,t.preload=t.autobuffer="auto",t.startPlay=function(){t.removeEventListener(p.EVENT_NATIVE_META,t.startPlay),t.removeEventListener(p.EVENT_NATIVE_CANPLAY,t.startPlay);try{t.play(),n.debug(e,"startPlay")}catch(r){n.error(e,"crashed",r),i.trigger(a.EVENT_CRASHED,r)}};var r=0,o=function(){var e=+new Date;30>e-r||(r=e,i.trigger(a.EVENT_PROGRESS))};t.addEventListener(p.EVENT_NATIVE_PAUSE,i.trigger.bind(i,a.EVENT_PAUSE)),t.addEventListener(p.EVENT_NATIVE_PLAY,i.trigger.bind(i,a.EVENT_PLAY)),t.addEventListener(p.EVENT_NATIVE_ENDED,function(){i.trigger(a.EVENT_PROGRESS),i.trigger(a.EVENT_ENDED)}),t.addEventListener(p.EVENT_NATIVE_TIMEUPDATE,o),t.addEventListener(p.EVENT_NATIVE_DURATION,o),t.addEventListener(p.EVENT_NATIVE_LOADING,function(){if(o(),t.buffered.length){var e=t.buffered.end(0)-t.buffered.start(0);t.notLoading&&e&&(t.notLoading=!1,i.trigger(a.EVENT_LOADING)),e>=e.duration-.1&&i.trigger(a.EVENT_LOADED)}}),t.addEventListener(p.EVENT_NATIVE_ERROR,function(e){if(!t.fake){var r=new l(t.error?l.html5[t.error.code]:e instanceof Error?e.message:e,t.src);i.trigger(a.EVENT_ERROR,r)}}),i.on("*",function(i,r){var n=(e.loaders.length+t.index-e.activeLoader)%e.loaders.length;e.trigger(i,n,r)}),t.index=this.loaders.push(t)-1,this.listeners.push(i),this.webAudioApi&&this._addSource(t)},p.prototype._addSource=function(e,t){n.debug(this,"_addSource",e),t?t.disconnect():(t=u.createMediaElementSource(e),this.sources.push(t)),this.preprocessor?t.connect(this.preprocessor):t.connect(this.audioOutput)},p.prototype._setActive=function(e){n.debug(this,"_setActive",e),0!==e&&this.stop(),this.activeLoader=(this.activeLoader+e)%this.loaders.length,this.trigger(a.EVENT_SWAP,e)},p.prototype._getLoader=function(e,t){t=t||0;var i=this.loaders[(this.activeLoader+t)%this.loaders.length];return e&&(i.removeEventListener(p.EVENT_NATIVE_META,i.startPlay),i.removeEventListener(p.EVENT_NATIVE_CANPLAY,i.startPlay)),i},p.prototype._play=function(e){n.debug(this,"_play"),e.readyState>e.HAVE_METADATA?e.startPlay():(e.addEventListener(p.EVENT_NATIVE_META,e.startPlay),e.addEventListener(p.EVENT_NATIVE_CANPLAY,e.startPlay))},p.prototype.toggleWebAudioAPI=function(e){return u?(n.info(this,"toggleWebAudioAPI",e),this.webAudioApi==e?e:(e?(this.audioOutput=u.createGain(),this.audioOutput.gain=this.volume,this.audioOutput.connect(u.destination),this.preprocessor&&this.preprocessor.output.connect(this.audioOutput),this.sources=this.sources||[],this.loaders.forEach(function(e,t){e.volume=1;var i=e.crossOrigin;if(e.crossOrigin="anonymous",this._addSource(e,this.sources[t]),!i){var r=e.currentTime,n=e.paused;e.load(),e.currentTime=r,n||e.play()}}.bind(this))):this.audioOutput&&(this.preprocessor&&this.preprocessor.output.disconnect(),this.audioOutput.disconnect(),delete this.audioOutput,this.sources.forEach(function(e){e.disconnect()}),this.loaders.forEach(function(e,t){e.volume=this.volume;var i=this.sources[t];i&&i.connect(u.destination)}.bind(this))),this.webAudioApi=e,e)):(n.warn(this,"toggleWebAudioAPIError",e),!1)},p.prototype.setAudioPreprocessor=function(e){if(!this.webAudioApi)return void n.warn(this,"setAudioPreprocessorError",e);if(n.info(this,"setAudioPreprocessor"),this.preprocessor!==e){if(this.preprocessor&&this.preprocessor.output.disconnect(),this.preprocessor=e,!e)return void this.sources.forEach(function(e){e.disconnect(),e.connect(this.audioOutput)}.bind(this));this.sources.forEach(function(t){t.disconnect(),t.connect(e.input)}),e.output.connect(this.audioOutput)}},p.prototype.play=function(e){n.info(this,"play",e);var t=this._getLoader(!0);t.fake=!1,t.src=e,t._src=e,t.notLoading=!0,t.load(),this._play(t)},p.prototype.pause=function(){n.info(this,"pause");var e=this._getLoader(!0);e.pause()},p.prototype.resume=function(){n.info(this,"resume");var e=this._getLoader(!0);this._play(e)},p.prototype.stop=function(e){n.info(this,"stop");var t=this._getLoader(!0,e||0);t.fake=!0,t.src="",t._src=!1,t.notLoading=!0,t.load(),this.trigger(a.EVENT_STOP)},p.prototype.preload=function(e,t,i){if(n.info(this,"preload",e,i),i=i||1,this.loaders.length<i+1)return!1;var r=this._getLoader(!0,i);return r.src=e,r._src=e,r.notLoading=!0,r.load(),!0},p.prototype.isPreloaded=function(e,t){var i=this._getLoader(!1,t);return i._src===e&&!i.notLoading},p.prototype.isPreloading=function(e,t){var i=this._getLoader(!1,t);return i._src===e},p.prototype.playPreloaded=function(e){return n.info(this,"playPreloaded",e),e=e||1,this.loaders.length<1+e?!1:this._getLoader(!1,e)._src?(this._setActive(e),this._play(this._getLoader(!0)),!0):!1},p.prototype.getPosition=function(){return this._getLoader().currentTime},p.prototype.setPosition=function(e){n.info(this,"setPosition",e),this._getLoader().currentTime=e-.001},p.prototype.getDuration=function(e){return this._getLoader(!1,e).duration},p.prototype.getLoaded=function(e){var t=this._getLoader(!1,e);return t.buffered.length?t.buffered.end(0)-t.buffered.start(0):0},p.prototype.getVolume=function(){return this.volume},p.prototype.setVolume=function(e){n.info(this,"setVolume",e),this.volume=e,this.webAudioApi?this.audioOutput.gain.value=e:this.loaders.forEach(function(t){t.volume=e}),this.trigger(a.EVENT_VOLUME)},p.prototype.getSrc=function(e){return this._getLoader(!1,e)._src},p.prototype.isDeviceVolume=function(){return o.onlyDeviceVolume},p.prototype._logger=function(){try{return{main:this.getSrc(0),preloader:this.getSrc(1)}}catch(e){return""}},i.AudioImplementation=p},{"../audio-static":4,"../error/playback-error":7,"../lib/async/events":22,"../lib/browser/detect":25,"../logger/logger":34}],20:[function(e,t,i){var r=e("./export");e("./logger/export"),e("./fx/equalizer/export"),t.exports=r},{"./export":8,"./fx/equalizer/export":16,"./logger/export":33}],21:[function(e,t,i){var r=e("./promise"),n=e("../noop"),o=t.exports=function(){var e=this,t=new r(function(t,i){e.resolve=t,e.reject=i}),i=t.then(function(t){return e.resolved=!0,e.pending=!1,t},function(t){throw e.rejected=!0,e.pending=!1,t});i["catch"](n),e.pending=!0,e.promise=function(){return i}};o.when=function(){var e=new o,t=[].slice.call(arguments),i=t.length,r=function(){i--,0>=i&&e.resolve()};return t.forEach(function(t){t.then(r,e.reject)}),t=null,e.promise.abort=e.reject,e.promise()}},{"../noop":32,"./promise":23}],22:[function(e,t,i){var r=e("../data/merge"),n="_listeners",o="_muted",s=function(){this[n]={},this[o]=!1};s.mixin=function(e){return r(e.prototype,s.prototype,!0),e},s.eventize=function(e){return r(e,s.prototype,!0),s.call(e),e},s.prototype.on=function(e,t){return this[n][e]||(this[n][e]=[]),this[n][e].push(t),this},s.prototype.off=function(e,t){if(!this[n][e])return this;if(!t)return delete this[n][e],this;for(var i=this[n][e],r=0,o=i.length;o>r;r++)if(i[r]===t||i[r].callback===t){i.splice(r,1),i.length||delete this[n][e];break}return this},s.prototype.once=function(e,t){var i=this,r=function(){i.off(e,r),t.apply(this,arguments)};return r.callback=t,i.on(e,r),this},s.prototype.trigger=function(e,t){if(this[o])return this;if(t=[].slice.call(arguments,1),"*"!==e&&s.prototype.trigger.apply(this,["*",e].concat(t)),!this[n][e])return this;for(var i=[].concat(this[n][e]),r=0,a=i.length;a>r;r++)i[r].apply(null,t);return this},s.prototype.clearListeners=function(){for(var e in this[n])this[n].hasOwnProperty(e)&&delete this[n][e];return this},s.prototype.pipeEvents=function(e){return this.on("*",s.prototype.trigger.bind(e)),this},s.prototype.muteEvents=function(){return this[o]=!0,this},s.prototype.unmuteEvents=function(){return delete this[o],this},t.exports=s},{"../data/merge":30}],23:[function(e,t,i){var r,n=e("vow"),o=e("../browser/detect");r="function"!=typeof window.Promise||"msie"===o.browser.name||"edge"===o.browser.name?n.Promise:window.Promise,t.exports=r},{"../browser/detect":25,vow:2}],24:[function(e,t,i){var r=e("../noop"),n=e("./promise");t.exports=function(e){var t=n.reject(e);return t["catch"](r),t}},{"../noop":32,"./promise":23}],25:[function(e,t,i){var r=navigator.userAgent.toLowerCase(),n=/(webkit)[ \/]([\w.]+)/,o=/(yabrowser)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,a=/(msie) ([\w.]+)/,l=/(edge)\/([\w.]+)/,c=/(mozilla)(?:.*? rv:([\w.]+))?/,u=/^((?!chrome).)*version\/([\d\w\.]+).*(safari)/,h=u.exec(r)||o.exec(r)||l.exec(r)||n.exec(r)||s.exec(r)||a.exec(r)||r.indexOf("compatible")<0&&c.exec(r)||[],p={name:h[1]||"",version:h[2]||"0"};"safari"===h[3]&&(p.name=h[3]),"msie"===p.name&&(document.documentMode?p.documentMode=document.documentMode:(p.documentMode=5,document.compatMode&&"CSS1Compat"===document.compatMode&&(p.documentMode=7)));var d=/(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/,f=/(ipad|playbook)/,m=/(android)/,y=/(mobile)/;v=d.exec(r)||[];var E=f.exec(r)||!y.exec(r)&&m.exec(r)||[];v[1]&&(v[1]=v[1].replace(/\s/g,"_"));var v={type:v[1]||"",tablet:!!E[1],mobile:v[1]&&!E[1]||!1};v.type||(v.type="pc"),v.os=v.type,"ipad"===v.type||"iphone"===v.type||"ipod"===v.type?v.os="ios":"android"===v.type?v.os="android":-1!==navigator.appVersion.indexOf("Win")?(v.os="windows",v.version=navigator.userAgent.match(/win[^ ]* ([^;]*)/i),v.version=v.version&&v.version[1]):-1!==navigator.appVersion.indexOf("Mac")?v.os="macos":-1!==navigator.appVersion.indexOf("X11")?v.os="unix":-1!==navigator.appVersion.indexOf("Linux")&&(v.os="linux");var _=!0;try{var g=document.createElement("audio");g.volume=.63,_=Math.abs(g.volume-.63)>.01}catch(T){_=!0}t.exports={browser:p,platform:v,onlyDeviceVolume:_}},{}],26:[function(e,t,i){var r=function(){function e(){if(!G){try{var e=k.getElementsByTagName("body")[0].appendChild(E("span"));e.parentNode.removeChild(e)}catch(t){return}G=!0;for(var i=B.length,r=0;i>r;r++)B[r]()}}function t(e){G?e():B[B.length]=e}function i(e){if(typeof j.addEventListener!=R)j.addEventListener("load",e,!1);else if(typeof k.addEventListener!=R)k.addEventListener("load",e,!1);else if(typeof j.attachEvent!=R)v(j,"onload",e);else if("function"==typeof j.onload){var t=j.onload;j.onload=function(){t(),e()}}else j.onload=e}function n(){M?o():s()}function o(){var e=k.getElementsByTagName("body")[0],t=E(V);t.setAttribute("type",x);var i=e.appendChild(t);if(i){var r=0;!function(){if(typeof i.GetVariable!=R){var n=i.GetVariable("$version");n&&(n=n.split(" ")[1].split(","),$.pv=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)])}else if(10>r)return r++,void setTimeout(arguments.callee,10);e.removeChild(t),i=null,s()}()}else s()}function s(){var e=H.length;if(e>0)for(var t=0;e>t;t++){var i=H[t].id,r=H[t].callbackFn,n={success:!1,id:i};if($.pv[0]>0){var o=y(i);if(o)if(!_(H[t].swfVersion)||$.wk&&$.wk<312)if(H[t].expressInstall&&l()){var s={};s.data=H[t].expressInstall,s.width=o.getAttribute("width")||"0",s.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(s.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(s.align=o.getAttribute("align"));for(var h={},p=o.getElementsByTagName("param"),d=p.length,f=0;d>f;f++)"movie"!=p[f].getAttribute("name").toLowerCase()&&(h[p[f].getAttribute("name")]=p[f].getAttribute("value"));c(s,h,i,r)}else u(o),r&&r(n);else T(i,!0),r&&(n.success=!0,n.ref=a(i),r(n))}else if(T(i,!0),r){var m=a(i);m&&typeof m.SetVariable!=R&&(n.success=!0,n.ref=m),r(n)}}}function a(e){var t=null,i=y(e);if(i&&"OBJECT"==i.nodeName)if(typeof i.SetVariable!=R)t=i;else{var r=i.getElementsByTagName(V)[0];r&&(t=r)}return t}function l(){return!Y&&_("6.0.65")&&($.win||$.mac)&&!($.wk&&$.wk<312)}function c(e,t,i,r){Y=!0,N=r||null,P={success:!1,id:i};var n=y(i);if(n){"OBJECT"==n.nodeName?(b=h(n),A=null):(b=n,A=i),e.id=D,(typeof e.width==R||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==R||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),k.title=k.title.slice(0,47)+" - Flash Player Installation";var o=$.ie&&$.win?"ActiveX":"PlugIn",s="MMredirectURL="+j.location.toString().replace(/&/g,"%26")+"&MMplayerType="+o+"&MMdoctitle="+k.title;if(typeof t.flashvars!=R?t.flashvars+="&"+s:t.flashvars=s,$.ie&&$.win&&4!=n.readyState){var a=E("div");i+="SWFObjectNew",a.setAttribute("id",i),n.parentNode.insertBefore(a,n),n.style.display="none",function(){4==n.readyState?n.parentNode.removeChild(n):setTimeout(arguments.callee,10)}()}p(e,t,i)}}function u(e){if($.ie&&$.win&&4!=e.readyState){var t=E("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(h(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(h(e),e)}function h(e){var t=E("div");if($.win&&$.ie)t.innerHTML=e.innerHTML;else{var i=e.getElementsByTagName(V)[0];if(i){var r=i.childNodes;if(r)for(var n=r.length,o=0;n>o;o++)1==r[o].nodeType&&"PARAM"==r[o].nodeName||8==r[o].nodeType||t.appendChild(r[o].cloneNode(!0))}}return t}function p(e,t,i){var r,n=y(i);if($.wk&&$.wk<312)return r;if(n)if(typeof e.id==R&&(e.id=i),$.ie&&$.win){var o="";for(var s in e)e[s]!=Object.prototype[s]&&("data"==s.toLowerCase()?t.movie=e[s]:"styleclass"==s.toLowerCase()?o+=' class="'+e[s]+'"':"classid"!=s.toLowerCase()&&(o+=" "+s+'="'+e[s]+'"'));var a="";for(var l in t)t[l]!=Object.prototype[l]&&(a+='<param name="'+l+'" value="'+t[l]+'" />');n.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+o+">"+a+"</object>",W[W.length]=e.id,r=y(e.id)}else{var c=E(V);c.setAttribute("type",x);for(var u in e)e[u]!=Object.prototype[u]&&("styleclass"==u.toLowerCase()?c.setAttribute("class",e[u]):"classid"!=u.toLowerCase()&&c.setAttribute(u,e[u]));for(var h in t)t[h]!=Object.prototype[h]&&"movie"!=h.toLowerCase()&&d(c,h,t[h]);n.parentNode.replaceChild(c,n),r=c}return r}function d(e,t,i){var r=E("param");r.setAttribute("name",t),r.setAttribute("value",i),e.appendChild(r)}function f(e){var t=y(e);t&&"OBJECT"==t.nodeName&&($.ie&&$.win?(t.style.display="none",function(){4==t.readyState?m(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function m(e){var t=y(e);if(t){for(var i in t)"function"==typeof t[i]&&(t[i]=null);t.parentNode.removeChild(t)}}function y(e){var t=null;try{t=k.getElementById(e)}catch(i){}return t}function E(e){return k.createElement(e)}function v(e,t,i){e.attachEvent(t,i),U[U.length]=[e,t,i]}function _(e){var t=$.pv,i=e.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,t[0]>i[0]||t[0]==i[0]&&t[1]>i[1]||t[0]==i[0]&&t[1]==i[1]&&t[2]>=i[2]?!0:!1}function g(e,t,i,r){if(!$.ie||!$.mac){var n=k.getElementsByTagName("head")[0];if(n){var o=i&&"string"==typeof i?i:"screen";if(r&&(S=null,L=null),!S||L!=o){var s=E("style");s.setAttribute("type","text/css"),s.setAttribute("media",o),S=n.appendChild(s),$.ie&&$.win&&typeof k.styleSheets!=R&&k.styleSheets.length>0&&(S=k.styleSheets[k.styleSheets.length-1]),L=o}$.ie&&$.win?S&&typeof S.addRule==V&&S.addRule(e,t):S&&typeof k.createTextNode!=R&&S.appendChild(k.createTextNode(e+" {"+t+"}"))}}}function T(e,t){if(q){var i=t?"visible":"hidden";G&&y(e)?y(e).style.visibility=i:g("#"+e,"visibility:"+i)}}function w(e){var t=/[\\\"<>\.;]/,i=null!=t.exec(e);return i&&typeof encodeURIComponent!=R?encodeURIComponent(e):e}var b,A,N,P,S,L,R="undefined",V="object",O="Shockwave Flash",I="ShockwaveFlash.ShockwaveFlash",x="application/x-shockwave-flash",D="SWFObjectExprInst",C="onreadystatechange",j=window,k=document,F=navigator,M=!1,B=[n],H=[],W=[],U=[],G=!1,Y=!1,q=!0,$=function(){var e=typeof k.getElementById!=R&&typeof k.getElementsByTagName!=R&&typeof k.createElement!=R,t=F.userAgent.toLowerCase(),i=F.platform.toLowerCase(),r=i?/win/.test(i):/win/.test(t),n=i?/mac/.test(i):/mac/.test(t),o=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,s=!1,a=[0,0,0],l=null;if(typeof F.plugins!=R&&typeof F.plugins[O]==V)l=F.plugins[O].description,!l||typeof F.mimeTypes!=R&&F.mimeTypes[x]&&!F.mimeTypes[x].enabledPlugin||(M=!0,s=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),a[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),a[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),a[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof j.ActiveXObject!=R)try{var c=new ActiveXObject(I);c&&(l=c.GetVariable("$version"),l&&(s=!0,l=l.split(" ")[1].split(","),a=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]))}catch(u){}return{w3:e,pv:a,wk:o,ie:s,win:r,mac:n}}();(function(){$.w3&&((typeof k.readyState!=R&&"complete"==k.readyState||typeof k.readyState==R&&(k.getElementsByTagName("body")[0]||k.body))&&e(),G||(typeof k.addEventListener!=R&&k.addEventListener("DOMContentLoaded",e,!1),$.ie&&$.win&&(k.attachEvent(C,function(){"complete"==k.readyState&&(k.detachEvent(C,arguments.callee),e())}),j==top&&!function(){if(!G){try{k.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}e()}}()),$.wk&&!function(){return G?void 0:/loaded|complete/.test(k.readyState)?void e():void setTimeout(arguments.callee,0)}(),i(e)))})(),function(){$.ie&&$.win&&window.attachEvent("onunload",function(){for(var e=U.length,t=0;e>t;t++)U[t][0].detachEvent(U[t][1],U[t][2]);for(var i=W.length,n=0;i>n;n++)f(W[n]);for(var o in $)$[o]=null;$=null;for(var s in r)r[s]=null;r=null})}();return{registerObject:function(e,t,i,r){if($.w3&&e&&t){var n={};n.id=e,n.swfVersion=t,n.expressInstall=i,n.callbackFn=r,H[H.length]=n,T(e,!1)}else r&&r({success:!1,id:e})},getObjectById:function(e){return $.w3?a(e):void 0},embedSWF:function(e,i,r,n,o,s,a,u,h,d){var f={success:!1,id:i};$.w3&&!($.wk&&$.wk<312)&&e&&i&&r&&n&&o?(T(i,!1),t(function(){r+="",n+="";var t={};if(h&&typeof h===V)for(var m in h)t[m]=h[m];t.data=e,t.width=r,t.height=n;var y={};if(u&&typeof u===V)for(var E in u)y[E]=u[E];if(a&&typeof a===V)for(var v in a)typeof y.flashvars!=R?y.flashvars+="&"+v+"="+a[v]:y.flashvars=v+"="+a[v];if(_(o)){var g=p(t,y,i);t.id==i&&T(i,!0),f.success=!0,f.ref=g}else{if(s&&l())return t.data=s,void c(t,y,i,d);T(i,!0)}d&&d(f)})):d&&d(f)},switchOffAutoHideShow:function(){q=!1},ua:$,getFlashPlayerVersion:function(){return{major:$.pv[0],minor:$.pv[1],release:$.pv[2]}},hasFlashPlayerVersion:_,createSWF:function(e,t,i){return $.w3?p(e,t,i):void 0},showExpressInstall:function(e,t,i,r){$.w3&&l()&&c(e,t,i,r)},removeSWF:function(e){$.w3&&f(e)},createCSS:function(e,t,i,r){$.w3&&g(e,t,i,r)},addDomLoadEvent:t,addLoadEvent:i,getQueryParamValue:function(e){var t=k.location.search||k.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return w(t);for(var i=t.split("&"),r=0;r<i.length;r++)if(i[r].substring(0,i[r].indexOf("="))==e)return w(i[r].substring(i[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if(Y){var e=y(D);e&&b&&(e.parentNode.replaceChild(b,e),A&&(T(A,!0),$.ie&&$.win&&(b.style.display="block")),N&&N(P)),Y=!1}}}}();t.exports=r},{}],27:[function(e,t,i){var r=function(e){var t=function(){};return t.prototype=e.prototype,new t};t.exports=r},{}],28:[function(e,t,i){var r=e("./clear-instance"),n=function(e,t){var i=new Error(e,t);i.name=this.name,this.message=i.message,this.stack=i.stack};n.create=function(e){var t=r(n);return t.name=e,t},n.prototype=r(Error),n.prototype.name="ErrorClass",t.exports=n},{"./clear-instance":27}],29:[function(e,t,i){var r=e("../async/events"),n=function(e){if(e){for(var t in e)"_"===t[0]||"function"!=typeof e[t]||e[t]===Object.prototype[t]||e.hasOwnProperty(t)||r.prototype.hasOwnProperty(t)||(this[t]=e[t].bind(e));e.pipeEvents&&(r.call(this),this.on=r.prototype.on,this.once=r.prototype.once,this.off=r.prototype.off,this.clearListeners=r.prototype.clearListeners,e.pipeEvents(this))}};n.exportStatic=function(e,t,i){i=i||[],Object.keys(e).forEach(function(r){e.hasOwnProperty(r)&&"_"!==r[0]&&"prototype"!==r&&-1===i.indexOf(r)&&(t[r]=e[r])})},n.createClass=function(e,t){var i=function(){var t=function(){};t.prototype=e.prototype;var i=new t;return e.apply(i,arguments),i._proxy()},r=function(){};r.prototype=(t||n).prototype,i.prototype=new r;var o;for(var s in e.prototype)o=e.prototype[s],Object.prototype[s]!=o&&"function"!=typeof o&&"_"!==s[0]&&(i.prototype[s]=o);var a=function(e){var t=n.prototype;n.prototype=i.prototype;var r=new n(e);return n.prototype=t,r};return e.prototype._proxy=function(){return this.__proxy||(this.__proxy=a(this)),this.__proxy},n.exportStatic(e,i),i},t.exports=n},{"../async/events":22}],30:[function(e,t,i){t.exports=function(e){var t,i,r=[].slice.call(arguments,1);if(r[r.length-1]===!0)t=e,r.pop();else{t={};for(i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}for(var n=0,o=r.length;o>n;n++)for(i in r[n])r[n].hasOwnProperty(i)&&(t[i]=r[n][i]);return t}},{}],31:[function(e,t,i){var r=e("../../class/error-class"),n=function(e){r.call(this,e)};n.prototype=r.create("LoaderError"),n.TIMEOUT="request timeout",n.FAILED="request failed",t.exports=n},{"../../class/error-class":28}],32:[function(e,t,i){t.exports=function(){}},{}],33:[function(e,t,i){e("../export");var r=e("./logger");ya.Audio.Logger=r},{"../export":8,"./logger":34}],34:[function(e,t,i){var r=["debug","log","info","warn","error","trace"],n=function(e){this.channel=e};n.ignores=[],n.logLevels=[],n.log=function(e,t,i){var r=[].slice.call(arguments,3).map(function(e){return e&&e._logger&&e._logger()||e}),o={timestamp:+new Date,level:e,channel:t,context:i,message:r};n.ignores[t]||-1===n.logLevels.indexOf(e)||n._dumpEntry(o)},n._dumpEntry=function(e){try{var t=e.level,i=e.context&&(e.context.taskName||e.context.name),r=e.context&&(e.context._logger?e.context._logger():"");"function"!=typeof console[t]?console.log.apply(console,[t.toUpperCase(),n._formatTimestamp(e.timestamp),"["+e.channel+(i?":"+i:"")+"]",r].concat(e.message)):console[t].apply(console,[n._formatTimestamp(e.timestamp),"["+e.channel+(i?":"+i:"")+"]",r].concat(e.message))}catch(o){}},n._formatTimestamp=function(e){var t=new Date(e),i=t.getMilliseconds();return i=i>100?i:i>10?"0"+i:"00"+i,t.toLocaleTimeString()+"."+i},r.forEach(function(e){n.prototype[e]=function(){var t=[].slice.call(arguments);t.unshift(this.channel),t.unshift(e),n.log.apply(n,t)}}),t.exports=n},{}]},{},[20]);
//# sourceMappingURL=dist/index.map.json
